(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return c}),n.d(e,"c",function(){return a});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),c=a[1],u=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:u});c.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,a=void 0===o?{}:o,c=this.normalizeInstanceIdentifier(void 0===i?s:i);if(this.isInitialized(c))throw Error(this.name+"("+c+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:c,options:a});try{for(var l=Object(r.g)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var d=Object(r.e)(h.value,2),f=d[1];c===this.normalizeInstanceIdentifier(d[0])&&f.resolve(u)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(u,c),u},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i;try{for(var o=Object(r.g)(this.onInitCallbacks),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(c){}}}catch(u){n={error:u}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),c=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new c(t,this.project,this.concurrent))}}class c extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e=n("zIRd"),r=n("/6Yf"),i=n("qOnz"),o=n("mrSG"),s=n("q/0M"),a="";function c(t){a=t}var u,l=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(i.H)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(i.B)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),h=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(i.h)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),d=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new l(e)}}catch(n){}return new h},f=d("localStorage"),p=d("sessionStorage"),m=new s.b("@firebase/database"),g=(u=1,function(){return u++}),y=function(t){var e=Object(i.G)(t),n=new i.c;n.update(e);var r=n.digest();return i.f.encodeByteArray(r)},b=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var o=t[r];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?n+=b.apply(null,o):n+="object"==typeof o?Object(i.H)(o):o,n+=" "}return n},_=null,v=!0,w=function(t,e){Object(i.d)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(m.logLevel=s.a.VERBOSE,_=m.log.bind(m),e&&p.set("logging_enabled",!0)):"function"==typeof t?_=t:(_=null,p.remove("logging_enabled"))},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===v&&(v=!1,null===_&&!0===p.get("logging_enabled")&&w(!0)),_){var n=b.apply(null,t);_(n)}},S=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];C.apply(void 0,Object(o.f)([t],Object(o.e)(e)))}},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+b.apply(void 0,Object(o.f)([],Object(o.e)(t)));m.error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+b.apply(void 0,Object(o.f)([],Object(o.e)(t)));throw m.error(n),new Error(n)},x=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+b.apply(void 0,Object(o.f)([],Object(o.e)(t)));m.warn(n)},k=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},T="[MIN_NAME]",I="[MAX_NAME]",A=function(t,e){if(t===e)return 0;if(t===T||e===I)return-1;if(e===T||t===I)return 1;var n=L(t),r=L(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},P=function(t,e){return t===e?0:t<e?-1:1},R=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(i.H)(e))},j=function(t){if("object"!=typeof t||null===t)return Object(i.H)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",o=0;o<e.length;o++)0!==o&&(r+=","),r+=Object(i.H)(e[o]),r+=":",r+=j(t[e[o]]);return r+"}"},D=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function N(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var M=function(t){var e,n,r,o,s;Object(i.d)(!k(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(o=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-o)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var c=a.join(""),u="";for(s=0;s<64;s+=8){var l=parseInt(c.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),u+=l}return u.toLowerCase()},F=new RegExp("^-?(0*)\\d{1,10}$"),L=function(t){if(F.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},V=function(t){try{t()}catch(e){setTimeout(function(){throw x("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},q=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},U=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(function(t){return n.appCheck=t})}return t.prototype.getToken=function(t){return this.appCheck?this.appCheck.getToken(t):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(function(e){return e.addTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){x('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),B=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.get().then(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(C("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';x(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),z=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),H=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,K="websocket",W="long_polling",G=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=f.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&f.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function Q(t,e,n){var r;if(Object(i.d)("string"==typeof e,"typeof type must == string"),Object(i.d)("object"==typeof n,"typeof params must == object"),e===K)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==W)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var o=[];return N(n,function(t,e){o.push(t+"="+e)}),r+o.join("&")}var $=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(i.h)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(i.k)(this.counters_)},t}(),Y={},X={};function Z(t){var e=t.toString();return Y[e]||(Y[e]=new $),Y[e]}var J=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&V(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),tt="start",et="close",nt=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=S(t),this.stats_=Z(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),Q(e,W,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new J(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(i.x)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new rt(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.e)(t,5),i=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===tt)n.id=s,n.password=a;else{if(i!==et)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.e)(t,2),i=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&H.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(i.x)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(i.H)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(i.g)(e),r=D(n,1840),o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(i.x)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(i.H)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),rt=function(){function t(e,n,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(i.x)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=g(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(c){C("frame writing exception"),c.stack&&C(c.stack),C(c)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||C("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(i.x)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){C("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),it=null;"undefined"!=typeof MozWebSocket?it=MozWebSocket:"undefined"!=typeof WebSocket&&(it=WebSocket);var ot=function(){function t(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=S(this.connId),this.stats_=Z(n),this.connURL=t.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var o={v:"5"};return!Object(i.x)()&&"undefined"!=typeof location&&location.hostname&&H.test(location.hostname)&&(o.r="f"),e&&(o.s=e),n&&(o.ls=n),r&&(o.ac=r),Q(t,K,o)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{if(Object(i.x)()){var r={headers:{"User-Agent":"Firebase/5/"+a+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.nodeAdmin?r.headers.Authorization=this.authToken||"":r.headers["X-Firebase-AppCheck"]=this.appCheckToken||"";var o=process.env,s=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new it(this.connURL,[],r)}else this.mySock=new it(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(u){this.log_("Error instantiating WebSocket.");var c=u.message||u.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==it&&!t.forceDisallow_},t.previouslyFailed=function(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){f.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(i.B)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(i.d)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(i.H)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=D(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),st=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[nt,ot]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=ot&&ot.isAvailable(),s=i&&!ot.previouslyFailed();if(e.webSocketOnly&&(i||x("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[ot];else{var a=this.transports_=[];try{for(var c=Object(o.g)(t.ALL_TRANSPORTS),u=c.next();!u.done;u=c.next()){var l=u.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),at=function(){function t(t,e,n,r,i,o,s,a,c,u){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=S("c:"+this.id+":"),this.transportManager_=new st(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=q(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=R("t",t),n=R("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=R("t",t),n=R("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=R("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?O("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):O("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&x("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),q(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):q(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),ct=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ut=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(i.d)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(o.f)([],Object(o.e)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(i.d)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),lt=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(i.v)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(o.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.d)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ut),ht=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function dt(){return new ht("")}function ft(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function pt(t){return t.pieces_.length-t.pieceNum_}function mt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new ht(t.pieces_,e)}function gt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function yt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function bt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ht(e,0)}function _t(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ht)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new ht(n,0)}function vt(t){return t.pieceNum_>=t.pieces_.length}function wt(t,e){var n=ft(t),r=ft(e);if(null===n)return e;if(n===r)return wt(mt(t),mt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ct(t,e){for(var n=yt(t,0),r=yt(e,0),i=0;i<n.length&&i<r.length;i++){var o=A(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function St(t,e){if(pt(t)!==pt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ot(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(pt(t)>pt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Et=function(){return function(t,e){this.errorPrefix_=e,this.parts_=yt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(i.F)(this.parts_[n]);xt(this)}}();function xt(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+kt(t))}function kt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var Tt,It,At=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(o.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.d)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ut),Pt=1e3,Rt=function(t){function e(n,r,o,s,a,c,u,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=o,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=c,h.appCheckTokenProvider_=u,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=S("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Pt,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!Object(i.x)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return h.scheduleConnect_(0),At.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&lt.getInstance().on("online",h.onOnline_,h),h}return Object(o.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,o={r:r,a:t,b:e};this.log_(Object(i.H)(o)),Object(i.d)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new i.a,r={p:t._path.toString(),q:t._queryObject},o={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&o===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var o=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+o),this.listens.has(s)||this.listens.set(s,new Map),Object(i.d)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(i.d)(!this.listens.get(s).has(o),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(o,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,c=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==c&&n.removeListen_(i,o),t.onComplete&&t.onComplete(c,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(i.h)(t,"w")){var n=Object(i.E)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',o=e._path.toString();x("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+o+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(i.p)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(i.A)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)})},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(i.d)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(i.H)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):O("Unrecognized action received from server: "+Object(i.H)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(i.d)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Pt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Pt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Pt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return Object(o.b)(this,void 0,void 0,function(){var t,n,r,s,a,c,u,l,h,d,f,p,m,g=this;return Object(o.d)(this,function(y){switch(y.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,c=!1,u=null,this.realtime_={close:l=function(){u?u.close():(c=!0,r())},sendRequest:function(t){Object(i.d)(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return d=o.e.apply(void 0,[y.sent(),2]),f=d[0],p=d[1],c?C("getToken() completed but was canceled"):(C("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,u=new at(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,function(t){x(t+" ("+g.repoInfo_.toString()+")"),g.interrupt("server_kill")},a)),[3,4];case 3:return m=y.sent(),this.log_("Failed to get token: "+m),c||(this.repoInfo_.nodeAdmin&&x(m),l()),[3,4];case 4:return[2]}})})},e.prototype.interrupt=function(t){C("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){C("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(i.t)(this.interruptReasons_)&&(this.reconnectDelay_=Pt,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return j(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new ht(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){C("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){C("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Object(o.g)(this.listens.values()),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var c=(n=void 0,Object(o.g)(a.values())),u=c.next();!u.done;u=c.next())this.sendListen_(u.value)}catch(d){n={error:d}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(i.x)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+a.replace(/\./g,"-")]=1,Object(i.v)()?t["framework.cordova"]=1:Object(i.y)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=lt.getInstance().currentlyOnline();return Object(i.t)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(ct),jt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Dt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new jt(T,t),r=new jt(T,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return jt.MIN},t}(),Nt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Tt},set:function(t){Tt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return A(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(i.e)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return jt.MIN},e.prototype.maxPost=function(){return new jt(I,Tt)},e.prototype.makePost=function(t,e){return Object(i.d)("string"==typeof t,"KeyIndex indexValue must always be a string."),new jt(t,Tt)},e.prototype.toString=function(){return".key"},e}(Dt),Mt=new Nt,Ft=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Lt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:qt.EMPTY_NODE,this.right=null!=o?o:qt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return qt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return qt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Vt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Lt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),qt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Lt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Lt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ft(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ft(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ft(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ft(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Vt,t}();function Ut(t,e){return A(t.name,e.name)}function Bt(t,e){return A(t,e)}var zt,Ht,Kt,Wt,Gt,Qt=function(t){return"number"==typeof t?"number:"+M(t):"string:"+t},$t=function(t){if(t.isLeafNode()){var e=t.val();Object(i.d)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(i.h)(e,".sv"),"Priority must be a string or number.")}else Object(i.d)(t===It||t.isEmpty(),"priority of unexpected type.");Object(i.d)(t===It||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Yt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(i.d)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),$t(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return zt},set:function(t){zt=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return vt(e)?this:".priority"===ft(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=ft(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(i.d)(".priority"!==r||1===pt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(mt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Qt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?M(this.value_):this.value_,this.lazyHash_=y(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(i.d)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(i.d)(o>=0,"Unknown leaf type: "+n),Object(i.d)(s>=0,"Unknown leaf type: "+r),o===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-o},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Xt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return jt.MIN},e.prototype.maxPost=function(){return new jt(I,new Yt("[PRIORITY-POST]",Kt))},e.prototype.makePost=function(t,e){var n=Ht(t);return new jt(e,new Yt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Dt)),Zt=Math.log(2),Jt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Zt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),te=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Lt(s,o.node,Lt.BLACK,null,null);var c=parseInt(a/2,10)+e,u=i(e,c),l=i(c+1,r);return o=t[c],s=n?n(o):o,new Lt(s,o.node,Lt.BLACK,u,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var u=i(o+1,a),l=t[o],h=n?n(l):l;c(new Lt(h,l.node,r,null,u))},c=function(t){r?(r.left=t,r=t):(o=t,r=t)},u=0;u<e.count;++u){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(u+1));l?a(h,Lt.BLACK):(a(h,Lt.BLACK),a(h,Lt.RED))}return o}(new Jt(t.length));return new qt(r||e,o)},ee={},ne=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(i.d)(ee&&Xt,"ChildrenNode.ts has not been loaded"),Wt=Wt||new t({".priority":ee},{".priority":Xt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(i.E)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof qt?e:null},t.prototype.hasIndex=function(t){return Object(i.h)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(i.d)(e!==Mt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,c=n.getIterator(jt.Wrap),u=c.getNext();u;)a=a||e.isDefinedOn(u.node),s.push(u),u=c.getNext();r=a?te(s,e.getCompare()):ee;var l=e.toString(),h=Object(o.a)({},this.indexSet_);h[l]=e;var d=Object(o.a)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(i.C)(this.indexes_,function(t,o){var s=Object(i.E)(r.indexSet_,o);if(Object(i.d)(s,"Missing index implementation for "+o),t===ee){if(s.isDefinedOn(e.node)){for(var a=[],c=n.getIterator(jt.Wrap),u=c.getNext();u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),te(a,s.getCompare())}return ee}var l=n.get(e.name),h=t;return l&&(h=h.remove(new jt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(i.C)(this.indexes_,function(t){if(t===ee)return t;var r=n.get(e.name);return r?t.remove(new jt(e.name,r)):t}),this.indexSet_)},t}(),re=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&$t(this.priorityNode_),this.children_.isEmpty()&&Object(i.d)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Gt||(Gt=new t(new qt(Bt),null,ne.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Gt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Gt:e},t.prototype.getChild=function(t){var e=ft(t);return null===e?this:this.getImmediateChild(e).getChild(mt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(i.d)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new jt(e,n),o=void 0,s=void 0;n.isEmpty()?(o=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=o.isEmpty()?Gt:this.priorityNode_;return new t(o,a,s)},t.prototype.updateChild=function(t,e){var n=ft(t);if(null===n)return e;Object(i.d)(".priority"!==ft(t)||1===pt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(mt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Xt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Qt(this.getPriority().val())+":"),this.forEachChild(Xt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":y(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new jt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new jt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new jt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,jt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,jt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ie?-1:0},t.prototype.withIndex=function(e){if(e===Mt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Mt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Xt),r=e.getIterator(Xt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Mt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ie=new(function(t){function e(){return t.call(this,new qt(Bt),re.EMPTY_NODE,ne.Default)||this}return Object(o.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return re.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(re));function oe(t,e){if(void 0===e&&(e=null),null===t)return re.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(i.d)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Yt(t,oe(e));if(t instanceof Array){var n=re.EMPTY_NODE;return N(t,function(e,r){if(Object(i.h)(t,e)&&"."!==e.substring(0,1)){var o=oe(r);!o.isLeafNode()&&o.isEmpty()||(n=n.updateImmediateChild(e,o))}}),n.updatePriority(oe(e))}var r=[],o=!1;if(N(t,function(t,e){if("."!==t.substring(0,1)){var n=oe(e);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),r.push(new jt(t,n)))}}),0===r.length)return re.EMPTY_NODE;var s=te(r,Ut,function(t){return t.name},Bt);if(o){var a=te(r,Xt.getCompare());return new re(s,oe(e),new ne({".priority":a},{".priority":Xt}))}return new re(s,oe(e),ne.Default)}Object.defineProperties(jt,{MIN:{value:new jt(T,re.EMPTY_NODE)},MAX:{value:new jt(I,ie)}}),Nt.__EMPTY_NODE=re.EMPTY_NODE,Yt.__childrenNodeConstructor=re,It=ie,Kt=ie,Ht=oe;var se,ae,ce=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(i.d)(!vt(e)&&".priority"!==ft(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(o.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=oe(t),r=re.EMPTY_NODE.updateChild(this.indexPath_,n);return new jt(e,r)},e.prototype.maxPost=function(){var t=re.EMPTY_NODE.updateChild(this.indexPath_,ie);return new jt(I,t)},e.prototype.toString=function(){return yt(this.indexPath_,0).join("/")},e}(Dt),ue=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?A(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return jt.MIN},e.prototype.maxPost=function(){return jt.MAX},e.prototype.makePost=function(t,e){var n=oe(t);return new jt(e,n)},e.prototype.toString=function(){return".value"},e}(Dt)),le="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",he=(se=0,ae=[],function(t){var e,n=t===se;se=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=le.charAt(t%64),t=Math.floor(t/64);Object(i.d)(0===t,"Cannot push at time == 0");var o=r.join("");if(n){for(e=11;e>=0&&63===ae[e];e--)ae[e]=0;ae[e]++}else for(e=0;e<12;e++)ae[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)o+=le.charAt(ae[e]);return Object(i.d)(20===o.length,"nextPushId: Length should be 20."),o}),de=function(t){if("2147483647"===t)return"-";var e=L(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return I;var o=le.charAt(le.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},fe=function(t){if("-2147483648"===t)return T;var e=L(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=le.charAt(le.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function pe(t){return{type:"value",snapshotNode:t}}function me(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ge(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ye(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var be=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,o,s){Object(i.d)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(ge(e,a)):Object(i.d)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(me(e,n)):s.trackChildChange(ye(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Xt,function(t,r){e.hasChild(t)||n.trackChildChange(ge(t,r))}),e.isLeafNode()||e.forEachChild(Xt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ye(e,r,i))}else n.trackChildChange(me(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?re.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),_e=function(){function t(e){this.indexedFilter_=new be(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new jt(e,n))||(n=re.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=re.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(re.EMPTY_NODE);var i=this;return e.forEachChild(Xt,function(t,e){i.matches(new jt(t,e))||(r=r.updateImmediateChild(t,re.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),ve=function(){function t(t){this.rangedFilter_=new _e(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new jt(e,n))||(n=re.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=re.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=re.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(re.EMPTY_NODE);var a=void 0,c=void 0,u=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();u=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),u=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&u(a,s)<=0&&(h=!0),h&&o<this.limit_&&u(s,c)<=0?o++:r=r.updateImmediateChild(s.name,re.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,o){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var c=t;Object(i.d)(c.numChildren()===this.limit_,"");var u=new jt(e,n),l=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(c.hasChild(e)){for(var d=c.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||c.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,u);if(h&&!n.isEmpty()&&p>=0)return null!=o&&o.trackChildChange(ye(e,n,d)),c.updateImmediateChild(e,n);null!=o&&o.trackChildChange(ge(e,d));var m=c.updateImmediateChild(e,re.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=o&&o.trackChildChange(me(f.name,f.node)),m.updateImmediateChild(f.name,f.node)):m}return n.isEmpty()?t:h&&s(l,u)>=0?(null!=o&&(o.trackChildChange(ge(l.name,l.node)),o.trackChildChange(me(e,n))),c.updateImmediateChild(e,n).updateImmediateChild(l.name,re.EMPTY_NODE)):t},t}(),we=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(i.d)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(i.d)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:T},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(i.d)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(i.d)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:I},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(i.d)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Xt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Ce(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Se(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Oe(t,e){var n=t.copy();return n.index_=e,n}function Ee(t){var e,n={};return t.isDefault()||(t.index_===Xt?e="$priority":t.index_===ue?e="$value":t.index_===Mt?e="$key":(Object(i.d)(t.index_ instanceof ce,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(i.H)(e),t.startSet_&&(n.startAt=Object(i.H)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(i.H)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(i.H)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(i.H)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function xe(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Xt&&(e.i=t.index_.toString()),e}var ke=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=S("p:rest:"),o.listens_={},o}return Object(o.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(i.d)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,o){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var c=e.getListenId_(t,r),u={};this.listens_[c]=u;var l=Ee(t._queryParams);this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(i.E)(s.listens_,c)===u&&o(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Ee(t._queryParams),r=t._path.toString(),o=new i.a;return this.restRequest_(r+".json",n,function(t,n){var i=n;404===t&&(i=null,t=null),null===t?(e.onDataUpdate_(r,i,!1,null),o.resolve(i)):o.reject(new Error(i))}),o.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(s){var a=Object(o.e)(s,2),c=a[0],u=a[1];c&&c.accessToken&&(e.auth=c.accessToken),u&&u.token&&(e.ac=u.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(i.D)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=Object(i.B)(h.responseText)}catch(e){x("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&x("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()})},e}(ct),Te=function(){function t(){this.rootNode_=re.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Ie(){return{value:null,children:new Map}}function Ae(t,e,n){if(vt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=ft(e);t.children.has(r)||t.children.set(r,Ie()),Ae(t.children.get(r),e=mt(e),n)}}function Pe(t,e){if(vt(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Xt,function(e,n){Ae(t,new ht(e),n)}),Pe(t,e)}if(t.children.size>0){var r=ft(e);return e=mt(e),t.children.has(r)&&Pe(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function Re(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){Re(r,new ht(e.toString()+"/"+t),n)})}var je=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(o.a)({},t);return this.last_&&N(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),De=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new je(t);var n=1e4+2e4*Math.random();q(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;N(e,function(e,o){o>0&&Object(i.h)(t.statsToReport_,e)&&(n[e]=o,r=!0)}),r&&this.server_.reportStats(n),q(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Ne=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Me(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Fe,Le=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Ne.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(vt(this.path)){if(null!=this.affectedTree.value)return Object(i.d)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new ht(e));return new t(dt(),n,this.revert)}return Object(i.d)(ft(this.path)===e,"operationForChild called for unrelated child."),new t(mt(this.path),this.affectedTree,this.revert)},t}(),Ve=function(){function t(t,e){this.source=t,this.path=e,this.type=Ne.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return vt(this.path)?new t(this.source,dt()):new t(this.source,mt(this.path))},t}(),qe=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Ne.OVERWRITE}return t.prototype.operationForChild=function(e){return vt(this.path)?new t(this.source,dt(),this.snap.getImmediateChild(e)):new t(this.source,mt(this.path),this.snap)},t}(),Ue=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Ne.MERGE}return t.prototype.operationForChild=function(e){if(vt(this.path)){var n=this.children.subtree(new ht(e));return n.isEmpty()?null:n.value?new qe(this.source,dt(),n.value):new t(this.source,dt(),n)}return Object(i.d)(ft(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,mt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Be=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(vt(t))return this.isFullyInitialized()&&!this.filtered_;var e=ft(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),ze=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function He(t,e,n,r,o,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(i.e)("Should only compare child_ events.");var r=new jt(e.childName,e.snapshotNode),o=new jt(n.childName,n.snapshotNode);return t.index_.compare(r,o)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);o.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function Ke(t,e){return{eventCache:t,serverCache:e}}function We(t,e,n,r){return Ke(new Be(e,n,r),t.serverCache)}function Ge(t,e,n,r){return Ke(t.eventCache,new Be(e,n,r))}function Qe(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function $e(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ye=function(){function t(t,e){void 0===e&&(Fe||(Fe=new qt(P)),e=Fe),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return N(e,function(t,e){n=n.set(new ht(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:dt(),value:this.value};if(vt(t))return null;var n=ft(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(mt(t),e);return null!=i?{path:_t(new ht(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(vt(e))return this;var n=ft(e),r=this.children.get(n);return null!==r?r.subtree(mt(e)):new t(null)},t.prototype.set=function(e,n){if(vt(e))return new t(n,this.children);var r=ft(e),i=(this.children.get(r)||new t(null)).set(mt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(vt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=ft(e),r=this.children.get(n);if(r){var i=r.remove(mt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(vt(t))return this.value;var e=ft(t),n=this.children.get(e);return n?n.get(mt(t)):null},t.prototype.setTree=function(e,n){if(vt(e))return n;var r,i=ft(e),o=(this.children.get(i)||new t(null)).setTree(mt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(dt(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(_t(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,dt(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(vt(t))return null;var i=ft(t),o=this.children.get(i);return o?o.findOnPath_(mt(t),_t(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,dt(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(vt(e))return this;this.value&&r(n,this.value);var i=ft(e),o=this.children.get(i);return o?o.foreachOnPath_(mt(e),_t(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(dt(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(_t(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Xe=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Ye(null))},t}();function Ze(t,e,n){if(vt(e))return new Xe(new Ye(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=wt(i,e);return o=o.updateChild(s,n),new Xe(t.writeTree_.set(i,o))}var a=new Ye(n),c=t.writeTree_.setTree(e,a);return new Xe(c)}function Je(t,e,n){var r=t;return N(n,function(t,n){r=Ze(r,_t(e,t),n)}),r}function tn(t,e){if(vt(e))return Xe.empty();var n=t.writeTree_.setTree(e,new Ye(null));return new Xe(n)}function en(t,e){return null!=nn(t,e)}function nn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(wt(n.path,e)):null}function rn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Xt,function(t,n){e.push(new jt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new jt(t,n.value))}),e}function on(t,e){if(vt(e))return t;var n=nn(t,e);return new Xe(null!=n?new Ye(n):t.writeTree_.subtree(e))}function sn(t){return t.writeTree_.isEmpty()}function an(t,e){return cn(dt(),t.writeTree_,e)}function cn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,o){".priority"===e?(Object(i.d)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=cn(_t(t,e),o,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(_t(t,".priority"),r)),n}function un(t,e){return vn(e,t)}function ln(t,e){if(t.snap)return Ot(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Ot(_t(t.path,n),e))return!0;return!1}function hn(t){return t.visible}function dn(t,e,n){for(var r=Xe.empty(),o=0;o<t.length;++o){var s=t[o];if(e(s)){var a=s.path,c=void 0;if(s.snap)Ot(n,a)?r=Ze(r,c=wt(n,a),s.snap):Ot(a,n)&&(c=wt(a,n),r=Ze(r,dt(),s.snap.getChild(c)));else{if(!s.children)throw Object(i.e)("WriteRecord should have .snap or .children");if(Ot(n,a))r=Je(r,c=wt(n,a),s.children);else if(Ot(a,n))if(vt(c=wt(a,n)))r=Je(r,dt(),s.children);else{var u=Object(i.E)(s.children,ft(c));if(u){var l=u.getChild(mt(c));r=Ze(r,dt(),l)}}}}}return r}function fn(t,e,n,r,i){if(r||i){var o=on(t.visibleWrites,e);return!i&&sn(o)?n:i||null!=n||en(o,dt())?an(dn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Ot(t.path,e)||Ot(e,t.path))},e),n||re.EMPTY_NODE):null}var s=nn(t.visibleWrites,e);if(null!=s)return s;var a=on(t.visibleWrites,e);return sn(a)?n:null!=n||en(a,dt())?an(a,n||re.EMPTY_NODE):null}function pn(t,e,n,r){return fn(t.writeTree,t.treePath,e,n,r)}function mn(t,e){return function(t,e,n){var r=re.EMPTY_NODE,i=nn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Xt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=on(t.visibleWrites,e);return n.forEachChild(Xt,function(t,e){var n=an(on(o,new ht(t)),e);r=r.updateImmediateChild(t,n)}),rn(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return rn(on(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function gn(t,e,n,r){return function(t,e,n,r,o){Object(i.d)(r||o,"Either existingEventSnap or existingServerSnap must exist");var s=_t(e,n);if(en(t.visibleWrites,s))return null;var a=on(t.visibleWrites,s);return sn(a)?o.getChild(n):an(a,o.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function yn(t,e){return function(t,e){return nn(t.visibleWrites,e)}(t.writeTree,_t(t.treePath,e))}function bn(t,e,n){return function(t,e,n,r){var i=_t(e,n),o=nn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?an(on(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function _n(t,e){return vn(_t(t.treePath,e),t.writeTree)}function vn(t,e){return{treePath:t,writeTree:e}}var wn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(i.d)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(i.d)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var o=r.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(n,ye(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(n,ge(n,r.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(n,me(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw Object(i.e)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ye(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Cn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Sn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Be(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return bn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:$e(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,c=on(t.visibleWrites,e),u=nn(c,dt());if(null!=u)a=u;else{if(null==n)return[];a=an(c,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function On(t,e,n,r,o,s){var a=e.eventCache;if(null!=yn(r,n))return e;var c=void 0,u=void 0;if(vt(n))if(Object(i.d)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=$e(e),h=mn(r,l instanceof re?l:re.EMPTY_NODE);c=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=pn(r,$e(e));c=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=ft(n);if(".priority"===f){Object(i.d)(1===pt(n),"Can't have a priority with additional path components");var p=a.getNode(),m=gn(r,n,p,u=e.serverCache.getNode());c=null!=m?t.filter.updatePriority(p,m):a.getNode()}else{var g=mt(n),y=void 0;if(a.isCompleteForChild(f)){u=e.serverCache.getNode();var b=gn(r,n,a.getNode(),u);y=null!=b?a.getNode().getImmediateChild(f).updateChild(g,b):a.getNode().getImmediateChild(f)}else y=bn(r,f,e.serverCache);c=null!=y?t.filter.updateChild(a.getNode(),f,y,g,o,s):a.getNode()}}return We(e,c,a.isFullyInitialized()||vt(n),t.filter.filtersNodes())}function En(t,e,n,r,i,o,s,a){var c,u=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(vt(n))c=l.updateFullNode(u.getNode(),r,null);else if(l.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(n,r);c=l.updateFullNode(u.getNode(),h,null)}else{var d=ft(n);if(!u.isCompleteForPath(n)&&pt(n)>1)return e;var f=mt(n),p=u.getNode().getImmediateChild(d).updateChild(f,r);c=".priority"===d?l.updatePriority(u.getNode(),p):l.updateChild(u.getNode(),d,p,f,Cn,null)}var m=Ge(e,c,u.isFullyInitialized()||vt(n),l.filtersNodes());return On(t,m,n,i,new Sn(i,m,o),a)}function xn(t,e,n,r,i,o,s){var a,c,u=e.eventCache,l=new Sn(i,e,o);if(vt(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=We(e,c,!0,t.filter.filtersNodes());else{var h=ft(n);if(".priority"===h)c=t.filter.updatePriority(e.eventCache.getNode(),r),a=We(e,c,u.isFullyInitialized(),u.isFiltered());else{var d=mt(n),f=u.getNode().getImmediateChild(h),p=void 0;if(vt(d))p=r;else{var m=l.getCompleteChild(h);p=null!=m?".priority"===gt(d)&&m.getChild(bt(d)).isEmpty()?m:m.updateChild(d,r):re.EMPTY_NODE}a=f.equals(p)?e:We(e,t.filter.updateChild(u.getNode(),h,p,d,l,s),u.isFullyInitialized(),t.filter.filtersNodes())}}return a}function kn(t,e){return t.eventCache.isCompleteForChild(e)}function Tn(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function In(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var c,u=e;c=vt(n)?r:new Ye(null).setTree(n,r);var l=e.serverCache.getNode();return c.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var c=Tn(0,e.serverCache.getNode().getImmediateChild(n),r);u=En(t,u,new ht(n),c,i,o,s,a)}}),c.children.inorderTraversal(function(n,r){var c=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!c){var h=Tn(0,e.serverCache.getNode().getImmediateChild(n),r);u=En(t,u,new ht(n),h,i,o,s,a)}}),u}var An,Pn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new be(r.getIndex()),o=(n=r).loadsAllData()?new be(n.getIndex()):n.hasLimit()?new ve(n):new _e(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,c=i.updateFullNode(re.EMPTY_NODE,s.getNode(),null),u=o.updateFullNode(re.EMPTY_NODE,a.getNode(),null),l=new Be(c,s.isFullyInitialized(),i.filtersNodes()),h=new Be(u,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ke(h,l),this.eventGenerator_=new ze(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Rn(t,e){var n=$e(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!vt(e)&&!n.getImmediateChild(ft(e)).isEmpty())?n.getChild(e):null}function jn(t){return 0===t.eventRegistrations_.length}function Dn(t,e,n){var r=[];if(n){Object(i.d)(null==e,"A cancel should cancel all event registrations.");var o=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,o);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var c=t.eventRegistrations_[a];if(c.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(c)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Nn(t,e,n,r){e.type===Ne.MERGE&&null!==e.source.queryId&&(Object(i.d)($e(t.viewCache_),"We should always have a full cache before handling merges"),Object(i.d)(Qe(t.viewCache_),"Missing event cache, even though we have a server cache"));var o,s,a=t.viewCache_,c=function(t,e,n,r,o){var s,a,c=new wn;if(n.type===Ne.OVERWRITE){var u=n;u.source.fromUser?s=xn(t,e,u.path,u.snap,r,o,c):(Object(i.d)(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!vt(u.path),s=En(t,e,u.path,u.snap,r,o,a,c))}else if(n.type===Ne.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,c){var u=_t(n,r);kn(e,ft(u))&&(a=xn(t,a,u,c,i,o,s))}),r.foreach(function(r,c){var u=_t(n,r);kn(e,ft(u))||(a=xn(t,a,u,c,i,o,s))}),a}(t,e,l.path,l.children,r,o,c):(Object(i.d)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=In(t,e,l.path,l.children,r,o,a,c))}else if(n.type===Ne.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,o,s){var a;if(null!=yn(r,n))return e;var c=new Sn(r,e,o),u=e.eventCache.getNode(),l=void 0;if(vt(n)||".priority"===ft(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=pn(r,$e(e));else{var d=e.serverCache.getNode();Object(i.d)(d instanceof re,"serverChildren would be complete if leaf node"),h=mn(r,d)}l=t.filter.updateFullNode(u,h=h,s)}else{var f=ft(n),p=bn(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=u.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(u,f,p,mt(n),c,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(u,f,re.EMPTY_NODE,mt(n),c,s):u).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=pn(r,$e(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=yn(r,dt()),We(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,o,c):function(t,e,n,r,i,o,s){if(null!=yn(i,n))return e;var a=e.serverCache.isFiltered(),c=e.serverCache;if(null!=r.value){if(vt(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return En(t,e,n,c.getNode().getChild(n),i,o,a,s);if(vt(n)){var u=new Ye(null);return c.getNode().forEachChild(Mt,function(t,e){u=u.set(new ht(t),e)}),In(t,e,n,u,i,o,a,s)}return e}var l=new Ye(null);return r.foreach(function(t,e){var r=_t(n,t);c.isCompleteForPath(r)&&(l=l.set(t,c.getNode().getChild(r)))}),In(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,o,c)}else{if(n.type!==Ne.LISTEN_COMPLETE)throw Object(i.e)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return On(t,Ge(e,o.getNode(),o.isFullyInitialized()||vt(n),o.isFiltered()),n,r,Cn,i)}(t,e,n.path,r,c)}var d=c.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Qe(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(pe(Qe(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return o=t.processor_,s=c.viewCache,Object(i.d)(s.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Object(i.d)(s.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Object(i.d)(c.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=c.viewCache,Mn(t,c.changes,c.viewCache.eventCache.getNode(),null)}function Mn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),He(t,i,"child_removed",e,r,n),He(t,i,"child_added",e,r,n),He(t,i,"child_moved",o,r,n),He(t,i,"child_changed",e,r,n),He(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Fn,Ln=function(){return function(){this.views=new Map}}();function Vn(t,e,n,r){var s,a,c=e.source.queryId;if(null!==c){var u=t.views.get(c);return Object(i.d)(null!=u,"SyncTree gave us an op for an invalid query."),Nn(u,e,n,r)}var l=[];try{for(var h=Object(o.g)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(Nn(u=d.value,e,n,r))}catch(f){s={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return l}function qn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=pn(n,i?r:null),a=!1;s?a=!0:r instanceof re?(s=mn(n,r),a=!1):(s=re.EMPTY_NODE,a=!1);var c=Ke(new Be(s,a,!1),new Be(r,i,!1));return new Pn(e,c)}return o}function Un(t){var e,n,r=[];try{for(var i=Object(o.g)(t.views.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Bn(t,e){var n,r,i=null;try{for(var s=Object(o.g)(t.views.values()),a=s.next();!a.done;a=s.next())i=i||Rn(a.value,e)}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function zn(t,e){return e._queryParams.loadsAllData()?Wn(t):t.views.get(e._queryIdentifier)}function Hn(t,e){return null!=zn(t,e)}function Kn(t){return null!=Wn(t)}function Wn(t){var e,n;try{for(var r=Object(o.g)(t.views.values()),i=r.next();!i.done;i=r.next()){var s=i.value;if(s.query._queryParams.loadsAllData())return s}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Gn=1,Qn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new Ye(null),this.pendingWriteTree_={visibleWrites:Xe.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function $n(t,e,n,r,o){return function(t,e,n,r,o){Object(i.d)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:o}),o&&(t.visibleWrites=Ze(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,o),o?er(t,new qe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Yn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});Object(i.d)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var o=r.visible,s=!1,a=t.allWrites.length-1;o&&a>=0;){var c=t.allWrites[a];c.visible&&(a>=n&&ln(c,r.path)?o=!1:Ot(r.path,c.path)&&(s=!0)),a--}return!!o&&(s?(function(t){t.visibleWrites=dn(t.allWrites,hn,dt()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=tn(t.visibleWrites,r.path):N(r.children,function(e){t.visibleWrites=tn(t.visibleWrites,_t(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var o=new Ye(null);return null!=r.snap?o=o.set(dt(),!0):N(r.children,function(t){o=o.set(new ht(t),!0)}),er(t,new Le(r.path,o,n))}return[]}function Xn(t,e,n){return er(t,new qe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Zn(t,e,n,r){var s=e._path,a=t.syncPointTree_.get(s),c=[];if(a&&("default"===e._queryIdentifier||Hn(a,e))){var u=function(t,e,n,r){var s,a,c=e._queryIdentifier,u=[],l=[],h=Kn(t);if("default"===c)try{for(var d=Object(o.g)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p,m=Object(o.e)(f.value,2),g=m[0];l=l.concat(Dn(p=m[1],n,r)),jn(p)&&(t.views.delete(g),p.query._queryParams.loadsAllData()||u.push(p.query))}}catch(y){s={error:y}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(s)throw s.error}}else(p=t.views.get(c))&&(l=l.concat(Dn(p,n,r)),jn(p)&&(t.views.delete(c),p.query._queryParams.loadsAllData()||u.push(p.query)));return h&&!Kn(t)&&u.push(new(Object(i.d)(An,"Reference.ts has not been loaded"),An)(e._repo,e._path)),{removed:u,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(s));var l=u.removed;c=u.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),d=t.syncPointTree_.findOnPath(s,function(t,e){return Kn(e)});if(h&&!d){var f=t.syncPointTree_.subtree(s);if(!f.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Kn(e))return[Wn(e)];var r=[];return e&&(r=Un(e)),N(n,function(t,e){r=r.concat(e)}),r})}(f),m=0;m<p.length;++m){var g=p[m],y=g.query,b=ir(t,g);t.listenProvider_.startListening(lr(y),or(t,y),b.hashFn,b.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(lr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(sr(e));t.listenProvider_.stopListening(lr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=sr(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return c}function Jn(t,e,n){var r=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=wt(t,r);o=o||Bn(e,n),s=s||Kn(e)});var a,c=t.syncPointTree_.get(r);c?(s=s||Kn(c),o=o||Bn(c,dt())):(c=new Ln,t.syncPointTree_=t.syncPointTree_.set(r,c)),null!=o?a=!0:(a=!1,o=re.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Bn(e,dt());n&&(o=o.updateImmediateChild(t,n))}));var u=Hn(c,e);if(!u&&!e._queryParams.loadsAllData()){var l=sr(e);Object(i.d)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Gn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=qn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Xt,function(t,e){r.push(me(t,e))}),n.isFullyInitialized()&&r.push(pe(n.getNode())),Mn(t,r,n.getNode(),e)}(s,n)}(c,e,n,un(t.pendingWriteTree_,r),o,a);if(!u&&!s){var f=zn(c,e);d=d.concat(function(t,e,n){var r=e._path,o=or(t,e),s=ir(t,n),a=t.listenProvider_.startListening(lr(e),o,s.hashFn,s.onComplete),c=t.syncPointTree_.subtree(r);if(o)Object(i.d)(!Kn(c.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=c.fold(function(t,e,n){if(!vt(t)&&e&&Kn(e))return[Wn(e).query];var r=[];return e&&(r=r.concat(Un(e).map(function(t){return t.query}))),N(n,function(t,e){r=r.concat(e)}),r}),l=0;l<u.length;++l){var h=u[l];t.listenProvider_.stopListening(lr(h),or(t,h))}return a}(t,e,f))}return d}function tr(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Bn(n,wt(t,e));if(r)return r});return fn(r,e,i,n,!0)}function er(t,e){return nr(e,t.syncPointTree_,null,un(t.pendingWriteTree_,dt()))}function nr(t,e,n,r){if(vt(t.path))return rr(t,e,n,r);var i=e.get(dt());null==n&&null!=i&&(n=Bn(i,dt()));var o=[],s=ft(t.path),a=t.operationForChild(s),c=e.children.get(s);if(c&&a){var u=n?n.getImmediateChild(s):null,l=_n(r,s);o=o.concat(nr(a,c,u,l))}return i&&(o=o.concat(Vn(i,t,r,n))),o}function rr(t,e,n,r){var i=e.get(dt());null==n&&null!=i&&(n=Bn(i,dt()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=_n(r,e),c=t.operationForChild(e);c&&(o=o.concat(rr(c,i,s,a)))}),i&&(o=o.concat(Vn(i,t,r,n))),o}function ir(t,e){var n=e.query,r=or(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||re.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=ar(t,n);if(r){var i=cr(r),o=i.path,s=i.queryId,a=wt(o,e);return ur(t,o,new Ve(Me(s),a))}return[]}(t,n._path,r):function(t,e){return er(t,new Ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Zn(t,n,null,i)}}}function or(t,e){var n=sr(e);return t.queryToTagMap.get(n)}function sr(t){return t._path.toString()+"$"+t._queryIdentifier}function ar(t,e){return t.tagToQueryMap.get(e)}function cr(t){var e=t.indexOf("$");return Object(i.d)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ht(t.substr(0,e))}}function ur(t,e,n){var r=t.syncPointTree_.get(e);return Object(i.d)(r,"Missing sync point for query tag that we're tracking"),Vn(r,n,un(t.pendingWriteTree_,e),null)}function lr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Object(i.d)(Fn,"Reference.ts has not been loaded"),Fn)(t._repo,t._path):t}var hr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),dr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=_t(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return tr(this.syncTree_,this.path_)},t}(),fr=function(t,e,n){return t&&"object"==typeof t?(Object(i.d)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?pr(t[".sv"],e,n):"object"==typeof t[".sv"]?mr(t[".sv"],e):void Object(i.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},pr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(i.d)(!1,"Unexpected server value: "+t)}},mr=function(t,e,n){t.hasOwnProperty("increment")||Object(i.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(i.d)(!1,"Unexpected increment value: "+r);var o=e.node();if(Object(i.d)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;var s=o.getValue();return"number"!=typeof s?r:s+r},gr=function(t,e,n,r){return br(e,new dr(n,t),r)},yr=function(t,e,n){return br(t,new hr(e),n)};function br(t,e,n){var r,i=t.getPriority().val(),o=fr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=fr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Yt(a,oe(o)):t}var c=t;return r=c,o!==c.getPriority().val()&&(r=r.updatePriority(new Yt(o))),c.forEachChild(Xt,function(t,i){var o=br(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var _r=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function vr(t,e){for(var n=e instanceof ht?e:new ht(e),r=t,o=ft(n);null!==o;){var s=Object(i.E)(r.node.children,o)||{children:{},childCount:0};r=new _r(o,r,s),o=ft(n=mt(n))}return r}function wr(t){return t.node.value}function Cr(t,e){t.node.value=e,kr(t)}function Sr(t){return t.node.childCount>0}function Or(t,e){N(t.node.children,function(n,r){e(new _r(n,t,r))})}function Er(t,e,n,r){n&&!r&&e(t),Or(t,function(t){Er(t,e,!0,r)}),n&&r&&e(t)}function xr(t){return new ht(null===t.parent?t.name:xr(t.parent)+"/"+t.name)}function kr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===wr(t)&&!Sr(t)}(n),o=Object(i.h)(t.node.children,e);r&&o?(delete t.node.children[e],t.node.childCount--,kr(t)):r||o||(t.node.children[e]=n.node,t.node.childCount++,kr(t))}(t.parent,t.name,t)}var Tr=/[\[\].#$\/\u0000-\u001F\u007F]/,Ir=/[\[\].#$\u0000-\u001F\u007F]/,Ar=10485760,Pr=function(t){return"string"==typeof t&&0!==t.length&&!Tr.test(t)},Rr=function(t){return"string"==typeof t&&0!==t.length&&!Ir.test(t)},jr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!k(t)||t&&"object"==typeof t&&Object(i.h)(t,".sv")},Dr=function(t,e,n,r){r&&void 0===e||Nr(Object(i.m)(t,"value"),e,n)},Nr=function(t,e,n){var r=n instanceof ht?new Et(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+kt(r));if("function"==typeof e)throw new Error(t+"contains a function "+kt(r)+" with contents = "+e.toString());if(k(e))throw new Error(t+"contains "+e.toString()+" "+kt(r));if("string"==typeof e&&e.length>Ar/3&&Object(i.F)(e)>Ar)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+kt(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var o=!1,s=!1;if(N(e,function(e,n){if(".value"===e)o=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Pr(e)))throw new Error(t+" contains an invalid key ("+e+") "+kt(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,c;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(i.F)(e),xt(t)}(r,e),Nr(t,n,r),c=(a=r).parts_.pop(),a.byteLength_-=Object(i.F)(c),a.parts_.length>0&&(a.byteLength_-=1)}),o&&s)throw new Error(t+' contains ".value" child '+kt(r)+" in addition to actual children.")}},Mr=function(t,e,n,r){if(!r||void 0!==e){var o=Object(i.m)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");var s=[];N(e,function(t,e){var r=new ht(t);if(Nr(o,e,_t(n,r)),".priority"===gt(r)&&!jr(e))throw new Error(o+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=yt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Pr(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Ct);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Ot(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},Fr=function(t,e,n){if(!n||void 0!==e){if(k(e))throw new Error(Object(i.m)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!jr(e))throw new Error(Object(i.m)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Lr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(i.m)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Vr=function(t,e,n,r){if(!(r&&void 0===n||Pr(n)))throw new Error(Object(i.m)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},qr=function(t,e,n,r){if(!(r&&void 0===n||Rr(n)))throw new Error(Object(i.m)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ur=function(t,e){if(".info"===ft(e))throw new Error(t+" failed = Can't modify data under /.info/")},Br=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Pr(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Rr(t)}(n))throw new Error(Object(i.m)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},zr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(i.m)(t,e)+"must be a boolean.")},Hr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Kr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||St(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Wr(t,e,n){Kr(t,n),Qr(t,function(t){return St(t,e)})}function Gr(t,e,n){Kr(t,n),Qr(t,function(t){return Ot(t,e)||Ot(e,t)})}function Qr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?($r(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function $r(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();_&&C("event: "+n.toString()),V(r)}}}var Yr="repo_interrupt",Xr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Hr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ie(),this.transactionQueueTree_=new _r,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Zr(t){var e=t.infoData_.getNode(new ht(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Jr(t){return(e=(e={timestamp:Zr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ti(t,e,n,r,o){t.dataUpdateCount++;var s=new ht(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(o)if(r){var c=Object(i.C)(n,function(t){return oe(t)});a=function(t,e,n,r){var i=ar(t,r);if(i){var o=cr(i),s=o.path,a=o.queryId,c=wt(s,e),u=Ye.fromObject(n);return ur(t,s,new Ue(Me(a),c,u))}return[]}(t.serverSyncTree_,s,c,o)}else{var u=oe(n);a=function(t,e,n,r){var i=ar(t,r);if(null!=i){var o=cr(i),s=o.path,a=o.queryId,c=wt(s,e);return ur(t,s,new qe(Me(a),c,n))}return[]}(t.serverSyncTree_,s,u,o)}else if(r){var l=Object(i.C)(n,function(t){return oe(t)});a=function(t,e,n){var r=Ye.fromObject(n);return er(t,new Ue({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=oe(n);a=Xn(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=fi(t,s)),Gr(t.eventQueue_,d,a)}function ei(t,e){ni(t,"connected",e),!1===e&&function(t){ui(t,"onDisconnectEvents");var e=Jr(t),n=Ie();Re(t.onDisconnect_,dt(),function(r,i){var o=gr(r,i,t.serverSyncTree_,e);Ae(n,r,o)});var r=[];Re(n,dt(),function(e,n){r=r.concat(Xn(t.serverSyncTree_,e,n));var i=bi(t,e);fi(t,i)}),t.onDisconnect_=Ie(),Gr(t.eventQueue_,dt(),r)}(t)}function ni(t,e,n){var r=new ht("/.info/"+e),i=oe(n);t.infoData_.updateSnapshot(r,i);var o=Xn(t.infoSyncTree_,r,i);Gr(t.eventQueue_,r,o)}function ri(t){return t.nextWriteId_++}function ii(t,e,n,r,i){ui(t,"set",{path:e.toString(),value:n,priority:r});var o=Jr(t),s=oe(n,r),a=tr(t.serverSyncTree_,e),c=yr(s,a,o),u=ri(t),l=$n(t.serverSyncTree_,e,c,u,!0);Kr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||x("set at "+e+" failed: "+n);var s=Yn(t.serverSyncTree_,u,!o);Gr(t.eventQueue_,e,s),li(0,i,n,r)});var h=bi(t,e);fi(t,h),Gr(t.eventQueue_,h,[])}function oi(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Pe(t.onDisconnect_,e),li(0,n,r,i)})}function si(t,e,n,r){var i=oe(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&Ae(t.onDisconnect_,e,i),li(0,r,n,o)})}function ai(t,e,n){var r;r=".info"===ft(e._path)?Zn(t.infoSyncTree_,e,n):Zn(t.serverSyncTree_,e,n),Wr(t.eventQueue_,e._path,r)}function ci(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Yr)}function ui(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),C.apply(void 0,Object(o.f)([r],Object(o.e)(e)))}function li(t,e,n,r){e&&V(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function hi(t,e,n){return tr(t.serverSyncTree_,e,n)||re.EMPTY_NODE}function di(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||yi(t,e),wr(e)){var n=mi(t,e);Object(i.d)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),o=hi(t,e,r),s=o,a=o.hash(),c=0;c<n.length;c++){var u=n[c];Object(i.d)(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var l=wt(e,u.path);s=s.updateChild(l,u.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,function(r){ui(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(Yn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(yi(t,vr(t.transactionQueueTree_,e)),di(t,t.transactionQueueTree_),Gr(t.eventQueue_,e,i),a=0;a<o.length;a++)V(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(x("transaction at "+d.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;fi(t,e)}},a)}(t,xr(e),n)}else Sr(e)&&Or(e,function(e){di(t,e)})}function fi(t,e){var n=pi(t,e),r=xr(n);return function(t,e,n){if(0!==e.length){for(var r=[],o=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var c,u=e[a],l=wt(n,u.path),h=!1;if(Object(i.d)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)h=!0,c=u.abortReason,o=o.concat(Yn(t.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)h=!0,c="maxretry",o=o.concat(Yn(t.serverSyncTree_,u.currentWriteId,!0));else{var d=hi(t,u.path,s);u.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){Nr("transaction failed: Data returned ",f,u.path);var p=oe(f);"object"==typeof f&&null!=f&&Object(i.h)(f,".priority")||(p=p.updatePriority(d.getPriority()));var m=u.currentWriteId,g=Jr(t),y=yr(p,d,g);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=y,u.currentWriteId=ri(t),s.splice(s.indexOf(m),1),o=(o=o.concat($n(t.serverSyncTree_,u.path,y,u.currentWriteId,u.applyLocally))).concat(Yn(t.serverSyncTree_,m,!0))}else h=!0,c="nodata",o=o.concat(Yn(t.serverSyncTree_,u.currentWriteId,!0))}Gr(t.eventQueue_,n,o),o=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===c?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(c),!1,null)}))},c=0;c<e.length;c++)a(c);for(yi(t,t.transactionQueueTree_),c=0;c<r.length;c++)V(r[c]);di(t,t.transactionQueueTree_)}}(t,mi(t,n),r),r}function pi(t,e){var n,r=t.transactionQueueTree_;for(n=ft(e);null!==n&&void 0===wr(r);)r=vr(r,n),n=ft(e=mt(e));return r}function mi(t,e){var n=[];return gi(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function gi(t,e,n){var r=wr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Or(e,function(e){gi(t,e,n)})}function yi(t,e){var n=wr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Cr(e,n.length>0?n:void 0)}Or(e,function(e){yi(t,e)})}function bi(t,e){var n=xr(pi(t,e)),r=vr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){_i(t,e)}),_i(t,r),Er(r,function(e){_i(t,e)}),n}function _i(t,e){var n=wr(e);if(n){for(var r=[],o=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(i.d)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(i.d)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),o=o.concat(Yn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Cr(e,void 0):n.length=s+1,Gr(t.eventQueue_,xr(e),o),a=0;a<r.length;a++)V(r[a])}}var vi=function(t,e){var n=wi(t),r=n.namespace;return"firebase.com"===n.domain&&E(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||E("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&x("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new G(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new ht(n.pathString)}},wi=function(t){var e="",n="",r="",i="",s="",a=!0,c="https",u=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(c=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(o.g)(t.split("&")),s=i.next();!s.done;s=i.next()){var a=s.value;if(0!==a.length){var c=a.split("=");2===c.length?r[decodeURIComponent(c[0])]=decodeURIComponent(c[1]):x("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===c||"wss"===c,u=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var m=e.indexOf(".");r=e.substring(0,m).toLowerCase(),n=e.substring(m+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:a,scheme:c,pathString:i,namespace:s}},Ci=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(i.H)(this.snapshot.exportVal())},t}(),Si=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Oi=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(i.d)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Ei=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new i.a;return oi(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){Ur("OnDisconnect.remove",this._path);var t=new i.a;return si(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){Ur("OnDisconnect.set",this._path),Dr("OnDisconnect.set",t,this._path,!1);var e=new i.a;return si(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){Ur("OnDisconnect.setWithPriority",this._path),Dr("OnDisconnect.setWithPriority",t,this._path,!1),Fr("OnDisconnect.setWithPriority",e,!1);var n=new i.a;return function(t,e,n,r,i){var o=oe(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&Ae(t.onDisconnect_,e,o),li(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){Ur("OnDisconnect.update",this._path),Mr("OnDisconnect.update",t,this._path,!1);var e=new i.a;return function(t,e,n,r){if(Object(i.t)(n))return C("onDisconnect().update() called with empty data.  Don't do anything."),void li(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&N(n,function(n,r){var i=oe(r);Ae(t.onDisconnect_,_t(e,n),i)}),li(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),xi=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return vt(this._path)?null:gt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ai(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=xe(this._queryParams),e=j(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return xe(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Object(i.n)(e))instanceof t))return!1;var n=this._repo===e._repo,r=St(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function ki(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ti(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Mt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==T)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!==I)throw new Error(r);if("string"!=typeof n)throw new Error(o)}}else if(t.getIndex()===Xt){if(null!=e&&!jr(e)||null!=n&&!jr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(i.d)(t.getIndex()instanceof ce||t.getIndex()===ue,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ii(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Ai=function(t){function e(e,n){return t.call(this,e,n,new we,!1)||this}return Object(o.c)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=bt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(xi),Pi=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new ht(e),r=Di(this.ref,e);return new t(this._node.getChild(n),r,Xt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,Di(n.ref,r),Xt))})},t.prototype.hasChild=function(t){var e=new ht(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Ri(t,e){return(t=Object(i.n)(t))._checkNotDeleted("ref"),void 0!==e?Di(t._root,e):t._root}function ji(t,e){(t=Object(i.n)(t))._checkNotDeleted("refFromURL");var n=vi(e,t._repo.repoInfo_.nodeAdmin);Br("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||E("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Ri(t,n.path.toString())}function Di(t,e){var n;return null===ft((t=Object(i.n)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),qr("child","path",n,!1)):qr("child","path",e,!1),new Ai(t._repo,_t(t._path,e))}function Ni(t,e){t=Object(i.n)(t),Ur("push",t._path),Dr("push",e,t._path,!0);var n,r=Zr(t._repo),o=he(r),s=Di(t,o),a=Di(t,o);return n=null!=e?Fi(a,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Mi(t){return Ur("remove",t._path),Fi(t,null)}function Fi(t,e){t=Object(i.n)(t),Ur("set",t._path),Dr("set",e,t._path,!1);var n=new i.a;return ii(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function Li(t,e){t=Object(i.n)(t),Ur("setPriority",t._path),Fr("setPriority",e,!1);var n=new i.a;return ii(t._repo,_t(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function Vi(t,e,n){if(Ur("setWithPriority",t._path),Dr("setWithPriority",e,t._path,!1),Fr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new i.a;return ii(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function qi(t,e){Mr("update",e,t._path,!1);var n=new i.a;return function(t,e,n,r){ui(t,"update",{path:e.toString(),value:n});var o=!0,s=Jr(t),a={};if(N(n,function(n,r){o=!1,a[n]=gr(_t(e,n),oe(r),t.serverSyncTree_,s)}),o)C("update() called with empty data.  Don't do anything."),li(0,r,"ok",void 0);else{var c=ri(t),u=function(t,e,n,r){!function(t,e,n,r){Object(i.d)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Je(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var o=Ye.fromObject(n);return er(t,new Ue({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(t.serverSyncTree_,e,a,c);Kr(t.eventQueue_,u),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||x("update at "+e+" failed: "+n);var s=Yn(t.serverSyncTree_,c,!o),a=s.length>0?fi(t,e):e;Gr(t.eventQueue_,a,s),li(0,r,n,i)}),N(n,function(n){var r=bi(t,_t(e,n));fi(t,r)}),Gr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var Ui=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Ci("value",this,new Pi(t.snapshotNode,new Ai(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Si(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Bi=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Si(this,t,e):null},t.prototype.createEvent=function(t,e){Object(i.d)(null!=t.childName,"Child events should have a childName.");var n=Di(new Ai(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Ci(t.type,this,new Pi(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function zi(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){s(e,n),ai(t._repo,t,u)};a.userCallback=n.userCallback,a.context=n.context,n=a}var c=new Oi(n,o||void 0),u="value"===e?new Ui(c):new Bi(e,c);return function(t,e,n){var r;r=".info"===ft(e._path)?Jn(t.infoSyncTree_,e,n):Jn(t.serverSyncTree_,e,n),Wr(t.eventQueue_,e._path,r)}(t._repo,t,u),function(){return ai(t._repo,t,u)}}function Hi(t,e,n,r){return zi(t,"value",e,n,r)}function Ki(t,e,n,r){return zi(t,"child_added",e,n,r)}function Wi(t,e,n,r){return zi(t,"child_changed",e,n,r)}function Gi(t,e,n,r){return zi(t,"child_moved",e,n,r)}function Qi(t,e,n,r){return zi(t,"child_removed",e,n,r)}function $i(t,e,n){var r=null,i=n?new Oi(n):null;"value"===e?r=new Ui(i):e&&(r=new Bi(e,i)),ai(t._repo,t,r)}var Yi=function(){return function(){}}(),Xi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Dr("endAt",this._value,t._path,!0);var e=Se(t._queryParams,this._value,this._key);if(Ii(e),Ti(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new xi(t._repo,t._path,e,t._orderByCalled)},e}(Yi);function Zi(t,e){return Vr("endAt","key",e,!0),new Xi(t,e)}var Ji=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Dr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Mt?("string"==typeof n&&(n=fe(n)),i=Se(e,n,r)):i=Se(e,n,null==r?T:fe(r)),i.endBeforeSet_=!0,i);if(Ii(o),Ti(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new xi(t._repo,t._path,o,t._orderByCalled)},e}(Yi);function to(t,e){return Vr("endBefore","key",e,!0),new Ji(t,e)}var eo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Dr("startAt",this._value,t._path,!0);var e=Ce(t._queryParams,this._value,this._key);if(Ii(e),Ti(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new xi(t._repo,t._path,e,t._orderByCalled)},e}(Yi);function no(t,e){return void 0===t&&(t=null),Vr("startAt","key",e,!0),new eo(t,e)}var ro=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Dr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Mt?("string"==typeof n&&(n=de(n)),i=Ce(e,n,r)):i=Ce(e,n,null==r?I:de(r)),i.startAfterSet_=!0,i);if(Ii(o),Ti(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new xi(t._repo,t._path,o,t._orderByCalled)},e}(Yi);function io(t,e){return Vr("startAfter","key",e,!0),new ro(t,e)}var oo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new xi(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(Yi);function so(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new oo(t)}var ao=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new xi(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(Yi);function co(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ao(t)}var uo=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){ki(t,"orderByChild");var e=new ht(this._path);if(vt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ce(e),r=Oe(t._queryParams,n);return Ti(r),new xi(t._repo,t._path,r,!0)},e}(Yi);function lo(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return qr("orderByChild","path",t,!1),new uo(t)}var ho=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){ki(t,"orderByKey");var e=Oe(t._queryParams,Mt);return Ti(e),new xi(t._repo,t._path,e,!0)},e}(Yi);function fo(){return new ho}var po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){ki(t,"orderByPriority");var e=Oe(t._queryParams,Xt);return Ti(e),new xi(t._repo,t._path,e,!0)},e}(Yi);function mo(){return new po}var go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){ki(t,"orderByValue");var e=Oe(t._queryParams,ue);return Ti(e),new xi(t._repo,t._path,e,!0)},e}(Yi);function yo(){return new go}var bo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){if(Dr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Xi(this._value,this._key)._apply(new eo(this._value,this._key)._apply(t))},e}(Yi);function _o(t,e){return Vr("equalTo","key",e,!0),new bo(t,e)}function vo(t){for(var e,n,r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];var a=Object(i.n)(t);try{for(var c=Object(o.g)(r),u=c.next();!u.done;u=c.next()){var l=u.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return a}!function(t){Object(i.d)(!An,"__referenceConstructor has already been defined"),An=t}(Ai),function(t){Object(i.d)(!Fn,"__referenceConstructor has already been defined"),Fn=t}(Ai);var wo={},Co=!1;function So(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||E("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),C("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=vi(o,i),c=a.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(s=!0,c=(a=vi(o="http://"+u+"?ns="+c.namespace,i)).repoInfo):s=!a.repoInfo.secure;var l=i&&s?new z(z.OWNER):new B(t.name,t.options,e);Br("Invalid Firebase Database URL",a),vt(a.path)||E("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=wo[e.name];i||(wo[e.name]=i={});var o=i[t.toURLString()];return o&&E("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Xr(t,Co,n,r),i[t.toURLString()]=o,o}(c,t,l,new U(t.name,n));return new Oo(h,t)}var Oo=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=Z(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new ke(t.repoInfo_,function(e,n,r,i){ti(t,e,n,r,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(function(){return ei(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(i.H)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Rt(t.repoInfo_,e,function(e,n,r,i){ti(t,e,n,r,i)},function(e){ei(t,e)},function(e){!function(t,e){N(e,function(e,n){ni(t,e,n)})}(t,e)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,o;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.appCheckProvider_.addTokenChangeListener(function(e){t.server_.refreshAppCheckToken(e.token)}),t.statsReporter_=(r=function(){return new De(t.stats_,t.server_)},o=t.repoInfo_.toString(),X[o]||(X[o]=r()),X[o]),t.infoData_=new Te,t.infoSyncTree_=new Qn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Xn(t.infoSyncTree_,e._path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ni(t,"connected",!1),t.serverSyncTree_=new Qn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Gr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Ai(this._repo,dt())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=wo[e=this.app.name])&&n[t.key]===t||E("Database "+e+"("+t.repoInfo_+") has already been deleted."),ci(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&E("Cannot call "+t+" on a deleted database.")},t}();function Eo(t){(t=Object(i.n)(t))._checkNotDeleted("goOffline"),ci(t._repo)}function xo(t){var e;(t=Object(i.n)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(Yr)}var ko={".sv":"timestamp"},To=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function Io(t,e,n){var r;if(t=Object(i.n)(t),Ur("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var o=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new i.a,a=Hi(t,function(){});return function(e,n,r,o,a,c){ui(e,"transaction on "+n);var u={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new Pi(r,new Ai(t._repo,t._path),Xt),s.resolve(new To(n,i)))},status:null,order:g(),applyLocally:c,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=hi(e,n,void 0);u.currentInputSnapshot=l;var h=u.update(l.val());if(void 0===h)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{Nr("transaction failed: Data returned ",h,u.path),u.status=0;var d=vr(e.transactionQueueTree_,n),f=wr(d)||[];f.push(u),Cr(d,f);var p=void 0;"object"==typeof h&&null!==h&&Object(i.h)(h,".priority")?(p=Object(i.E)(h,".priority"),Object(i.d)(jr(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(tr(e.serverSyncTree_,n)||re.EMPTY_NODE).getPriority().val();var m=Jr(e),y=oe(h,p),b=yr(y,l,m);u.currentOutputSnapshotRaw=y,u.currentOutputSnapshotResolved=b,u.currentWriteId=ri(e);var _=$n(e.serverSyncTree_,n,b,u.currentWriteId,u.applyLocally);Gr(e.eventQueue_,n,_),di(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,o),s.promise}var Ao=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(i.I)("OnDisconnect.cancel",0,1,arguments.length),Object(i.J)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){Object(i.I)("OnDisconnect.remove",0,1,arguments.length),Object(i.J)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){Object(i.I)("OnDisconnect.set",1,2,arguments.length),Object(i.J)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){Object(i.I)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(i.J)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if(Object(i.I)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,x("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(i.J)("OnDisconnect.update","onComplete",e,!0);var o=this._delegate.update(t);return e&&o.then(function(){return e(null)},function(t){return e(t)}),o},t}(),Po=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(i.I)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Ro=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(i.I)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(i.I)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(i.I)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(i.I)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(i.I)("DataSnapshot.child",0,1,arguments.length),e=String(e),qr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(i.I)("DataSnapshot.hasChild",1,1,arguments.length),qr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(i.I)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(i.I)("DataSnapshot.forEach",1,1,arguments.length),Object(i.J)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return Object(i.I)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(i.I)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(i.I)("DataSnapshot.ref",0,0,arguments.length),new Do(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),jo=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,o){var s,a=this;Object(i.I)("Query.on",2,4,arguments.length),Object(i.J)("Query.on","callback",n,!1);var c=t.getCancelAndContextArgs_("Query.on",r,o),u=function(t,e){n.call(c.context,new Ro(a.database,t),e)};u.userCallback=n,u.context=c.context;var l=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(e){case"value":return Hi(this._delegate,u,l),n;case"child_added":return Ki(this._delegate,u,l),n;case"child_removed":return Qi(this._delegate,u,l),n;case"child_changed":return Wi(this._delegate,u,l),n;case"child_moved":return Gi(this._delegate,u,l),n;default:throw new Error(Object(i.m)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(i.I)("Query.off",0,3,arguments.length),Lr("Query.off",t,!0),Object(i.J)("Query.off","callback",e,!0),Object(i.K)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,$i(this._delegate,t,r)}else $i(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=wt(t,n);r=r||Bn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Bn(i,dt()):(i=new Ln,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new Be(r,!0,!1):null;return Qe(qn(i,e,un(t.pendingWriteTree_,e._path),o?s.getNode():re.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=oe(n),i=Xn(t.serverSyncTree_,e._path,r);return Wr(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return ui(t,"get for query "+Object(i.H)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=Object(i.n)(t))._repo,t).then(function(e){return new Pi(e,new Ai(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new Ro(t.database,e)})},t.prototype.once=function(e,n,r,o){var s=this;Object(i.I)("Query.once",1,4,arguments.length),Object(i.J)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.on",r,o),c=new i.a,u=function(t,e){var r=new Ro(s.database,t);n&&n.call(a.context,r,e),c.resolve(r)};u.userCallback=n,u.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),c.reject(t)};switch(e){case"value":Hi(this._delegate,u,l,{onlyOnce:!0});break;case"child_added":Ki(this._delegate,u,l,{onlyOnce:!0});break;case"child_removed":Qi(this._delegate,u,l,{onlyOnce:!0});break;case"child_changed":Wi(this._delegate,u,l,{onlyOnce:!0});break;case"child_moved":Gi(this._delegate,u,l,{onlyOnce:!0});break;default:throw new Error(Object(i.m)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise},t.prototype.limitToFirst=function(e){return Object(i.I)("Query.limitToFirst",1,1,arguments.length),new t(this.database,vo(this._delegate,so(e)))},t.prototype.limitToLast=function(e){return Object(i.I)("Query.limitToLast",1,1,arguments.length),new t(this.database,vo(this._delegate,co(e)))},t.prototype.orderByChild=function(e){return Object(i.I)("Query.orderByChild",1,1,arguments.length),new t(this.database,vo(this._delegate,lo(e)))},t.prototype.orderByKey=function(){return Object(i.I)("Query.orderByKey",0,0,arguments.length),new t(this.database,vo(this._delegate,fo()))},t.prototype.orderByPriority=function(){return Object(i.I)("Query.orderByPriority",0,0,arguments.length),new t(this.database,vo(this._delegate,mo()))},t.prototype.orderByValue=function(){return Object(i.I)("Query.orderByValue",0,0,arguments.length),new t(this.database,vo(this._delegate,yo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(i.I)("Query.startAt",0,2,arguments.length),new t(this.database,vo(this._delegate,no(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(i.I)("Query.startAfter",0,2,arguments.length),new t(this.database,vo(this._delegate,io(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(i.I)("Query.endAt",0,2,arguments.length),new t(this.database,vo(this._delegate,Zi(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(i.I)("Query.endBefore",0,2,arguments.length),new t(this.database,vo(this._delegate,to(e,n)))},t.prototype.equalTo=function(e,n){return Object(i.I)("Query.equalTo",1,2,arguments.length),new t(this.database,vo(this._delegate,_o(e,n)))},t.prototype.toString=function(){return Object(i.I)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(i.I)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(i.I)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(i.J)(t,"cancel",r.cancel,!0),r.context=n,Object(i.K)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(i.m)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Do(this.database,new Ai(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Do=function(t){function e(e,n){var r=t.call(this,e,new xi(n._repo,n._path,new we,!1))||this;return r.database=e,r._delegate=n,r}return Object(o.c)(e,t),e.prototype.getKey=function(){return Object(i.I)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(i.I)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Di(this._delegate,t))},e.prototype.getParent=function(){Object(i.I)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(i.I)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(i.I)("Reference.set",1,2,arguments.length),Object(i.J)("Reference.set","onComplete",e,!0);var n=Fi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if(Object(i.I)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,x("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ur("Reference.update",this._delegate._path),Object(i.J)("Reference.update","onComplete",e,!0);var o=qi(this._delegate,t);return e&&o.then(function(){return e(null)},function(t){return e(t)}),o},e.prototype.setWithPriority=function(t,e,n){Object(i.I)("Reference.setWithPriority",2,3,arguments.length),Object(i.J)("Reference.setWithPriority","onComplete",n,!0);var r=Vi(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){Object(i.I)("Reference.remove",0,1,arguments.length),Object(i.J)("Reference.remove","onComplete",t,!0);var e=Mi(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;Object(i.I)("Reference.transaction",1,3,arguments.length),Object(i.J)("Reference.transaction","transactionUpdate",t,!1),Object(i.J)("Reference.transaction","onComplete",e,!0),zr("Reference.transaction","applyLocally",n,!0);var o=Io(this._delegate,t,{applyLocally:n}).then(function(t){return new Po(t.committed,new Ro(r.database,t.snapshot))});return e&&o.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),o},e.prototype.setPriority=function(t,e){Object(i.I)("Reference.setPriority",1,2,arguments.length),Object(i.J)("Reference.setPriority","onComplete",e,!0);var n=Li(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;Object(i.I)("Reference.push",0,2,arguments.length),Object(i.J)("Reference.push","onComplete",n,!0);var o=Ni(this._delegate,t),s=o.then(function(t){return new e(r.database,t)});n&&s.then(function(){return n(null)},function(t){return n(t)});var a=new e(this.database,o);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return Ur("Reference.onDisconnect",this._delegate._path),new Ao(new Ei(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(jo),No=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=Object(i.n)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&E("Cannot call useEmulator() after instance has already been initialized.");var o=t._repoInternal,s=void 0;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&E('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new z(z.OWNER);else if(r.mockUserToken){var a=Object(i.i)(r.mockUserToken,t.app.options.projectId);s=new z(a)}!function(t,e,n,r){t.repoInfo_=new G(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(o,e,n,s)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if(Object(i.I)("database.ref",0,1,arguments.length),t instanceof Do){var e=ji(this._delegate,t.toString());return new Do(this,e)}return e=Ri(this._delegate,t),new Do(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(i.I)(e,1,1,arguments.length);var n=ji(this._delegate,t);return new Do(this,n)},t.prototype.goOffline=function(){return Object(i.I)("database.goOffline",0,0,arguments.length),Eo(this._delegate)},t.prototype.goOnline=function(){return Object(i.I)("database.goOnline",0,0,arguments.length),xo(this._delegate)},t.ServerValue={TIMESTAMP:ko,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Mo=Object.freeze({__proto__:null,forceLongPolling:function(){ot.forceDisallow(),nt.forceAllow()},forceWebSockets:function(){nt.forceDisallow()},isWebSocketsAvailable:function(){return ot.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new je(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);N(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,i=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;c(t.version);var u=new r.c("auth-internal",new r.b("database-standalone"));return u.setComponent(new r.a("auth-internal",function(){return i},"PRIVATE")),{instance:new No(So(e,u,void 0,n,a),e),namespace:o}}}),Fo=Rt;Rt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Rt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Lo=Object.freeze({__proto__:null,DataConnection:Fo,RealTimeConnection:at,hijackHash:function(t){var e=Rt.prototype.put;return Rt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Rt.prototype.put=e}},ConnectionTarget:G,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){Co=t}(t)}}),Vo=No.ServerValue;!function(e){c(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new r.a("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new No(So(r,i,o,n),r)},"PUBLIC").setServiceProps({Reference:Do,Query:jo,Database:No,DataSnapshot:Ro,enableLogging:w,INTERNAL:Mo,ServerValue:Vo,TEST_ACCESS:Lo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.10.0"),Object(i.x)()&&(t.exports=n)}(e.a)}).call(this,n("3UD+")(t))},"7Hc7":function(t,e,n){"use strict";n.d(e,"b",function(){return d}),n.d(e,"a",function(){return f});let r=1;const i=(()=>Promise.resolve())(),o={};function s(t){return t in o&&(delete o[t],!0)}const a={setImmediate(t){const e=r++;return o[e]=!0,i.then(()=>s(e)&&t()),e},clearImmediate(t){s(t)}};var c=n("3N8a");class u extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=a.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(a.clearImmediate(e),t.scheduled=void 0)}}var l=n("IjjT");class h extends l.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new h(u),f=d},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),c=n("NJ4a");class u extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof u?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new u(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends u{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(c.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(c.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(c.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(c.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),c=n("Lhse"),u=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(u.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[c.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[c.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),c=n("2fFW");let u=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||c.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),c.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){c.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=c.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.5.0","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),c=n("c2HN"),u=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(c.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(u.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},WMd4:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("EY2u"),i=n("LRne"),o=n("z6cu");let s=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return Object(o.a)(this.error);case"C":return Object(r.b)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})()},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),c=n("2QA8");class u extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[c.a](){return new u(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Y7HM:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return sn}),n.d(e,"b",function(){return Pc}),n.d(e,"c",function(){return xc}),n.d(e,"d",function(){return Oc}),n.d(e,"e",function(){return Ec}),n.d(e,"f",function(){return Ou}),n.d(e,"g",function(){return pu}),n.d(e,"h",function(){return _a}),n.d(e,"i",function(){return Bc}),n.d(e,"j",function(){return Ws}),n.d(e,"k",function(){return Dc}),n.d(e,"l",function(){return Ys}),n.d(e,"m",function(){return wr}),n.d(e,"n",function(){return tc}),n.d(e,"o",function(){return uo}),n.d(e,"p",function(){return gn}),n.d(e,"q",function(){return on}),n.d(e,"r",function(){return xo}),n.d(e,"s",function(){return fa}),n.d(e,"t",function(){return pa}),n.d(e,"u",function(){return jc}),n.d(e,"v",function(){return Aa}),n.d(e,"w",function(){return gu}),n.d(e,"x",function(){return Ia}),n.d(e,"y",function(){return uu}),n.d(e,"z",function(){return Kc}),n.d(e,"A",function(){return yn}),n.d(e,"B",function(){return Ac}),n.d(e,"C",function(){return Ic}),n.d(e,"D",function(){return nc}),n.d(e,"E",function(){return Zs}),n.d(e,"F",function(){return Xs}),n.d(e,"G",function(){return kr}),n.d(e,"H",function(){return ta}),n.d(e,"I",function(){return gr}),n.d(e,"J",function(){return _n}),n.d(e,"K",function(){return _u}),n.d(e,"L",function(){return Ea}),n.d(e,"M",function(){return Zc}),n.d(e,"N",function(){return an}),n.d(e,"O",function(){return na}),n.d(e,"P",function(){return ea}),n.d(e,"Q",function(){return Ra}),n.d(e,"R",function(){return P}),n.d(e,"S",function(){return lu}),n.d(e,"T",function(){return au}),n.d(e,"U",function(){return f}),n.d(e,"V",function(){return In}),n.d(e,"W",function(){return su}),n.d(e,"X",function(){return Cu}),n.d(e,"Y",function(){return eu}),n.d(e,"Z",function(){return Rc}),n.d(e,"ab",function(){return ho}),n.d(e,"bb",function(){return Rs}),n.d(e,"cb",function(){return pr}),n.d(e,"db",function(){return Xn}),n.d(e,"eb",function(){return qn}),n.d(e,"fb",function(){return Bn}),n.d(e,"gb",function(){return Wn}),n.d(e,"hb",function(){return Hn}),n.d(e,"ib",function(){return zn}),n.d(e,"jb",function(){return Kn}),n.d(e,"kb",function(){return Ts}),n.d(e,"lb",function(){return wu}),n.d(e,"mb",function(){return Is}),n.d(e,"nb",function(){return As}),n.d(e,"ob",function(){return Un}),n.d(e,"pb",function(){return M}),n.d(e,"qb",function(){return Mo}),n.d(e,"rb",function(){return Jo}),n.d(e,"sb",function(){return Zo}),n.d(e,"tb",function(){return ks}),n.d(e,"ub",function(){return Et}),n.d(e,"vb",function(){return l}),n.d(e,"wb",function(){return Vn}),n.d(e,"xb",function(){return To}),n.d(e,"yb",function(){return bt}),n.d(e,"zb",function(){return zs}),n.d(e,"Ab",function(){return fi}),n.d(e,"Bb",function(){return qo}),n.d(e,"Cb",function(){return fs}),n.d(e,"Db",function(){return gc}),n.d(e,"Eb",function(){return G}),n.d(e,"Fb",function(){return tt}),n.d(e,"Gb",function(){return g}),n.d(e,"Hb",function(){return y}),n.d(e,"Ib",function(){return X}),n.d(e,"Jb",function(){return et}),n.d(e,"Kb",function(){return zo}),n.d(e,"Lb",function(){return Qo}),n.d(e,"Mb",function(){return Yo}),n.d(e,"Nb",function(){return $o}),n.d(e,"Ob",function(){return Go}),n.d(e,"Pb",function(){return Wo}),n.d(e,"Qb",function(){return Xo}),n.d(e,"Rb",function(){return tn}),n.d(e,"Sb",function(){return Cs}),n.d(e,"Tb",function(){return Tn}),n.d(e,"Ub",function(){return en}),n.d(e,"Vb",function(){return Sc}),n.d(e,"Wb",function(){return ts}),n.d(e,"Xb",function(){return _c}),n.d(e,"Yb",function(){return ye}),n.d(e,"Zb",function(){return ge}),n.d(e,"ac",function(){return os}),n.d(e,"bc",function(){return $a}),n.d(e,"cc",function(){return Ya}),n.d(e,"dc",function(){return Xa}),n.d(e,"ec",function(){return cs}),n.d(e,"fc",function(){return as}),n.d(e,"gc",function(){return Ho}),n.d(e,"hc",function(){return Ga}),n.d(e,"ic",function(){return dc}),n.d(e,"jc",function(){return Bo}),n.d(e,"kc",function(){return Er}),n.d(e,"lc",function(){return Or}),n.d(e,"mc",function(){return Ht}),n.d(e,"nc",function(){return yr}),n.d(e,"oc",function(){return Z}),n.d(e,"pc",function(){return yc}),n.d(e,"qc",function(){return fc}),n.d(e,"rc",function(){return ds}),n.d(e,"sc",function(){return es}),n.d(e,"tc",function(){return Ss}),n.d(e,"uc",function(){return Uo}),n.d(e,"vc",function(){return _s}),n.d(e,"wc",function(){return vs}),n.d(e,"xc",function(){return ws}),n.d(e,"yc",function(){return pc});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function c(t){for(let e in t)if(t[e]===c)return e;throw Error("Could not find renamed property on target object.")}function u(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=c({__forward_ref__:c});function f(t){return t.__forward_ref__=f,t.toString=function(){return l(this())},t}function p(t){return m(t)?t():t}function m(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}function g(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function y(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function b(t){return _(t,w)||_(t,S)}function _(t,e){return t.hasOwnProperty(e)?t[e]:null}function v(t){return t&&(t.hasOwnProperty(C)||t.hasOwnProperty(O))?t[C]:null}const w=c({"\u0275prov":c}),C=c({"\u0275inj":c}),S=c({ngInjectableDef:c}),O=c({ngInjectorDef:c});var E=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let x;function k(t){const e=x;return x=t,e}function T(t,e,n){const r=b(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&E.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${l(t)}]`)}function I(t){return{toString:t}.toString()}var A=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),P=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const R="undefined"!=typeof globalThis&&globalThis,j="undefined"!=typeof window&&window,D="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,N="undefined"!=typeof global&&global,M=R||N||j||D,F={},L=[],V=c({"\u0275cmp":c}),q=c({"\u0275dir":c}),U=c({"\u0275pipe":c}),B=c({"\u0275mod":c}),z=c({"\u0275loc":c}),H=c({"\u0275fac":c}),K=c({__NG_ELEMENT_ID__:c});let W=0;function G(t){return I(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===A.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||L,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||P.Emulated,id:"c",styles:t.styles||L,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=W++,n.inputs=J(t.inputs,e),n.outputs=J(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Q):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map($):null,n})}function Q(t){return nt(t)||function(t){return t[q]||null}(t)}function $(t){return function(t){return t[U]||null}(t)}const Y={};function X(t){const e={type:t.type,bootstrap:t.bootstrap||L,declarations:t.declarations||L,imports:t.imports||L,exports:t.exports||L,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&I(()=>{Y[t.id]=t.type}),e}function Z(t,e){return I(()=>{const n=rt(t,!0);n.declarations=e.declarations||L,n.imports=e.imports||L,n.exports=e.exports||L})}function J(t,e){if(null==t)return F;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const tt=G;function et(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function nt(t){return t[V]||null}function rt(t,e){const n=t[B]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const it=20,ot=10;function st(t){return Array.isArray(t)&&"object"==typeof t[1]}function at(t){return Array.isArray(t)&&!0===t[1]}function ct(t){return 0!=(8&t.flags)}function ut(t){return 2==(2&t.flags)}function lt(t){return 1==(1&t.flags)}function ht(t){return null!==t.template}function dt(t,e){return t.hasOwnProperty(H)?t[H]:null}class ft extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function pt(t){return"string"==typeof t?t:null==t?"":String(t)}function mt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():pt(t)}function gt(t,e){const n=e?" in "+e:"";throw new ft("201",`No provider for ${mt(t)} found${n}`)}class yt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function bt(){return _t}function _t(t){return t.type.prototype.ngOnChanges&&(t.setInput=wt),vt}function vt(){const t=Ct(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===F)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function wt(t,e,n,r){const i=Ct(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:F,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],c=s[a];o[a]=new yt(c&&c.currentValue,e,s===F),t[r]=e}function Ct(t){return t.__ngSimpleChanges__||null}bt.ngInherit=!0;const St="http://www.w3.org/2000/svg";let Ot=void 0;function Et(t){Ot=t}function xt(t){return!!t.listen}const kt={createRenderer:(t,e)=>void 0!==Ot?Ot:"undefined"!=typeof document?document:void 0};function Tt(t){for(;Array.isArray(t);)t=t[0];return t}function It(t,e){return Tt(e[t])}function At(t,e){return Tt(e[t.index])}function Pt(t,e){return t.data[e]}function Rt(t,e){return t[e]}function jt(t,e){const n=e[t];return st(n)?n:n[0]}function Dt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Nt(t){return 4==(4&t[2])}function Mt(t){return 128==(128&t[2])}function Ft(t,e){return null==e?null:t[e]}function Lt(t){t[18]=0}function Vt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const qt={lFrame:ue(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ut(){return qt.bindingsEnabled}function Bt(){return qt.lFrame.lView}function zt(){return qt.lFrame.tView}function Ht(t){qt.lFrame.contextLView=t}function Kt(){let t=Wt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Wt(){return qt.lFrame.currentTNode}function Gt(t,e){const n=qt.lFrame;n.currentTNode=t,n.isParent=e}function Qt(){return qt.lFrame.isParent}function $t(){qt.lFrame.isParent=!1}function Yt(){return qt.isInCheckNoChangesMode}function Xt(t){qt.isInCheckNoChangesMode=t}function Zt(){const t=qt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Jt(){return qt.lFrame.bindingIndex++}function te(t,e){const n=qt.lFrame;n.bindingIndex=n.bindingRootIndex=t,ee(e)}function ee(t){qt.lFrame.currentDirectiveIndex=t}function ne(t){const e=qt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function re(){return qt.lFrame.currentQueryIndex}function ie(t){qt.lFrame.currentQueryIndex=t}function oe(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function se(t,e,n){if(n&E.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&E.Host||(r=oe(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=qt.lFrame=ce();return r.currentTNode=e,r.lView=t,!0}function ae(t){const e=ce(),n=t[1];qt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ce(){const t=qt.lFrame,e=null===t?null:t.child;return null===e?ue(t):e}function ue(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function le(){const t=qt.lFrame;return qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const he=le;function de(){const t=le();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function fe(){return qt.lFrame.selectedIndex}function pe(t){qt.lFrame.selectedIndex=t}function me(){const t=qt.lFrame;return Pt(t.tView,t.selectedIndex)}function ge(){qt.lFrame.currentNamespace=St}function ye(){qt.lFrame.currentNamespace=null}function be(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function _e(t,e,n){Ce(t,e,3,n)}function ve(t,e,n,r){(3&t[2])===n&&Ce(t,e,n,r)}function we(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Ce(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Se(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Se(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const Oe=-1;class Ee{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function xe(t,e,n){const r=xt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],c=n[i++];r?t.setAttribute(e,a,c,s):e.setAttributeNS(s,a,c)}else{const s=o,a=n[++i];Te(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function ke(t){return 3===t||4===t||6===t}function Te(t){return 64===t.charCodeAt(0)}function Ie(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ae(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ae(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Pe(t){return t!==Oe}function Re(t){return 32767&t}function je(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let De=!0;function Ne(t){const e=De;return De=t,e}let Me=0;function Fe(t,e){const n=Ve(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Le(r.data,t),Le(e,null),Le(r.blueprint,null));const i=qe(t,e),o=t.injectorIndex;if(Pe(i)){const t=Re(i),n=je(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Le(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ve(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function qe(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Oe;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Oe}function Ue(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(K)&&(r=n[K]),null==r&&(r=n[K]=Me++);const i=255&r,o=1<<i,s=64&i,a=32&i,c=e.data;128&i?s?a?c[t+7]|=o:c[t+6]|=o:a?c[t+5]|=o:c[t+4]|=o:s?a?c[t+3]|=o:c[t+2]|=o:a?c[t+1]|=o:c[t]|=o}(t,e,n)}function Be(t,e,n){if(n&E.Optional)return t;gt(e,"NodeInjector")}function ze(t,e,n,r){if(n&E.Optional&&void 0===r&&(r=null),0==(n&(E.Self|E.Host))){const i=t[9],o=k(void 0);try{return i?i.get(e,r,n&E.Optional):T(e,r,n&E.Optional)}finally{k(o)}}return Be(r,e,n)}function He(t,e,n,r=E.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(K)?t[K]:void 0;return"number"==typeof e?e>=0?255&e:We:e}(n);if("function"==typeof o){if(!se(e,t,r))return r&E.Host?Be(i,n,r):ze(e,n,r,i);try{const t=o();if(null!=t||r&E.Optional)return t;gt(n)}finally{he()}}else if("number"==typeof o){let i=null,s=Ve(t,e),a=Oe,c=r&E.Host?e[16][6]:null;for((-1===s||r&E.SkipSelf)&&(a=-1===s?qe(t,e):e[s+8],a!==Oe&&Xe(r,!1)?(i=e[1],s=Re(a),e=je(a,e)):s=-1);-1!==s;){const t=e[1];if(Ye(o,s,t.data)){const t=Ge(s,e,n,i,r,c);if(t!==Ke)return t}a=e[s+8],a!==Oe&&Xe(r,e[1].data[s+8]===c)&&Ye(o,s,e)?(i=t,s=Re(a),e=je(a,e)):s=-1}}}return ze(e,n,r,i)}const Ke={};function We(){return new Ze(Kt(),Bt())}function Ge(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],c=Qe(a,s,n,null==r?ut(a)&&De:r!=s&&0!=(3&a.type),i&E.Host&&o===a);return null!==c?$e(e,s,c,a):Ke}function Qe(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,c=t.directiveStart,u=o>>20,l=i?a+u:t.directiveEnd;for(let h=r?a:a+u;h<l;h++){const t=s[h];if(h<c&&n===t||h>=c&&t.type===n)return h}if(i){const t=s[c];if(t&&ht(t)&&t.type===n)return c}return null}function $e(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Ee){const s=i;s.resolving&&function(t,e){throw new ft("200","Circular dependency in DI detected for "+t)}(mt(o[n]));const a=Ne(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?k(s.injectImpl):null;se(t,r,E.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=_t(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==c&&k(c),Ne(a),s.resolving=!1,he()}}return i}function Ye(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function Xe(t,e){return!(t&E.Self||t&E.Host&&e)}class Ze{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return He(this._tNode,this._lView,t,void 0,e)}}function Je(t){const e=t;if(m(t))return()=>{const t=Je(p(e));return t?t():null};let n=dt(e);if(null===n){const t=v(e);n=t&&t.factory}return n||null}function tn(t){return I(()=>{const e=t.prototype.constructor,n=e[H]||Je(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[H]||Je(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function en(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(ke(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Kt(),t)}const nn="__parameters__";function rn(t,e,n){return I(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(nn)?t[nn]:Object.defineProperty(t,nn,{value:[]})[nn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class on{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=g({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const sn=new on("AnalyzeForEntryComponents"),an=Function;function cn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),cn(r,e)):e!==t&&e.push(r)}return e}function un(t,e){t.forEach(t=>Array.isArray(t)?un(t,e):e(t))}function ln(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function hn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function dn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function fn(t,e,n){let r=mn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function pn(t,e){const n=mn(t,e);if(n>=0)return t[1|n]}function mn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const gn=rn("Inject",t=>({token:t})),yn=rn("Optional"),bn=rn("Self"),_n=rn("SkipSelf"),vn=rn("Host"),wn={},Cn=/\n/gm,Sn="__source",On=c({provide:String,useValue:c});let En=void 0;function xn(t){const e=En;return En=t,e}function kn(t,e=E.Default){if(void 0===En)throw new Error("inject() must be called from an injection context");return null===En?T(t,void 0,e):En.get(t,e&E.Optional?null:void 0,e)}function Tn(t,e=E.Default){return(x||kn)(p(t),e)}const In=Tn;function An(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=E.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof yn||"Optional"===i.ngMetadataName||i===yn?n|=E.Optional:i instanceof _n||"SkipSelf"===i.ngMetadataName||i===_n?n|=E.SkipSelf:i instanceof bn||"Self"===i.ngMetadataName||i===bn?n|=E.Self:i instanceof vn||"Host"===i.ngMetadataName||i===vn?n|=E.Host:t=i instanceof gn||i===gn?i.token:i}e.push(Tn(t,n))}else e.push(Tn(r))}return e}let Pn;function Rn(t){var e;return(null===(e=function(){if(void 0===Pn&&(Pn=null,M.trustedTypes))try{Pn=M.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Pn}())||void 0===e?void 0:e.createHTML(t))||t}class jn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see https://g.co/ng/security#xss)"}}class Dn extends jn{getTypeName(){return"HTML"}}class Nn extends jn{getTypeName(){return"Style"}}class Mn extends jn{getTypeName(){return"Script"}}class Fn extends jn{getTypeName(){return"URL"}}class Ln extends jn{getTypeName(){return"ResourceURL"}}function Vn(t){return t instanceof jn?t.changingThisBreaksApplicationSecurity:t}function qn(t,e){const n=Un(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Un(t){return t instanceof jn&&t.getTypeName()||null}function Bn(t){return new Dn(t)}function zn(t){return new Nn(t)}function Hn(t){return new Mn(t)}function Kn(t){return new Fn(t)}function Wn(t){return new Ln(t)}class Gn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Rn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Qn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Rn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Rn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const $n=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Yn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Xn(t){return(t=String(t)).match($n)||t.match(Yn)?t:"unsafe:"+t}function Zn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Jn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const tr=Zn("area,br,col,hr,img,wbr"),er=Zn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),nr=Zn("rp,rt"),rr=Jn(nr,er),ir=Jn(tr,Jn(er,Zn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Jn(nr,Zn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),rr),or=Zn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),sr=Zn("srcset"),ar=Jn(or,sr,Zn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Zn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),cr=Zn("script,style,template");class ur{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!ir.hasOwnProperty(e))return this.sanitizedSomething=!0,!cr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!ar.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;or[o]&&(s=Xn(s)),sr[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Xn(t.trim())).join(", ")),this.buf.push(" ",e,'="',dr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();ir.hasOwnProperty(e)&&!tr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(dr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const lr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hr=/([^\#-~ |!])/g;function dr(t){return t.replace(/&/g,"&amp;").replace(lr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(hr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let fr;function pr(t,e){let n=null;try{fr=fr||function(t){const e=new Qn(t);return function(){try{return!!(new window.DOMParser).parseFromString(Rn(""),"text/html")}catch(t){return!1}}()?new Gn(e):e}(t);let r=e?String(e):"";n=fr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=fr.getInertBodyElement(r)}while(r!==o);return(new ur).sanitizeChildren(mr(n)||n)}finally{if(n){const t=mr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function mr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var gr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function yr(t){const e=function(){const t=Bt();return t&&t[12]}();return e?e.sanitize(gr.URL,t)||"":qn(t,"URL")?Vn(t):Xn(pt(t))}function br(t){return t.ngDebugContext}function _r(t){return t.ngOriginalError}function vr(t,...e){t.error(...e)}class wr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||vr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?br(t)?br(t):this._findContext(_r(t)):null}_findOriginalError(t){let e=_r(t);for(;e&&_r(e);)e=_r(e);return e}}function Cr(t,e){t.__ngContext__=e}const Sr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(M))();function Or(t){return{name:"window",target:t.ownerDocument.defaultView}}function Er(t){return{name:"body",target:t.ownerDocument.body}}function xr(t){return t instanceof Function?t():t}var kr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Tr(t,e){return(void 0)(t,e)}function Ir(t){const e=t[3];return at(e)?e[3]:e}function Ar(t){return Rr(t[13])}function Pr(t){return Rr(t[4])}function Rr(t){for(;null!==t&&!at(t);)t=t[4];return t}function jr(t,e,n,r,i){if(null!=r){let o,s=!1;at(r)?o=r:st(r)&&(s=!0,r=r[0]);const a=Tt(r);0===t&&null!==n?null==i?Ur(e,n,a):qr(e,n,a,i||null,!0):1===t&&null!==n?qr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=zr(t,e);r&&function(t,e,n,r){xt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Tt(n)&&jr(e,t,r,o,i);for(let s=ot;s<n.length;s++){const i=n[s];Yr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Dr(t,e,n){return xt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Nr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Vt(i,-1)),n.splice(r,1)}function Mr(t,e){if(t.length<=ot)return;const n=ot+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Nr(o,r),e>0&&(t[n-1][4]=r[4]);const s=hn(t,ot+e);Yr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Fr(t,e){if(!(256&e[2])){const n=e[11];xt(n)&&n.destroyNode&&Yr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Lr(t[1],t);for(;e;){let n=null;if(st(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)st(e)&&Lr(e[1],e),e=e[3];null===e&&(e=t),st(e)&&Lr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Lr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Ee)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):Tt(e[t]),a=r[i=n[o+2]],c=n[o+3];"boolean"==typeof c?s.removeEventListener(n[o],a,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&xt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&at(e[3])){n!==e[3]&&Nr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Vr(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===P.None||e===P.Emulated)return null}return At(r,n)}(t,e.parent,n)}function qr(t,e,n,r,i){xt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Ur(t,e,n){xt(t)?t.appendChild(e,n):e.appendChild(n)}function Br(t,e,n,r,i){null!==r?qr(t,e,n,r,i):Ur(t,e,n)}function zr(t,e){return xt(t)?t.parentNode(e):e.parentNode}function Hr(t,e,n){return Kr(t,e,n)}let Kr=function(t,e,n){return 40&t.type?At(t,n):null};function Wr(t,e,n,r){const i=Vr(t,r,e),o=e[11],s=Hr(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Br(o,i,n[a],s,!1);else Br(o,i,n,s,!1)}function Gr(t,e){if(null!==e){const n=e.type;if(3&n)return At(e,t);if(4&n)return Qr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Gr(t,n);{const n=t[e.index];return at(n)?Qr(-1,n):Tt(n)}}if(32&n)return Tr(e,t)()||Tt(t[e.index]);{const n=t[16],r=n[6],i=Ir(n),o=r.projection[e.projection];return null!=o?Gr(i,o):Gr(t,e.next)}}return null}function Qr(t,e){const n=ot+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Gr(t,r)}return e[7]}function $r(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],c=n.type;if(s&&0===e&&(a&&Cr(Tt(a),r),n.flags|=4),64!=(64&n.flags))if(8&c)$r(t,e,n.child,r,i,o,!1),jr(e,t,i,a,o);else if(32&c){const s=Tr(n,r);let c;for(;c=s();)jr(e,t,i,c,o);jr(e,t,i,a,o)}else 16&c?Xr(t,e,r,n,i,o):jr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Yr(t,e,n,r,i,o){$r(n,r,t.firstChild,e,i,o,!1)}function Xr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let c=0;c<a.length;c++)jr(e,t,i,a[c],o);else $r(t,e,a,s[3],i,o,!0)}function Zr(t,e,n){xt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Jr(t,e,n){xt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function ti(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const ei="ng-template";function ni(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==ti(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function ri(t){return 4===t.type&&t.value!==ei}function ii(t,e,n){return e===(4!==t.type||n?t.value:ei)}function oi(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(ke(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!ii(t,c,n)||""===c&&1===e.length){if(si(r))return!1;s=!0}}else{const u=8&r?c:e[++a];if(8&r&&null!==t.attrs){if(!ni(t.attrs,u,n)){if(si(r))return!1;s=!0}continue}const l=ai(8&r?"class":c,i,ri(t),n);if(-1===l){if(si(r))return!1;s=!0;continue}if(""!==u){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==ti(e,u,0)||2&r&&u!==t){if(si(r))return!1;s=!0}}}}else{if(!s&&!si(r)&&!si(c))return!1;if(s&&si(c))continue;s=!1,r=c|1&r}}return si(r)||s}function si(t){return 0==(1&t)}function ai(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ci(t,e,n=!1){for(let r=0;r<e.length;r++)if(oi(t,e[r],n))return!0;return!1}function ui(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function li(t,e){return t?":not("+e.trim()+")":e}function hi(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||si(s)||(e+=li(o,i),i=""),r=s,o=o||!si(r);n++}return""!==i&&(e+=li(o,i)),e}const di={};function fi(t){pi(zt(),Bt(),fe()+t,Yt())}function pi(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&_e(e,r,n)}else{const r=t.preOrderHooks;null!==r&&ve(e,r,0,n)}pe(n)}function mi(t,e){return t<<17|e<<2}function gi(t){return t>>17&32767}function yi(t){return 2|t}function bi(t){return(131068&t)>>2}function _i(t,e){return-131069&t|e<<2}function vi(t){return 1|t}function wi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ie(i),n.contentQueries(2,e[o],o)}}}function Ci(t,e,n,r,i,o,s,a,c,u){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Lt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=c||t&&t[12]||null,l[9]=u||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Si(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Wt(),s=Qt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),qt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=qt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Gt(o,!0),o}function Oi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Ei(t,e,n){ae(e);try{const r=t.viewQuery;null!==r&&eo(1,r,n);const i=t.template;null!==i&&Ti(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&wi(t,e),t.staticViewQueries&&eo(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Yi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,de()}}function xi(t,e,n,r){const i=e[2];if(256==(256&i))return;ae(e);const o=Yt();try{Lt(e),qt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Ti(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&_e(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ve(e,n,0,null),we(e,0)}if(function(t){for(let e=Ar(t);null!==e;e=Pr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Vt(r,1),n[2]|=1024}}}(e),function(t){for(let e=Ar(t);null!==e;e=Pr(e))for(let t=ot;t<e.length;t++){const n=e[t],r=n[1];Mt(n)&&xi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&wi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&_e(e,n)}else{const n=t.contentHooks;null!==n&&ve(e,n,1),we(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)pe(~r);else{const i=r,o=n[++t],s=n[++t];te(o,i),s(2,e[i])}}}finally{pe(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Qi(t,e[n])}(e,a);const c=t.viewQuery;if(null!==c&&eo(2,c,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&_e(e,n)}else{const n=t.viewHooks;null!==n&&ve(e,n,2),we(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Vt(e[3],-1))}finally{de()}}function ki(t,e,n,r){const i=e[10],o=!Yt(),s=Nt(e);try{o&&!s&&i.begin&&i.begin(),s&&Ei(t,e,r),xi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Ti(t,e,n,r,i){const o=fe();try{pe(-1),2&r&&e.length>it&&pi(t,e,it,Yt()),n(r,i)}finally{pe(o)}}function Ii(t,e,n){if(ct(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Ai(t,e,n){Ut()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Fe(n,e),Cr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=ht(r);o&&Hi(e,n,r);const c=$e(e,t,a,n);Cr(c,e),null!==s&&Ki(0,a-i,c,r,0,s),o&&(jt(n.index,e)[8]=c)}}(t,e,n,At(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=qt.lFrame.currentDirectiveIndex;try{pe(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ee(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Vi(r,i)}}finally{pe(-1),ee(s)}}(t,e,n))}function Pi(t,e,n=At){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Ri(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ji(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function ji(t,e,n,r,i,o,s,a,c,u){const l=it+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:di);return n}(l,h),f="function"==typeof u?u():u;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:f,incompleteFirstPass:!1}}function Di(t,e,n,r){const i=ro(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&io(t).push(r,i.length-1))}function Ni(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Mi(t,e,n,r,i,o,s,a){const c=At(e,n);let u,l=e.inputs;var h;!a&&null!=l&&(u=l[r])?(ao(t,n,u,r,i),ut(e)&&function(t,e){const n=jt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,xt(o)?o.setProperty(c,r,i):Te(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function Fi(t,e,n,r){let i=!1;if(Ut()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];ci(n,s.selectors,!1)&&(i||(i=[]),Ue(Fe(n,e),t,s.type),ht(s)?(qi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Bi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,c=Oi(t,e,o.length,null);for(let i=0;i<o.length;i++){const u=o[i];n.mergedAttrs=Ie(n.mergedAttrs,u.hostAttrs),zi(t,n,e,c,u),Ui(c,u,s),null!==u.contentQueries&&(n.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(n.flags|=128);const l=u.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),c++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let c=e.directiveStart;c<n;c++){const t=r[c],n=t.inputs,u=null===i||ri(e)?null:Wi(n,i);o.push(u),s=Ni(n,c,s),a=Ni(t.outputs,c,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new ft("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Ie(n.mergedAttrs,n.attrs),i}function Li(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Vi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function qi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ui(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ht(e)&&(n[""]=t)}}function Bi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function zi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=dt(i.type)),s=new Ee(o,ht(i),null);t.blueprint[r]=s,n[r]=s,Li(t,e,0,r,Oi(t,n,i.hostVars,di),i)}function Hi(t,e,n){const r=At(e,t),i=Ri(n),o=t[10],s=Xi(t,Ci(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Ki(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Wi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Gi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Qi(t,e){const n=jt(e,t);if(Mt(n)){const t=n[1];80&n[2]?xi(t,n,t.template,n[8]):n[5]>0&&$i(n)}}function $i(t){for(let n=Ar(t);null!==n;n=Pr(n))for(let t=ot;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];xi(t,e,t.template,e[8])}else e[5]>0&&$i(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=jt(e[n],t);Mt(r)&&r[5]>0&&$i(r)}}function Yi(t,e){const n=jt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Ei(r,n,n[8])}function Xi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Zi(t){for(;t;){t[2]|=64;const e=Ir(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Ji(t,e,n){const r=e[10];r.begin&&r.begin();try{xi(t,e,t.template,n)}catch(i){throw so(e,i),i}finally{r.end&&r.end()}}function to(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Dt(n),i=r[1];ki(i,r,i.template,n)}}(t[8])}function eo(t,e,n){ie(0),e(t,n)}const no=(()=>Promise.resolve(null))();function ro(t){return t[7]||(t[7]=[])}function io(t){return t.cleanup||(t.cleanup=[])}function oo(t,e,n){return(null===t||ht(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}function so(t,e){const n=t[9],r=n?n.get(wr,null):null;r&&r.handleError(e)}function ao(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],c=e[s],u=t.data[s];null!==u.setInput?u.setInput(c,i,r,a):c[a]=i}}function co(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const uo=new on("INJECTOR",-1);class lo{get(t,e=wn){if(e===wn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const ho=new on("Set Injector scope."),fo={},po={},mo=[];let go=void 0;function yo(){return void 0===go&&(go=new lo),go}function bo(t,e=null,n=null,r){return new _o(t,n,e||yo(),r)}class _o{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&un(e,n=>this.processProvider(n,t,e)),un([t],t=>this.processInjectorType(t,[],i)),this.records.set(uo,Co(void 0,this));const o=this.records.get(ho);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=wn,n=E.Default){this.assertNotDestroyed();const r=xn(this);try{if(!(n&E.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof on)&&b(t);e=n&&this.injectableDefInScope(n)?Co(vo(t),fo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&E.Self?yo():this.parent).get(t,e=n&E.Optional&&e===wn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[Sn]&&i.unshift(e[Sn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Cn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{xn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=v(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=v(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{un(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];un(r,t=>this.processProvider(t,n,r||mo))}}this.injectorDefTypes.add(o),this.records.set(o,Co(r.factory,fo));const a=r.providers;if(null!=a&&!s){const e=t;un(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Oo(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return So(t)?Co(void 0,t.useValue):Co(wo(t),fo)}(t);if(Oo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Co(void 0,fo,!0),e.factory=()=>An(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===fo&&(e.value=po,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function vo(t){const e=b(t),n=null!==e?e.factory:dt(t);if(null!==n)return n;const r=v(t);if(null!==r)return r.factory;if(t instanceof on)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=dn(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[w]||t[S]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function wo(t,e,n){let r=void 0;if(Oo(t)){const e=p(t);return dt(e)||vo(e)}if(So(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...An(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Tn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return dt(e)||vo(e);r=()=>new e(...An(t.deps))}var i;return r}function Co(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function So(t){return null!==t&&"object"==typeof t&&On in t}function Oo(t){return"function"==typeof t}const Eo=function(t,e,n){return function(t,e=null,n=null,r){const i=bo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let xo=(()=>{class t{static create(t,e){return Array.isArray(t)?Eo(t,e,""):Eo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=wn,t.NULL=new lo,t.\u0275prov=g({token:t,providedIn:"any",factory:()=>Tn(uo)}),t.__NG_ELEMENT_ID__=-1,t})();function ko(t,e){be(Dt(t)[1],Kt())}function To(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(ht(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Io(t.inputs),e.declaredInputs=Io(t.declaredInputs),e.outputs=Io(t.outputs);const n=i.hostBindings;n&&Ro(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&Ao(t,o),s&&Po(t,s),u(t.inputs,i.inputs),u(t.declaredInputs,i.declaredInputs),u(t.outputs,i.outputs),ht(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===To&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ie(i.hostAttrs,n=Ie(n,i.hostAttrs))}}(r)}function Io(t){return t===F?{}:t===L?[]:t}function Ao(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Po(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Ro(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let jo=null;function Do(){if(!jo){const t=M.Symbol;if(t&&t.iterator)jo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(jo=n)}}}return jo}class No{constructor(t){this.wrapped=t}static wrap(t){return new No(t)}static unwrap(t){return No.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof No}}function Mo(t){return!!Fo(t)&&(Array.isArray(t)||!(t instanceof Map)&&Do()in t)}function Fo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Lo(t,e,n){return t[e]=n}function Vo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function qo(t,e,n,r){const i=Bt();return Vo(i,Jt(),e)&&(zt(),function(t,e,n,r,i,o){const s=At(t,e);!function(t,e,n,r,i,o,s){if(null==o)xt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?pt(o):s(o,r||"",i);xt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(me(),i,t,e,n,r)),qo}function Uo(t,e,n,r,i,o,s,a){const c=Bt(),u=zt(),l=t+it,h=u.firstCreatePass?function(t,e,n,r,i,o,s,a,c){const u=e.consts,l=Si(e,t,4,s||null,Ft(u,a));Fi(e,n,l,Ft(u,c)),be(e,l);const h=l.tViews=ji(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,u,c,e,n,r,i,o,s):u.data[l];Gt(h,!1);const d=c[11].createComment("");Wr(u,c,d,h),Cr(d,c),Xi(c,c[l]=Gi(d,c,d,h)),lt(h)&&Ai(u,c,h),null!=s&&Pi(c,h,a)}function Bo(t){return Rt(qt.lFrame.contextLView,it+t)}function zo(t,e=E.Default){const n=Bt();return null===n?Tn(t,e):He(Kt(),n,p(t),e)}function Ho(t,e,n){const r=Bt();return Vo(r,Jt(),e)&&Mi(zt(),me(),r,t,e,r[11],n,!1),Ho}function Ko(t,e,n,r,i){const o=i?"class":"style";ao(t,n,e.inputs[o],o,r)}function Wo(t,e,n,r){const i=Bt(),o=zt(),s=it+t,a=i[11],c=i[s]=Dr(a,e,qt.lFrame.currentNamespace),u=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,c=Si(e,t,2,i,Ft(a,o));return Fi(e,n,c,Ft(a,s)),null!==c.attrs&&co(c,c.attrs,!1),null!==c.mergedAttrs&&co(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,i,0,e,n,r):o.data[s];Gt(u,!0);const l=u.mergedAttrs;null!==l&&xe(a,c,l);const h=u.classes;null!==h&&Jr(a,c,h);const d=u.styles;null!==d&&Zr(a,c,d),64!=(64&u.flags)&&Wr(o,i,c,u),0===qt.lFrame.elementDepthCount&&Cr(c,i),qt.lFrame.elementDepthCount++,lt(u)&&(Ai(o,i,u),Ii(o,u,i)),null!==r&&Pi(i,u)}function Go(){let t=Kt();Qt()?$t():(t=t.parent,Gt(t,!1));const e=t;qt.lFrame.elementDepthCount--;const n=zt();n.firstCreatePass&&(be(n,t),ct(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Ko(n,e,Bt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Ko(n,e,Bt(),e.stylesWithoutHost,!1)}function Qo(t,e,n,r){Wo(t,e,n,r),Go()}function $o(t,e,n){const r=Bt(),i=zt(),o=t+it,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Ft(o,r),a=Si(e,t,8,"ng-container",s);return null!==s&&co(a,s,!0),Fi(e,n,a,Ft(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];Gt(s,!0);const a=r[o]=r[11].createComment("");Wr(i,r,a,s),Cr(a,r),lt(s)&&(Ai(i,r,s),Ii(i,s,r)),null!=n&&Pi(r,s)}function Yo(){let t=Kt();const e=zt();Qt()?$t():(t=t.parent,Gt(t,!1)),e.firstCreatePass&&(be(e,t),ct(t)&&e.queries.elementEnd(t))}function Xo(){return Bt()}function Zo(t){return!!t&&"function"==typeof t.then}function Jo(t){return!!t&&"function"==typeof t.subscribe}function ts(t,e,n=!1,r){const i=Bt(),o=zt(),s=Kt();return ns(o,i,i[11],s,t,e,n,r),ts}function es(t,e,n=!1,r){const i=Kt(),o=Bt(),s=zt();return ns(s,o,oo(ne(s.data),i,o),i,t,e,n,r),es}function ns(t,e,n,r,i,o,s=!1,a){const c=lt(r),u=t.firstCreatePass&&io(t),l=ro(e);let h=!0;if(3&r.type){const d=At(r,e),f=a?a(d):F,p=f.target||d,m=l.length,g=a?t=>a(Tt(t[r.index])).target:r.index;if(xt(n)){let s=null;if(!a&&c&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=is(r,e,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),u&&u.push(i,g,m,m+1)}}else o=is(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),u&&u.push(i,g,m,s)}else o=is(r,e,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),u&&u.push(i,r.index,s,-(s+1))}}}function rs(t,e,n){try{return!1!==e(n)}catch(r){return so(t,r),!1}}function is(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?jt(t.index,e):e;0==(32&e[2])&&Zi(s);let a=rs(e,n,o),c=i.__ngNextListenerFn__;for(;c;)a=rs(e,c,o)&&a,c=c.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function os(t=1){return function(t){return(qt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,qt.lFrame.contextLView))[8]}(t)}function ss(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?ci(t,o,!0):ui(r,o))return i}else n=i}return n}function as(t){const e=Bt()[16][6];if(!e.projection){const n=e.projection=dn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?ss(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function cs(t,e=0,n){const r=Bt(),i=zt(),o=Si(i,it+t,16,null,n||null);null===o.projection&&(o.projection=e),$t(),64!=(64&o.flags)&&function(t,e,n){Xr(e[11],0,e,n,Vr(t,n,e),Hr(n.parent||e[6],n,e))}(i,r,o)}const us=[];function ls(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?gi(o):bi(o),c=!1;for(;0!==a&&(!1===c||s);){const n=t[a+1];hs(t[a],e)&&(c=!0,t[a+1]=r?vi(n):yi(n)),a=r?gi(n):bi(n)}c&&(t[n+1]=r?yi(o):vi(o))}function hs(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&mn(t,e)>=0}function ds(t,e,n){return ps(t,e,n,!1),ds}function fs(t,e){return ps(t,e,null,!0),fs}function ps(t,e,n,r){const i=Bt(),o=zt(),s=function(t){const e=qt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[fe()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(t.flags&(e?16:32))})(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=ne(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=gs(n=ms(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=ms(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==bi(r))return t[gi(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=ms(null,t,e,n[1],r),n=gs(n,e.attrs,r),function(t,e,n,r){t[gi(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=gs(r,t[o].hostAttrs,n);return gs(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=gi(s),c=bi(s);t[r]=n;let u,l=!1;if(Array.isArray(n)){const t=n;u=t[1],(null===u||mn(t,u)>0)&&(l=!0)}else u=n;if(i)if(0!==c){const e=gi(t[a+1]);t[r+1]=mi(e,a),0!==e&&(t[e+1]=_i(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=mi(a,0),0!==a&&(t[a+1]=_i(t[a+1],r)),a=r;else t[r+1]=mi(c,0),0===a?a=r:t[c+1]=_i(t[c+1],r),c=r;l&&(t[r+1]=yi(t[r+1])),ls(t,u,r,!0),ls(t,u,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&mn(o,e)>=0&&(n[r+1]=vi(n[r+1]))}(e,u,t,r,o),s=mi(a,c),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==di&&Vo(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const c=t.data,u=c[a+1];bs(1==(1&u)?ys(c,e,n,i,bi(u),s):void 0)||(bs(o)||function(t){return 2==(2&t)}(u)&&(o=ys(c,null,n,i,a,s)),function(t,e,n,r,i){const o=xt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:kr.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=kr.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,It(fe(),n),i,o))}(o,o.data[fe()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=l(Vn(t)))),t}(e,n),r,s)}function ms(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=gs(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function gs(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),fn(t,s,!!n||e[++o]))}return void 0===t?null:t}function ys(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),c=o?e[1]:e,u=null===c;let l=n[i+1];l===di&&(l=u?us:void 0);let h=u?pn(l,r):c===r?l:void 0;if(o&&!bs(h)&&(h=pn(e,r)),bs(h)&&(a=h,s))return a;const d=t[i+1];i=s?gi(d):bi(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=pn(t,r))}return a}function bs(t){return void 0!==t}function _s(t,e=""){const n=Bt(),r=zt(),i=t+it,o=r.firstCreatePass?Si(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return xt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Wr(r,n,s,o),Gt(o,!1)}function vs(t){return ws("",t,""),vs}function ws(t,e,n){const r=Bt(),i=function(t,e,n,r){return Vo(t,Jt(),n)?e+pt(n)+r:di}(r,t,e,n);return i!==di&&function(t,e,n){const r=It(e,t);!function(t,e,n){xt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,fe(),i),ws}function Cs(t,e,n){const r=Bt();return Vo(r,Jt(),e)&&Mi(zt(),me(),r,t,e,r[11],n,!0),Cs}function Ss(t,e,n){const r=Bt();if(Vo(r,Jt(),e)){const i=zt(),o=me();Mi(i,o,r,t,e,oo(ne(i.data),o,r),n,!0)}return Ss}const Os=void 0;var Es=["en",[["a","p"],["AM","PM"],Os],[["AM","PM"],Os,Os],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Os,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Os,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Os,"{1} 'at' {0}",Os],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let xs={};function ks(t,e,n){"string"!=typeof e&&(n=e,e=t[Rs.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),xs[e]=t,n&&(xs[e][Rs.ExtraData]=n)}function Ts(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Ps(e);if(n)return n;const r=e.split("-")[0];if(n=Ps(r),n)return n;if("en"===r)return Es;throw new Error(`Missing locale data for the locale "${t}".`)}function Is(t){return Ts(t)[Rs.CurrencyCode]||null}function As(t){return Ts(t)[Rs.PluralCase]}function Ps(t){return t in xs||(xs[t]=M.ng&&M.ng.common&&M.ng.common.locales&&M.ng.common.locales[t]),xs[t]}var Rs=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const js="en-US";let Ds=js;function Ns(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Ds=t.toLowerCase().replace(/_/g,"-"))}function Ms(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)Ms(t[o],e,n,r,i);else{const o=zt(),s=Bt();let a=Oo(t)?t:p(t.provide),c=wo(t);const u=Kt(),l=1048575&u.providerIndexes,h=u.directiveStart,d=u.providerIndexes>>20;if(Oo(t)||!t.multi){const r=new Ee(c,i,zo),f=Vs(a,e,i?l:l+d,h);-1===f?(Ue(Fe(u,s),o,a),Fs(o,t,e.length),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=Vs(a,e,l+d,h),p=Vs(a,e,l,l+d),m=f>=0&&n[f],g=p>=0&&n[p];if(i&&!g||!i&&!m){Ue(Fe(u,s),o,a);const l=function(t,e,n,r,i){const o=new Ee(t,n,zo);return o.multi=[],o.index=e,o.componentProviders=0,Ls(o,i,r&&!n),o}(i?Us:qs,n.length,i,r,c);!i&&g&&(n[p].providerFactory=l),Fs(o,t,e.length,0),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(l),s.push(l)}else Fs(o,t,f>-1?f:p,Ls(n[i?p:f],c,!i&&r));!i&&r&&g&&n[p].componentProviders++}}}function Fs(t,e,n,r){const i=Oo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function Ls(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Vs(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function qs(t,e,n,r){return Bs(this.multi,[])}function Us(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=$e(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),Bs(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Bs(i,o);return o}function Bs(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function zs(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=zt();if(r.firstCreatePass){const i=ht(t);Ms(n,r.data,r.blueprint,i,!0),Ms(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Hs{}class Ks{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Ws=(()=>{class t{}return t.NULL=new Ks,t})();function Gs(...t){}function Qs(t,e){return new Ys(At(t,e))}const $s=function(){return Qs(Kt(),Bt())};let Ys=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=$s,t})();class Xs{}let Zs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Js(),t})();const Js=function(){const t=Bt(),e=jt(Kt().index,t);return function(t){return t[11]}(st(e)?e:t)};let ta=(()=>{class t{}return t.\u0275prov=g({token:t,providedIn:"root",factory:()=>null}),t})();class ea{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const na=new ea("11.0.9");class ra{constructor(){}supports(t){return Mo(t)}create(t){return new oa(t)}}const ia=(t,e)=>e;class oa{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ia}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<ua(n,r,i)?e:n,s=ua(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Mo(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Do()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new sa(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ca),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ca),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class sa{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class aa{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class ca{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new aa,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ua(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class la{constructor(){}supports(t){return t instanceof Map||Fo(t)}create(){return new ha}}class ha{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Fo(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new da(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class da{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let fa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new _n,new yn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=g({token:t,providedIn:"root",factory:()=>new t([new ra])}),t})(),pa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new _n,new yn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=g({token:t,providedIn:"root",factory:()=>new t([new la])}),t})();function ma(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Tt(o)),at(o))for(let t=ot;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&ma(e[1],e,n,r)}const s=n.type;if(8&s)ma(t,e,n.child,r);else if(32&s){const t=Tr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=e[16],i=t[6].projection[n.projection];if(Array.isArray(i))r.push(...i);else{const e=Ir(t);ma(e[1],e,i,r,!0)}}n=i?n.projectionNext:n.next}return r}class ga{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return ma(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(at(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Mr(t,n),hn(e,n))}this._attachedToViewContainer=!1}Fr(this._lView[1],this._lView)}onDestroy(t){Di(this._lView[1],this._lView,null,t)}markForCheck(){Zi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ji(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Xt(!0);try{Ji(t,e,n)}finally{Xt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Yr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class ya extends ga{constructor(t){super(t),this._view=t}detectChanges(){to(this._view)}checkNoChanges(){!function(t){Xt(!0);try{to(t)}finally{Xt(!1)}}(this._view)}get context(){return null}}const ba=va;let _a=(()=>{class t{}return t.__NG_ELEMENT_ID__=ba,t.__ChangeDetectorRef__=!0,t})();function va(t=!1){return function(t,e,n){if(!n&&ut(t)){const n=jt(t.index,e);return new ga(n,n)}return 47&t.type?new ga(e[16],e):null}(Kt(),Bt(),t)}const wa=[new la],Ca=new fa([new ra]),Sa=new pa(wa),Oa=function(){return Ta(Kt(),Bt())};let Ea=(()=>{class t{}return t.__NG_ELEMENT_ID__=Oa,t})();const xa=Ea,ka=class extends xa{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Ci(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Ei(e,n,t),new ga(n)}};function Ta(t,e){return 4&t.type?new ka(e,t,Qs(t,e)):null}class Ia{}class Aa{}const Pa=function(){return Fa(Kt(),Bt())};let Ra=(()=>{class t{}return t.__NG_ELEMENT_ID__=Pa,t})();const ja=Ra,Da=class extends ja{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Qs(this._hostTNode,this._hostLView)}get injector(){return new Ze(this._hostTNode,this._hostLView)}get parentInjector(){const t=qe(this._hostTNode,this._hostLView);if(Pe(t)){const e=je(t,this._hostLView),n=Re(t);return new Ze(e[1].data[n+8],e)}return new Ze(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Na(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ot}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Ia,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(at(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Da(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ot+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ot?(e[4]=n[i],ln(n,ot+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Qr(i,o),a=n[11],c=zr(a,o[7]);return null!==c&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Yr(t,r,n,1,i,o)}(r,o[6],a,n,c,s),t.attachToViewContainerRef(),ln(Ma(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Na(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Mr(this._lContainer,e);n&&(hn(Ma(this._lContainer),e),Fr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Mr(this._lContainer,e);return n&&null!=hn(Ma(this._lContainer),e)?new ga(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Na(t){return t[8]}function Ma(t){return t[8]||(t[8]=[])}function Fa(t,e){let n;const r=e[t.index];if(at(r))n=r;else{let i;if(8&t.type)i=Tt(r);else{const n=e[11];i=n.createComment("");const r=At(t,e);qr(n,zr(n,r),i,function(t,e){return xt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Gi(r,e,i,t),Xi(e,n)}return new Da(n,t,e)}const La={};class Va extends Ws{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=nt(t);return new Ba(e,this.ngModule)}}function qa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ua=new on("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Sr});class Ba extends Hs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(hi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return qa(this.componentDef.inputs)}get outputs(){return qa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,La,i);return o!==La||r===La?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Xs,kt),s=i.get(ta,null),a=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=n?function(t,e,n){if(xt(t))return t.selectRootElement(e,n===P.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Dr(o.createRenderer(null,this.componentDef),c,function(t){const e=t.toLowerCase();return"svg"===e?St:"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Sr,clean:no,playerHandler:null,flags:0},d=ji(0,null,null,1,0,null,null,null,null,null),f=Ci(null,d,h,l,null,null,o,a,s,i);let p,m;ae(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Si(s,20,2,"#host",null),c=a.mergedAttrs=e.hostAttrs;null!==c&&(co(a,c,!0),null!==t&&(xe(i,t,c),null!==a.classes&&Jr(i,t,a.classes),null!==a.styles&&Zr(i,t,a.styles)));const u=r.createRenderer(t,e),l=Ci(n,Ri(e),null,e.onPush?64:16,n[20],a,r,u,null,null);return s.firstCreatePass&&(Ue(Fe(a,n),s,e.type),qi(s,a),Bi(a,n.length,1)),Xi(n,l),n[20]=l}(u,this.componentDef,f,o,a);if(u)if(n)xe(a,u,["ng-version",na.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!si(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&xe(a,u,t),e&&e.length>0&&Jr(a,u,e.join(" "))}if(m=Pt(d,it),void 0!==e){const t=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Kt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),zi(t,r,e,Oi(t,e,1,null),n));const i=$e(e,t,r.directiveStart,r);Cr(i,e);const o=At(r,e);return o&&Cr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Kt();e.contentQueries(1,s,t.directiveStart)}const a=Kt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(pe(a.index),Li(n[1],a,0,a.directiveStart,a.directiveEnd,e),Vi(e,s)),s}(t,this.componentDef,f,h,[ko]),Ei(d,f,null)}finally{de()}return new za(this.componentType,p,Qs(m,f),f,m)}}class za extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new ya(r),this.componentType=t}get injector(){return new Ze(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ha=new Map;class Ka extends Ia{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Va(this);const n=rt(t),r=t[z]||null;r&&Ns(r),this._bootstrapComponents=xr(n.bootstrap),this._r3Injector=bo(t,e,[{provide:Ia,useValue:this},{provide:Ws,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=xo.THROW_IF_NOT_FOUND,n=E.Default){return t===xo||t===Ia||t===uo?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Wa extends Aa{constructor(t){super(),this.moduleType=t,null!==rt(t)&&function(t){const e=new Set;!function t(n){const r=rt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,Ha.get(i),n),Ha.set(i,n));const o=xr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Ka(this.moduleType,t)}}function Ga(t,e,n){const r=Zt()+t,i=Bt();return i[r]===di?Lo(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function Qa(t,e){const n=t[e];return n===di?void 0:n}function $a(t,e){const n=zt();let r;const i=t+it;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new ft("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=dt(r.type)),s=k(zo);try{const t=Ne(!1),e=o();return Ne(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Bt(),i,e),e}finally{k(s)}}function Ya(t,e,n){const r=t+it,i=Bt(),o=Rt(i,r);return Ja(i,Za(i,r)?function(t,e,n,r,i,o){const s=e+n;return Vo(t,s,i)?Lo(t,s+1,o?r.call(o,i):r(i)):Qa(t,s+1)}(i,Zt(),e,o.transform,n,o):o.transform(n))}function Xa(t,e,n,r){const i=t+it,o=Bt(),s=Rt(o,i);return Ja(o,Za(o,i)?function(t,e,n,r,i,o,s){const a=e+n;return function(t,e,n,r){const i=Vo(t,e,n);return Vo(t,e+1,r)||i}(t,a,i,o)?Lo(t,a+2,s?r.call(s,i,o):r(i,o)):Qa(t,a+2)}(o,Zt(),e,s.transform,n,r,s):s.transform(n,r))}function Za(t,e){return t[1].data[e].pure}function Ja(t,e){return No.isWrapped(e)&&(e=No.unwrap(e),t[qt.lFrame.bindingIndex]=di),e}const tc=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function ec(){return this._results[Do()]()}class nc{constructor(){this.dirty=!0,this._results=[],this.changes=new tc,this.length=0;const t=Do(),e=nc.prototype;e[t]||(e[t]=ec)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=cn(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class rc{constructor(t){this.queryList=t,this.matches=null}clone(){return new rc(this.queryList)}setDirty(){this.queryList.setDirty()}}class ic{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new ic(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Cc(t,e).matches&&this.queries[e].setDirty()}}class oc{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class sc{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new sc(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class ac{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new ac(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,cc(e,i)),this.matchTNodeWithReadOption(t,e,Qe(e,t,i,!1,!1))}else n===Ea?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Qe(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Ys||r===Ra||r===Ea&&4&e.type)this.addMatch(e.index,-2);else{const n=Qe(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function cc(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function uc(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Qs(t,e):4&t.type?Ta(t,e):null}(e,t):-2===n?function(t,e,n){return n===Ys?Qs(e,t):n===Ea?Ta(e,t):n===Ra?Fa(e,t):void 0}(t,e,r):$e(t,t[1],n,e)}function lc(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:uc(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function hc(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=lc(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ot;t<s.length;t++){const e=s[t];e[17]===e[3]&&hc(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];hc(n[1],n,i,r)}}}}}return r}function dc(t){const e=Bt(),n=zt(),r=re();ie(r+1);const i=Cc(n,r);if(t.dirty&&Nt(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?hc(n,e,r,[]):lc(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function fc(t,e,n){mc(zt(),Bt(),t,e,n,!0)}function pc(t,e,n){mc(zt(),Bt(),t,e,n,!1)}function mc(t,e,n,r,i,o){t.firstCreatePass&&(wc(t,new oc(n,r,o,i),-1),o&&(t.staticViewQueries=!0)),vc(t,e)}function gc(t,e,n,r){bc(zt(),Bt(),e,n,r,!1,Kt(),t)}function yc(t,e,n,r){bc(zt(),Bt(),e,n,r,!0,Kt(),t)}function bc(t,e,n,r,i,o,s,a){t.firstCreatePass&&(wc(t,new oc(n,r,o,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a),o&&(t.staticContentQueries=!0)),vc(t,e)}function _c(){return t=Bt(),e=re(),t[19].queries[e].queryList;var t,e}function vc(t,e){const n=new nc;Di(t,e,n,n.destroy),null===e[19]&&(e[19]=new ic),e[19].queries.push(new rc(n))}function wc(t,e,n){null===t.queries&&(t.queries=new sc),t.queries.track(new ac(e,n))}function Cc(t,e){return t.queries.getByIndex(e)}function Sc(t=E.Default){const e=va(!0);if(null!=e||t&E.Optional)return e;gt("ChangeDetectorRef")}const Oc=new on("Application Initializer");let Ec=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Gs,this.reject=Gs,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Zo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Tn(Oc,8))},t.\u0275prov=g({token:t,factory:t.\u0275fac}),t})();const xc=new on("AppId"),kc={provide:xc,useFactory:function(){return`${Tc()}${Tc()}${Tc()}`},deps:[]};function Tc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ic=new on("Platform Initializer"),Ac=new on("Platform ID"),Pc=new on("appBootstrapListener");let Rc=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=g({token:t,factory:t.\u0275fac}),t})();const jc=new on("LocaleId"),Dc=new on("DefaultCurrencyCode");class Nc{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Mc=function(t){return new Wa(t)},Fc=Mc,Lc=function(t){return Promise.resolve(Mc(t))},Vc=function(t){const e=Mc(t),n=xr(rt(t).declarations).reduce((t,e)=>{const n=nt(e);return n&&t.push(new Ba(n)),t},[]);return new Nc(e,n)},qc=Vc,Uc=function(t){return Promise.resolve(Vc(t))};let Bc=(()=>{class t{constructor(){this.compileModuleSync=Fc,this.compileModuleAsync=Lc,this.compileModuleAndAllComponentsSync=qc,this.compileModuleAndAllComponentsAsync=Uc}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=g({token:t,factory:t.\u0275fac}),t})();const zc=(()=>Promise.resolve(0))();function Hc(t){"undefined"==typeof Zone?zc.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Kc{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new tc(!1),this.onMicrotaskEmpty=new tc(!1),this.onStable=new tc(!1),this.onError=new tc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=e,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let t=M.requestAnimationFrame,e=M.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(M,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Qc(t),Gc(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Qc(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return $c(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),Yc(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return $c(t),e.invoke(r,i,o,s,a)}finally{Yc(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Qc(t),Gc(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Kc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Kc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Wc,Gs,Gs);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Wc={};function Gc(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Qc(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function $c(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Yc(t){t._nesting--,Gc(t)}class Xc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new tc,this.onMicrotaskEmpty=new tc,this.onStable=new tc,this.onError=new tc}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Zc=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Kc.assertNotInAngularZone(),Hc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Hc(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Tn(Kc))},t.\u0275prov=g({token:t,factory:t.\u0275fac}),t})(),Jc=(()=>{class t{constructor(){this._applications=new Map,ru.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return ru.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=g({token:t,factory:t.\u0275fac}),t})();class tu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function eu(t){ru=t}let nu,ru=new tu,iu=!0,ou=!1;function su(){return ou=!0,iu}function au(){if(ou)throw new Error("Cannot enable prod mode after platform setup.");iu=!1}const cu=new on("AllowMultipleToken");class uu{constructor(t,e){this.name=t,this.token=e}}function lu(t,e,n=[]){const r="Platform: "+e,i=new on(r);return(e=[])=>{let o=hu();if(!o||o.injector.get(cu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:ho,useValue:"platform"});!function(t){if(nu&&!nu.destroyed&&!nu.injector.get(cu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");nu=t.get(du);const e=t.get(Ic,null);e&&e.forEach(t=>t())}(xo.create({providers:t,name:r}))}return function(t){const e=hu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function hu(){return nu&&!nu.destroyed?nu:null}let du=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Xc:("zone.js"===t?void 0:t)||new Kc({enableLongStackTrace:su(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:Kc,useValue:n}];return n.run(()=>{const e=xo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(wr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{mu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Zo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Ec);return t.runInitializers(),t.donePromise.then(()=>(Ns(i.injector.get(jc,js)||js),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=fu({},e);return function(t,e,n){const r=new Wa(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(pu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Tn(xo))},t.\u0275prov=g({token:t,factory:t.\u0275fac}),t})();function fu(t,e){return Array.isArray(e)?e.reduce(fu,t):Object.assign(Object.assign({},t),e)}let pu=(()=>{class t{constructor(t,e,n,r,i,c){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Kc.assertNotInAngularZone(),Hc(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Kc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(u,l.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Hs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Ia),i=n.create(xo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Zc,null),a=s&&i.injector.get(Jc);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),mu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),su()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;mu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Pc,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Tn(Kc),Tn(Rc),Tn(xo),Tn(wr),Tn(Ws),Tn(Ec))},t.\u0275prov=g({token:t,factory:t.\u0275fac}),t})();function mu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class gu{}class yu{}const bu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let _u=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||bu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>vu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>vu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Tn(Bc),Tn(yu,8))},t.\u0275prov=g({token:t,factory:t.\u0275fac}),t})();function vu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const wu=function(t){return null},Cu=lu(null,"core",[{provide:Ac,useValue:"unknown"},{provide:du,deps:[xo]},{provide:Jc,deps:[]},{provide:Rc,deps:[]}]),Su=[{provide:pu,useClass:pu,deps:[Kc,Rc,xo,wr,Ws,Ec]},{provide:Ua,deps:[Kc],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Ec,useClass:Ec,deps:[[new yn,Oc]]},{provide:Bc,useClass:Bc,deps:[]},kc,{provide:fa,useFactory:function(){return Ca},deps:[]},{provide:pa,useFactory:function(){return Sa},deps:[]},{provide:jc,useFactory:function(t){return Ns(t=t||"undefined"!=typeof $localize&&$localize.locale||js),t},deps:[[new gn(jc),new yn,new _n]]},{provide:Dc,useValue:"USD"}];let Ou=(()=>{class t{constructor(t){}}return t.\u0275mod=X({type:t}),t.\u0275inj=y({factory:function(e){return new(e||t)(Tn(pu))},providers:Su}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return c}),n.d(e,"e",function(){return u}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function c(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a});var r=n("7o/Q"),i=n("WMd4");function o(t,e=0){return function(n){return n.lift(new s(t,e))}}class s{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}class a extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new c(t,this.destination)))}_next(t){this.scheduleMessage(i.a.createNext(t))}_error(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()}}class c{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return d}),n.d(e,"d",function(){return f});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},c=s.INFO,u=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=u[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=c,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return d}),n.d(e,"b",function(){return E}),n.d(e,"c",function(){return L}),n.d(e,"d",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"f",function(){return a}),n.d(e,"g",function(){return c}),n.d(e,"h",function(){return j}),n.d(e,"i",function(){return f}),n.d(e,"j",function(){return V}),n.d(e,"k",function(){return l}),n.d(e,"l",function(){return h}),n.d(e,"m",function(){return z}),n.d(e,"n",function(){return Q}),n.d(e,"o",function(){return p}),n.d(e,"p",function(){return R}),n.d(e,"q",function(){return y}),n.d(e,"r",function(){return b}),n.d(e,"s",function(){return v}),n.d(e,"t",function(){return N}),n.d(e,"u",function(){return w}),n.d(e,"v",function(){return m}),n.d(e,"w",function(){return g}),n.d(e,"x",function(){return S}),n.d(e,"y",function(){return _}),n.d(e,"z",function(){return C}),n.d(e,"A",function(){return P}),n.d(e,"B",function(){return T}),n.d(e,"C",function(){return M}),n.d(e,"D",function(){return F}),n.d(e,"E",function(){return D}),n.d(e,"F",function(){return G}),n.d(e,"G",function(){return W}),n.d(e,"H",function(){return I}),n.d(e,"I",function(){return B}),n.d(e,"J",function(){return H}),n.d(e,"K",function(){return K});var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=(15&a)<<2|u>>6,h=63&u;c||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,c=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==c)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==c&&r.push(a<<6&192|c))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){var e=s(t);return a.encodeByteArray(e,!0)},u=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function f(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=Object(r.a)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[a.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),a.encodeString(JSON.stringify(s),!1),""].join(".")}function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function m(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function b(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function _(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function v(){return p().indexOf("Electron/")>=0}function w(){var t=p();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function C(){return p().indexOf("MSAppHost/")>=0}function S(){return!1}var O=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,E.prototype.create),o}return Object(r.c)(e,t),e}(Error),E=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?x(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",c=new O(i,a,r);return c},t}();function x(t,e){return t.replace(k,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var k=/\{\$([^}]+)}/g;function T(t){return JSON.parse(t)}function I(t){return JSON.stringify(t)}var A=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=T(u(o[0])||""),n=T(u(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},P=function(t){var e=A(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},R=function(t){var e=A(t).claims;return"object"==typeof e&&!0===e.admin};function j(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function N(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function M(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function F(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var L=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],c=this.chain_[2],u=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=u^a&(c^u),o=1518500249):(i=a^c^u,o=1859775393):r<60?(i=a&c|u&(a|c),o=2400959708):(i=a^c^u,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=u,u=c,c=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function V(t,e){var n=new q(t,e);return n.subscribe.bind(n)}var q=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=U),void 0===r.error&&(r.error=U),void 0===r.complete&&(r.complete=U);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function U(){}var B=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function z(t,e){return t+" failed: "+e+" argument "}function H(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(z(t,e)+"must be a valid function.")}function K(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(z(t,e)+"must be a valid context object.")}var W=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},G=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function Q(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return c});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),c=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:u,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(u)){a&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){e=h instanceof s?c(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(c(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function c(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return x}),n.d(e,"b",function(){return _}),n.d(e,"c",function(){return b}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return y}),n.d(e,"f",function(){return O}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return g}),n.d(e,"j",function(){return C});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),c=n("fXoL"),u=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const m=["ngOnDestroy"],g=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(m.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},b=new c.q("angularfire2.app.options"),_=new c.q("angularfire2.app.nameOrConfig"),v=new c.P("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=u.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>u.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&S("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const C=()=>{S("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},S=(t,...e)=>{Object(c.W)()&&"undefined"!=typeof console&&console[t](...e)};function O(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&S("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(c){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const E={provide:class{},useFactory:w,deps:[b,c.z,[new c.A,_]]};let x=(()=>{class t{constructor(t){u.a.registerVersion("angularfire",v.full,t.toString()),u.a.registerVersion("angular",c.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:b,useValue:e},{provide:_,useValue:n}]}}}return t.\u0275mod=c.Ib({type:t}),t.\u0275inj=c.Hb({factory:function(e){return new(e||t)(c.Tb(c.B))},providers:[E]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("7Hc7"),o=n("Y7HM");class s extends r.a{constructor(t,e=0,n=i.a){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!Object(o.a)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=i.a)}static create(t,e=0,n=i.a){return new s(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(s.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function a(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new s(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new c(t,this.nextOrObserver,this.error,this.complete))}}class c extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new c(t))}}class c{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new u(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class u extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class l extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new d(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return a()(this)}}const h=(()=>{const t=l.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class d extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function f(){return new r.a}function p(){return t=>{return a()((e=f,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r})(t));var e}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},z6cu:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("HDdC");function i(t,e){return new r.a(e?n=>e.schedule(o,0,{error:t,subscriber:n}):e=>e.error(t))}function o({error:t,subscriber:e}){e.error(t)}},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),c=n("q/0M"),u=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",u),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new c.b("@firebase/app"),m=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.k)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=d),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.h)(e,a))throw l.create("duplicate-app",{appName:a});var c=new t(n,o,r);return e[a]=c,c},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),c=e.match(/\s|\//);if(s||c){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&c&&u.push("and"),c&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(u.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:c.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(c.d)(t,e)},apps:null,SDK_VERSION:"8.5.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||d,!Object(s.h)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.l)(c,o.serviceProps),r[a]=c,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var u=0,h=Object.keys(e);u<h.length;u++)e[h[u]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(m);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.l)(e,t)},createSubscribe:s.j,ErrorFactory:s.b,deepExtend:s.l}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.q)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var b=self.firebase.SDK_VERSION;b&&b.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.w)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),_.apply(void 0,t)};var v=g;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.21",void 0),t.registerVersion("fire-js","")}(v),e.a=v},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");const i={apiKey:"AIzaSyBwEi2c5sycvzloxdxt1heQK3cVCmpWWlY",authDomain:"inplace-26d42.firebaseapp.com",projectId:"inplace-26d42",storageBucket:"inplace-26d42.appspot.com",messagingSenderId:"709278902105",appId:"1:709278902105:web:7ea890423d0cccbcd98e48",measurementId:"G-EXJTRFY4RG"};let o=null;function s(){return o}const a=new r.q("DocumentToken");let c=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Tb)(h)}const l=new r.q("Location Initialized");let h=(()=>{class t extends c{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=s().getLocation(),this._history=s().getHistory()}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){d()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){d()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(a))},t.\u0275prov=Object(r.Gb)({factory:f,token:t,providedIn:"platform"}),t})();function d(){return!!window.history.pushState}function f(){return new h(Object(r.Tb)(a))}function p(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function m(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:b,token:t,providedIn:"root"}),t})();function b(t){const e=Object(r.Tb)(a).location;return new v(Object(r.Tb)(c),e&&e.origin||"")}const _=new r.q("appBaseHref");let v=(()=>{class t extends y{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(c),r.Tb(_,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends y{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=p(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(c),r.Tb(_,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),C=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=m(O(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,O(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(y),r.Tb(c))},t.normalizeQueryParams=g,t.joinWithSlash=p,t.stripTrailingSlash=m,t.\u0275prov=Object(r.Gb)({factory:S,token:t,providedIn:"root"}),t})();function S(){return new C(Object(r.Tb)(y),Object(r.Tb)(c))}function O(t){return t.replace(/\/index.html$/,"")}var E=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}({}),x=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),k=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function T(t,e){const n=Object(r.kb)(t),i=n[r.bb.NumberSymbols][e];if(void 0===i){if(e===k.CurrencyDecimal)return n[r.bb.NumberSymbols][k.Decimal];if(e===k.CurrencyGroup)return n[r.bb.NumberSymbols][k.Group]}return i}const I=r.nb,A=/^(\d+)?\.((\d+)(-(\d+))?)?$/,P=".",R="0";function j(t){const e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}class D{}let N=(()=>{class t extends D{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(I(e||this.locale)(t)){case x.Zero:return"zero";case x.One:return"one";case x.Two:return"two";case x.Few:return"few";case x.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.u))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),M=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.qb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Object(r.vb)(t.item));this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.s),r.Kb(r.t),r.Kb(r.l),r.Kb(r.E))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class F{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let L=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new F(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new V(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new V(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L),r.Kb(r.s))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class V{constructor(t,e){this.record=t,this.view=e}}let q=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new U,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){B("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){B("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class U{constructor(){this.$implicit=null,this.ngIf=null}}function B(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.vb)(e)}'.`)}class z{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let H=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),K=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new z(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L),r.Kb(H,1))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),W=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(r.t),r.Kb(r.E))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})();function G(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.vb)(t)}'`)}class Q{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class ${createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const Y=new $,X=new Q;let Z=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if(Object(r.sb)(e))return Y;if(Object(r.rb)(e))return X;throw G(t,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(r.Vb())},t.\u0275pipe=r.Jb({name:"async",type:t,pure:!1}),t})(),J=(()=>{class t{constructor(t){this._locale=t}transform(e,n,i){if(!function(t){return!(null==t||""===t||t!=t)}(e))return null;i=i||this._locale;try{return function(t,e,n){return function(t,e,n,r,i,o,s=!1){let a="",c=!1;if(isFinite(t)){let u=function(t){let e,n,r,i,o,s=Math.abs(t)+"",a=0;for((n=s.indexOf(P))>-1&&(s=s.replace(P,"")),(r=s.search(/e/i))>0?(n<0&&(n=r),n+=+s.slice(r+1),s=s.substring(0,r)):n<0&&(n=s.length),r=0;s.charAt(r)===R;r++);if(r===(o=s.length))e=[0],n=1;else{for(o--;s.charAt(o)===R;)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=Number(s.charAt(r))}return n>22&&(e=e.splice(0,21),a=n-1,n=1),{digits:e,exponent:a,integerLen:n}}(t);s&&(u=function(t){if(0===t.digits[0])return t;const e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===e?t.digits.push(0,0):1===e&&t.digits.push(0),t.integerLen+=2),t}(u));let l=e.minInt,h=e.minFrac,d=e.maxFrac;if(o){const t=o.match(A);if(null===t)throw new Error(o+" is not a valid digit info");const e=t[1],n=t[3],r=t[5];null!=e&&(l=j(e)),null!=n&&(h=j(n)),null!=r?d=j(r):null!=n&&h>d&&(d=h)}!function(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen;const o=Math.min(Math.max(e,i),n);let s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let t=s;t<r.length;t++)r[t]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let t=1;t<s;t++)r[t]=0}if(a>=5)if(s-1<0){for(let e=0;e>s;e--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=0!==o;const u=e+t.integerLen,l=r.reduceRight(function(t,e,n,r){return r[n]=(e+=t)<10?e:e-10,c&&(0===r[n]&&n>=u?r.pop():c=!1),e>=10?1:0},0);l&&(r.unshift(l),t.integerLen++)}(u,h,d);let f=u.digits,p=u.integerLen;const m=u.exponent;let g=[];for(c=f.every(t=>!t);p<l;p++)f.unshift(0);for(;p<0;p++)f.unshift(0);p>0?g=f.splice(p,f.length):(g=f,f=[0]);const y=[];for(f.length>=e.lgSize&&y.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)y.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&y.unshift(f.join("")),a=y.join(T(n,r)),g.length&&(a+=T(n,i)+g.join("")),m&&(a+=T(n,k.Exponential)+"+"+m)}else a=T(n,k.Infinity);return a=t<0&&!c?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(t,function(t,e="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(";"),i=r[0],o=r[1],s=-1!==i.indexOf(P)?i.split(P):[i.substring(0,i.lastIndexOf(R)+1),i.substring(i.lastIndexOf(R)+1)],a=s[0],c=s[1]||"";n.posPre=a.substr(0,a.indexOf("#"));for(let l=0;l<c.length;l++){const t=c.charAt(l);t===R?n.minFrac=n.maxFrac=l+1:"#"===t?n.maxFrac=l+1:n.posSuf+=t}const u=a.split(",");if(n.gSize=u[1]?u[1].length:0,n.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,o){const t=i.length-n.posPre.length-n.posSuf.length,e=o.indexOf("#");n.negPre=o.substr(0,e).replace(/'/g,""),n.negSuf=o.substr(e+t).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}(function(t,e){return Object(r.kb)(t)[r.bb.NumberFormats][e]}(e,E.Decimal),T(e,k.MinusSign)),e,k.Group,k.Decimal,n)}(function(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(t+" is not a number");return t}(e),i,n)}catch(o){throw G(t,o.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.u))},t.\u0275pipe=r.Jb({name:"number",type:t,pure:!0}),t})(),tt=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[{provide:D,useClass:N}]}),t})();function et(t){return"server"===t}let nt=(()=>{class t{}return t.\u0275prov=Object(r.Gb)({token:t,providedIn:"root",factory:()=>new rt(Object(r.Tb)(a),window)}),t})();class rt{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=it(this.window.history)||it(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function it(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class ot extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new ot,o||(o=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=at||(at=document.querySelector("base"),at)?at.getAttribute("href"):null;return null==e?null:(n=e,st||(st=document.createElement("a")),st.setAttribute("href",n),"/"===st.pathname.charAt(0)?st.pathname:"/"+st.pathname);var n}resetBaseElement(){at=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let st,at=null;const ct=new r.q("TRANSITION_ID"),ut=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[ct,a,r.r],multi:!0}];class lt{static init(){Object(r.Y)(new lt)}addToWindow(t){r.pb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.pb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.pb.getAllAngularRootElements=()=>t.getAllRootElements(),r.pb.frameworkStabilizers||(r.pb.frameworkStabilizers=[]),r.pb.frameworkStabilizers.push(t=>{const e=r.pb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const ht=new r.q("EventManagerPlugins");let dt=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(ht),r.Tb(r.z))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class ft{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let pt=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),mt=(()=>{class t extends pt{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>s().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(a))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const gt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},yt=/%COMP%/g;function bt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?bt(t,i,n):(i=i.replace(yt,t),n.push(i))}return n}function _t(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let vt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new wt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Ct(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new St(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=bt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(dt),r.Tb(mt),r.Tb(r.c))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class wt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(gt[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=gt[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=gt[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,_t(n)):this.eventManager.addEventListener(t,e,_t(n))}}class Ct extends wt{constructor(t,e,n,r){super(t),this.component=n;const i=bt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(yt,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(yt,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class St extends wt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=bt(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Ot=(()=>{class t extends ft{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(a))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const Et=["alt","control","meta","shift"],xt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Tt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let It=(()=>{class t extends ft{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(Et.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&kt.hasOwnProperty(e)&&(e=kt[e]))}return xt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Et.forEach(r=>{r!=n&&(0,Tt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(a))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),At=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:function(){return Object(r.Tb)(Pt)},token:t,providedIn:"root"}),t})(),Pt=(()=>{class t extends At{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case r.I.NONE:return e;case r.I.HTML:return Object(r.eb)(e,"HTML")?Object(r.wb)(e):Object(r.cb)(this._doc,String(e));case r.I.STYLE:return Object(r.eb)(e,"Style")?Object(r.wb)(e):e;case r.I.SCRIPT:if(Object(r.eb)(e,"Script"))return Object(r.wb)(e);throw new Error("unsafe value used in a script context");case r.I.URL:return Object(r.ob)(e),Object(r.eb)(e,"URL")?Object(r.wb)(e):Object(r.db)(String(e));case r.I.RESOURCE_URL:if(Object(r.eb)(e,"ResourceURL"))return Object(r.wb)(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return Object(r.fb)(t)}bypassSecurityTrustStyle(t){return Object(r.ib)(t)}bypassSecurityTrustScript(t){return Object(r.hb)(t)}bypassSecurityTrustUrl(t){return Object(r.jb)(t)}bypassSecurityTrustResourceUrl(t){return Object(r.gb)(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(a))},t.\u0275prov=Object(r.Gb)({factory:function(){return t=Object(r.Tb)(r.o),new Pt(t.get(a));var t},token:t,providedIn:"root"}),t})();const Rt=[{provide:r.B,useValue:"browser"},{provide:r.C,useValue:function(){ot.makeCurrent(),lt.init()},multi:!0},{provide:a,useFactory:function(){return Object(r.ub)(document),document},deps:[]}],jt=Object(r.S)(r.X,"browser",Rt),Dt=[[],{provide:r.ab,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:ht,useClass:Ot,multi:!0,deps:[a,r.z,r.B]},{provide:ht,useClass:It,multi:!0,deps:[a]},[],{provide:vt,useClass:vt,deps:[dt,mt,r.c]},{provide:r.F,useExisting:vt},{provide:pt,useExisting:mt},{provide:mt,useClass:mt,deps:[a]},{provide:r.M,useClass:r.M,deps:[r.z]},{provide:dt,useClass:dt,deps:[ht,r.z]},[]];let Nt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:ct,useExisting:r.c},ut]}}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)(r.Tb(t,12))},providers:Dt,imports:[tt,r.f]}),t})();"undefined"!=typeof window&&window;var Mt=n("Cfvw"),Ft=n("LRne"),Lt=n("XNiG"),Vt=n("9ppp");class qt extends Lt.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Vt.a;return this._value}next(t){super.next(this._value=t)}}var Ut=n("z+Ro"),Bt=n("DH7j"),zt=n("7o/Q");class Ht extends zt.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Kt extends zt.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Wt=n("SeVD"),Gt=n("HDdC");function Qt(t,e,n,r,i=new Kt(t,n,r)){if(!i.closed)return e instanceof Gt.a?e.subscribe(i):Object(Wt.a)(e)(i)}var $t=n("yCtX");const Yt={};function Xt(...t){let e=void 0,n=void 0;return Object(Ut.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(Bt.a)(t[0])&&(t=t[0]),Object($t.a)(t,n).lift(new Zt(e))}class Zt{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Jt(t,this.resultSelector))}}class Jt extends Ht{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Yt),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Qt(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Yt?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const te=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var ee=n("bHdf");function ne(...t){return Object(ee.a)(1)(Object(Ft.a)(...t))}var re=n("EY2u");function ie(t){return new Gt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(Mt.a)(n):Object(re.b)()).subscribe(e)})}var oe=n("lJxs"),se=n("zx2A");function ae(t,e){return"function"==typeof e?n=>n.pipe(ae((n,r)=>Object(Mt.a)(t(n,r)).pipe(Object(oe.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new ce(t))}class ce{constructor(t){this.project=t}call(t,e){return e.subscribe(new ue(t,this.project))}}class ue extends se.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new se.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(se.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const le=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function he(t){return e=>0===t?Object(re.b)():e.lift(new de(t))}class de{constructor(t){if(this.total=t,this.total<0)throw new le}call(t,e){return e.subscribe(new fe(t,this.total))}}class fe extends zt.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function pe(...t){const e=t[t.length-1];return Object(Ut.a)(e)?(t.pop(),n=>ne(t,n,e)):e=>ne(t,e)}function me(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new ge(t,e,n))}}class ge{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new ye(t,this.accumulator,this.seed,this.hasSeed))}}class ye extends zt.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function be(t,e){return function(n){return n.lift(new _e(t,e))}}class _e{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new ve(t,this.predicate,this.thisArg))}}class ve extends zt.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function we(t){return function(e){const n=new Ce(t),r=e.lift(n);return n.caught=r}}class Ce{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Se(t,this.selector,this.caught))}}class Se extends se.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new se.a(this);this.add(r);const i=Object(se.c)(n,r);i!==r&&this.add(i)}}}var Oe=n("5+tZ");function Ee(t,e){return Object(Oe.a)(t,e,1)}function xe(t){return function(e){return 0===t?Object(re.b)():e.lift(new ke(t))}}class ke{constructor(t){if(this.total=t,this.total<0)throw new le}call(t,e){return e.subscribe(new Te(t,this.total))}}class Te extends zt.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Ie(t=Re){return e=>e.lift(new Ae(t))}class Ae{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Pe(t,this.errorFactory))}}class Pe extends zt.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(a_){t=a_}this.destination.error(t)}}}function Re(){return new te}function je(t=null){return e=>e.lift(new De(t))}class De{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Ne(t,this.defaultValue))}}class Ne extends zt.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Me=n("SpAZ");function Fe(t,e){const n=arguments.length>=2;return r=>r.pipe(t?be((e,n)=>t(e,n,r)):Me.a,he(1),n?je(e):Ie(()=>new te))}var Le=n("vkgz"),Ve=n("quSY");function qe(t){return e=>e.lift(new Ue(t))}class Ue{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Be(t,this.callback))}}class Be extends zt.a{constructor(t,e){super(t),this.add(new Ve.a(e))}}class ze{constructor(t,e){this.id=t,this.url=e}}class He extends ze{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ke extends ze{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class We extends ze{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ge extends ze{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Qe extends ze{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $e extends ze{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ye extends ze{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Xe extends ze{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ze extends ze{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Je{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class tn{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class en{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nn{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rn{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class on{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sn{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const an="primary";class cn{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function un(t){return new cn(t)}function ln(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function hn(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function dn(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!fn(t[i],e[i]))return!1;return!0}function fn(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function pn(t){return Array.prototype.concat.apply([],t)}function mn(t){return t.length>0?t[t.length-1]:null}function gn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function yn(t){return Object(r.rb)(t)?t:Object(r.sb)(t)?Object(Mt.a)(Promise.resolve(t)):Object(Ft.a)(t)}function bn(t,e,n){return n?function(t,e){return dn(t,e)}(t.queryParams,e.queryParams)&&_n(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>fn(t[n],e[n]))}(t.queryParams,e.queryParams)&&vn(t.root,e.root)}function _n(t,e){if(!En(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!_n(t.children[n],e.children[n]))return!1}return!0}function vn(t,e){return wn(t,e,e.segments)}function wn(t,e,n){if(t.segments.length>n.length)return!!En(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!En(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!vn(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!En(t.segments,r)&&!!t.children.primary&&wn(t.children.primary,e,i)}}class Cn{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=un(this.queryParams)),this._queryParamMap}toString(){return Tn.serialize(this)}}class Sn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,gn(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return In(this)}}class On{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=un(this.parameters)),this._parameterMap}toString(){return Mn(this)}}function En(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class xn{}class kn{parse(t){const e=new Un(t);return new Cn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+An(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Rn(e)}=${Rn(t)}`).join("&"):`${Rn(e)}=${Rn(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const Tn=new kn;function In(t){return t.segments.map(t=>Mn(t)).join("/")}function An(t,e){if(!t.hasChildren())return In(t);if(e){const e=t.children.primary?An(t.children.primary,!1):"",n=[];return gn(t.children,(t,e)=>{e!==an&&n.push(`${e}:${An(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return gn(t.children,(t,r)=>{r===an&&(n=n.concat(e(t,r)))}),gn(t.children,(t,r)=>{r!==an&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===an?[An(t.children.primary,!1)]:[`${n}:${An(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${In(t)}/${e[0]}`:`${In(t)}/(${e.join("//")})`}}function Pn(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rn(t){return Pn(t).replace(/%3B/gi,";")}function jn(t){return Pn(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dn(t){return decodeURIComponent(t)}function Nn(t){return Dn(t.replace(/\+/g,"%20"))}function Mn(t){return`${jn(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${jn(t)}=${jn(e[t])}`).join("")}`;var e}const Fn=/^[^\/()?;=#]+/;function Ln(t){const e=t.match(Fn);return e?e[0]:""}const Vn=/^[^=?&#]+/,qn=/^[^?&#]+/;class Un{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Sn([],{}):new Sn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Sn(t,e)),n}parseSegment(){const t=Ln(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new On(Dn(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Ln(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Ln(this.remaining);t&&(n=t,this.capture(n))}t[Dn(e)]=Dn(n)}parseQueryParam(t){const e=function(t){const e=t.match(Vn);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(qn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Nn(e),i=Nn(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Ln(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=an);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Sn([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Bn{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=zn(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=zn(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Hn(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Hn(t,this._root).map(t=>t.value)}}function zn(t,e){if(t===e.value)return e;for(const n of e.children){const e=zn(t,n);if(e)return e}return null}function Hn(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Hn(t,n);if(r.length)return r.unshift(e),r}return[]}class Kn{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Wn(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Gn extends Bn{constructor(t,e){super(t),this.snapshot=e,Jn(this,t)}toString(){return this.snapshot.toString()}}function Qn(t,e){const n=function(t,e){const n=new Xn([],{},{},"",{},an,e,null,t.root,-1,{});return new Zn("",new Kn(n,[]))}(t,e),r=new qt([new On("",{})]),i=new qt({}),o=new qt({}),s=new qt({}),a=new qt(""),c=new $n(r,i,s,a,o,an,e,n.root);return c.snapshot=n.root,new Gn(new Kn(c,[]),n)}class $n{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(oe.a)(t=>un(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(oe.a)(t=>un(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Yn(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Xn{constructor(t,e,n,r,i,o,s,a,c,u,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=c,this._lastPathIndex=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=un(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=un(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Zn extends Bn{constructor(t,e){super(e),this.url=t,Jn(this,e)}toString(){return tr(this._root)}}function Jn(t,e){e.value._routerState=t,e.children.forEach(e=>Jn(t,e))}function tr(t){const e=t.children.length>0?` { ${t.children.map(tr).join(", ")} } `:"";return`${t.value}${e}`}function er(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,dn(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),dn(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!dn(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),dn(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function nr(t,e){return dn(t.params,e.params)&&function(t,e){return En(t,e)&&t.every((t,n)=>dn(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||nr(t.parent,e.parent))}function rr(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return rr(t,e,r);return rr(t,e)})}(t,e,n);return new Kn(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return ir(e,t),t}{const n=new $n(new qt((r=e.value).url),new qt(r.params),new qt(r.queryParams),new qt(r.fragment),new qt(r.data),r.outlet,r.component,r),i=e.children.map(e=>rr(t,e));return new Kn(n,i)}}var r}function ir(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)ir(t.children[n],e.children[n])}function or(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function sr(t){return"object"==typeof t&&null!=t&&t.outlets}function ar(t,e,n,r,i){let o={};return r&&gn(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new Cn(n.root===t?e:cr(n.root,t,e),o,i)}function cr(t,e,n){const r={};return gn(t.children,(t,i)=>{r[i]=t===e?n:cr(t,e,n)}),new Sn(t.segments,r)}class ur{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&or(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(sr);if(r&&r!==mn(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class lr{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function hr(t,e,n){if(t||(t=new Sn([],{})),0===t.segments.length&&t.hasChildren())return dr(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(sr(s))break;const a=""+s,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&c&&"object"==typeof c&&void 0===c.outlets){if(!gr(a,c,e))return o;r+=2}else{if(!gr(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Sn(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Sn(t.segments.slice(r.pathIndex),t.children),dr(e,0,i)}return r.match&&0===i.length?new Sn(t.segments,{}):r.match&&!t.hasChildren()?fr(t,e,n):r.match?dr(t,0,i):fr(t,e,n)}function dr(t,e,n){if(0===n.length)return new Sn(t.segments,{});{const r=function(t){return sr(t[0])?t[0].outlets:{[an]:t}}(n),i={};return gn(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=hr(t.children[r],e,n))}),gn(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Sn(t.segments,i)}}function fr(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(sr(o)){const t=pr(o.outlets);return new Sn(r,t)}if(0===i&&or(n[0])){r.push(new On(t.segments[e].path,n[0])),i++;continue}const s=sr(o)?o.outlets.primary:""+o,a=i<n.length-1?n[i+1]:null;s&&a&&or(a)?(r.push(new On(s,mr(a))),i+=2):(r.push(new On(s,{})),i++)}return new Sn(r,{})}function pr(t){const e={};return gn(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=fr(new Sn([],{}),0,t))}),e}function mr(t){const e={};return gn(t,(t,n)=>e[n]=""+t),e}function gr(t,e,n){return t==n.path&&dn(e,n.parameters)}class yr{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),er(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Wn(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),gn(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Wn(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=Wn(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new on(t.value.snapshot))}),t.children.length&&this.forwardEvent(new nn(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(er(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),br(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function br(t){er(t.value),t.children.forEach(br)}class _r{constructor(t,e){this.routes=t,this.module=e}}function vr(t){return"function"==typeof t}function wr(t){return t instanceof Cn}const Cr=Symbol("INITIAL_VALUE");function Sr(){return ae(t=>Xt(t.map(t=>t.pipe(he(1),pe(Cr)))).pipe(me((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Cr)return t;if(r===Cr&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||wr(r))return r}return t},t)},Cr),be(t=>t!==Cr),Object(oe.a)(t=>wr(t)?t:!0===t),he(1)))}let Or=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Lb(0,"router-outlet")},directives:function(){return[yi]},encapsulation:2}),t})();function Er(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];xr(r,kr(e,r))}}function xr(t,e){t.children&&Er(t.children,e)}function kr(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Tr(t){const e=t.children&&t.children.map(Tr),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==an&&(n.component=Or),n}function Ir(t){return t.outlet||an}function Ar(t,e){const n=t.filter(t=>Ir(t)===e);return n.push(...t.filter(t=>Ir(t)!==e)),n}const Pr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Rr(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Pr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||hn)(n,t,e);if(!i)return Object.assign({},Pr);const o={};gn(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function jr(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Dr(t,e,n)&&Ir(n)!==an)}(t,n,r)){const i=new Sn(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Ir(o)!==an){const n=new Sn([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Ir(o)]=n}return i}(t,e,r,new Sn(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Dr(t,e,n))}(t,n,r)){const o=new Sn(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Dr(t,n,a)&&!i[Ir(a)]){const n=new Sn([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Ir(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Sn(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Dr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Nr(t,e,n,r){return!!(Ir(t)===r||r!==an&&Dr(e,n,t))&&("**"===t.path||Rr(e,t,n).matched)}function Mr(t,e,n){return 0===e.length&&!t.children[n]}class Fr{constructor(t){this.segmentGroup=t||null}}class Lr{constructor(t){this.urlTree=t}}function Vr(t){return new Gt.a(e=>e.error(new Fr(t)))}function qr(t){return new Gt.a(e=>e.error(new Lr(t)))}function Ur(t){return new Gt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Br{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.x)}apply(){const t=jr(this.urlTree.root,[],[],this.config).segmentGroup,e=new Sn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,an).pipe(Object(oe.a)(t=>this.createUrlTree(zr(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(we(t=>{if(t instanceof Lr)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Fr)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,an).pipe(Object(oe.a)(e=>this.createUrlTree(zr(e),t.queryParams,t.fragment))).pipe(we(t=>{if(t instanceof Fr)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Sn([],{[an]:t}):t;return new Cn(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(oe.a)(t=>new Sn([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(Mt.a)(r).pipe(Ee(r=>{const i=n.children[r],o=Ar(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(oe.a)(t=>({segment:t,outlet:r})))}),me((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?be((e,n)=>t(e,n,r)):Me.a,xe(1),n?je(e):Ie(()=>new te))}())}expandSegment(t,e,n,r,i,o){return Object(Mt.a)(n).pipe(Ee(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(we(t=>{if(t instanceof Fr)return Object(Ft.a)(null);throw t}))),Fe(t=>!!t),we((t,n)=>{if(t instanceof te||"EmptyError"===t.name){if(Mr(e,r,i))return Object(Ft.a)(new Sn([],{}));throw new Fr(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Nr(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Vr(e):Vr(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?qr(i):this.lineralizeSegments(n,i).pipe(Object(Oe.a)(n=>{const i=new Sn(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:c,positionalParamSegments:u}=Rr(e,r,i);if(!s)return Vr(e);const l=this.applyRedirectCommands(a,r.redirectTo,u);return r.redirectTo.startsWith("/")?qr(l):this.lineralizeSegments(r,l).pipe(Object(Oe.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(c)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(oe.a)(t=>(n._loadedConfig=t,new Sn(r,{})))):Object(Ft.a)(new Sn(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=Rr(e,n,r);if(!o)return Vr(e);const c=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(Oe.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:u}=jr(e,s,c,o),l=new Sn(a.segments,a.children);if(0===u.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(oe.a)(t=>new Sn(s,t)));if(0===o.length&&0===u.length)return Object(Ft.a)(new Sn(s,{}));const h=Ir(n)===i;return this.expandSegment(r,l,o,u,h?an:i,!0).pipe(Object(oe.a)(t=>new Sn(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(Ft.a)(new _r(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(Ft.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(Oe.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(oe.a)(t=>(e._loadedConfig=t,t))):function(t){return new Gt.a(e=>e.error(ln(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(Ft.a)(new _r([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(Ft.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&vr(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!vr(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return yn(o)});return Object(Ft.a)(i).pipe(Sr(),Object(Le.a)(t=>{if(!wr(t))return;const e=ln(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(oe.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(Ft.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Ur(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Cn(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return gn(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return gn(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Sn(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function zr(t){const e={};for(const n of Object.keys(t.children)){const r=zr(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Sn(t.segments.concat(e.segments),e.children)}return t}(new Sn(t.segments,e))}class Hr{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Kr{constructor(t,e){this.component=t,this.route=e}}function Wr(t,e,n){const r=t._root;return Qr(r,e?e._root:null,n,[r.value])}function Gr(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Qr(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Wn(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!En(t.url,e.url);case"pathParamsOrQueryParamsChange":return!En(t.url,e.url)||!dn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nr(t,e)||!dn(t.queryParams,e.queryParams);case"paramsChange":default:return!nr(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Hr(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Qr(t,e,o.component?a?a.children:null:n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Kr(a.outlet.component,s))}else s&&$r(e,a,i),i.canActivateChecks.push(new Hr(r)),Qr(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),gn(o,(t,e)=>$r(t,n.getContext(e),i)),i}function $r(t,e,n){const r=Wn(t),i=t.value;gn(r,(t,r)=>{$r(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Kr(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Yr{}function Xr(t){return new Gt.a(e=>e.error(t))}class Zr{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=jr(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,an);if(null===e)return null;const n=new Xn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},an,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Kn(n,e),i=new Zn(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Yn(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=Ar(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!Jr(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===an?-1:e.value.outlet===an?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Mr(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Nr(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?mn(n).parameters:{};i=new Xn(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ni(t),Ir(t),t.component,t,ti(e),ei(e)+n.length,ri(t))}else{const r=Rr(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Xn(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ni(t),Ir(t),t.component,t,ti(e),ei(e)+o.length,ri(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:c,slicedSegments:u}=jr(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const t=this.processChildren(a,c);return null===t?null:[new Kn(i,t)]}if(0===a.length&&0===u.length)return[new Kn(i,[])];const l=Ir(t)===r,h=this.processSegment(a,c,u,l?an:r);return null===h?null:[new Kn(i,h)]}}function Jr(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ti(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ei(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function ni(t){return t.data||{}}function ri(t){return t.resolve||{}}function ii(t){return ae(e=>{const n=t(e);return n?Object(Mt.a)(n).pipe(Object(oe.a)(()=>e)):Object(Ft.a)(e)})}class oi extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const si=new r.q("ROUTES");class ai{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(oe.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new _r(pn(r.injector.get(si)).map(Tr),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(Mt.a)(this.loader.load(t)):yn(t()).pipe(Object(Oe.a)(t=>t instanceof r.v?Object(Ft.a)(t):Object(Mt.a)(this.compiler.compileModuleAsync(t))))}}class ci{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ui,this.attachRef=null}}class ui{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new ci,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class li{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function hi(t){throw t}function di(t,e,n){return e.parse("/")}function fi(t,e){return Object(Ft.a)(null)}let pi=(()=>{class t{constructor(t,e,n,i,o,s,a,c){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new Lt.a,this.errorHandler=hi,this.malformedUriErrorHandler=di,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:fi,afterPreactivation:fi},this.urlHandlingStrategy=new li,this.routeReuseStrategy=new oi,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.x),this.console=o.get(r.Z);const u=o.get(r.z);this.isNgZoneEnabled=u instanceof r.z&&r.z.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=new Cn(new Sn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ai(s,a,t=>this.triggerEvent(new Je(t)),t=>this.triggerEvent(new tn(t))),this.routerState=Qn(this.currentUrlTree,this.rootComponentType),this.transitions=new qt({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(be(t=>0!==t.id),Object(oe.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),ae(t=>{let n=!1,r=!1;return Object(Ft.a)(t).pipe(Object(Le.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ae(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(Ft.a)(t).pipe(ae(t=>{const n=this.transitions.getValue();return e.next(new He(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?re.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,ae(t=>function(t,e,n,r,i){return new Br(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(oe.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(Le.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(Oe.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new Zr(t,e,n,r,i,o).recognize();return null===s?Xr(new Yr):Object(Ft.a)(s)}catch(a_){return Xr(a_)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(oe.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(Le.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new Qe(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new He(n,this.serializeUrl(r),i,o);e.next(a);const c=Qn(r,this.rootComponentType).snapshot;return Object(Ft.a)(Object.assign(Object.assign({},t),{targetSnapshot:c,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),re.a}),ii(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Le.a)(t=>{const e=new $e(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(oe.a)(t=>Object.assign(Object.assign({},t),{guards:Wr(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(Oe.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(Ft.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(Mt.a)(t).pipe(Object(Oe.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(Ft.a)(!0);const s=o.map(o=>{const s=Gr(o,e,i);let a;if(function(t){return t&&vr(t.canDeactivate)}(s))a=yn(s.canDeactivate(t,e,n,r));else{if(!vr(s))throw new Error("Invalid CanDeactivate guard");a=yn(s(t,e,n,r))}return a.pipe(Fe())});return Object(Ft.a)(s).pipe(Sr())}(t.component,t.route,n,e,r)),Fe(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(Oe.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(Mt.a)(e).pipe(Ee(e=>ne(function(t,e){return null!==t&&e&&e(new en(t)),Object(Ft.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new rn(t)),Object(Ft.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>ie(()=>{const i=e.guards.map(i=>{const o=Gr(i,e.node,n);let s;if(function(t){return t&&vr(t.canActivateChild)}(o))s=yn(o.canActivateChild(r,t));else{if(!vr(o))throw new Error("Invalid CanActivateChild guard");s=yn(o(r,t))}return s.pipe(Fe())});return Object(Ft.a)(i).pipe(Sr())}));return Object(Ft.a)(i).pipe(Sr())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(Ft.a)(!0);const i=r.map(r=>ie(()=>{const i=Gr(r,e,n);let o;if(function(t){return t&&vr(t.canActivate)}(i))o=yn(i.canActivate(e,t));else{if(!vr(i))throw new Error("Invalid CanActivate guard");o=yn(i(e,t))}return o.pipe(Fe())}));return Object(Ft.a)(i).pipe(Sr())}(t,e.route,n))),Fe(t=>!0!==t,!0))}(r,o,t,e):Object(Ft.a)(n)),Object(oe.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(Le.a)(t=>{if(wr(t.guardsResult)){const e=ln(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Ye(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),be(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new We(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),ii(t=>{if(t.guards.canActivateChecks.length)return Object(Ft.a)(t).pipe(Object(Le.a)(t=>{const e=new Xe(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),ae(t=>{let n=!1;return Object(Ft.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(Oe.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(Ft.a)(t);let o=0;return Object(Mt.a)(n).pipe(Ee(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(Ft.a)({});const o={};return Object(Mt.a)(i).pipe(Object(Oe.a)(i=>function(t,e,n,r){const i=Gr(t,e,r);return yn(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(Le.a)(t=>{o[i]=t}))),xe(1),Object(Oe.a)(()=>Object.keys(o).length===i.length?Object(Ft.a)(o):re.a))}(t._resolve,t,e,r).pipe(Object(oe.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Yn(t,n).resolve),null)))}(t.route,e,r,i)),Object(Le.a)(()=>o++),xe(1),Object(Oe.a)(e=>o===n.length?Object(Ft.a)(t):re.a))})),Object(Le.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new We(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(Le.a)(t=>{const e=new Ze(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),ii(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(oe.a)(t=>{const e=function(t,e,n){const r=rr(t,e._root,n?n._root:void 0);return new Gn(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(Le.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,o=this.routeReuseStrategy,s=t=>this.triggerEvent(t),Object(oe.a)(t=>(new yr(o,t.targetRouterState,t.currentRouterState,s).activate(i),t))),Object(Le.a)({next(){n=!0},complete(){n=!0}}),qe(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new We(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),we(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=wr(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new We(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Ge(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(jl){t.reject(jl)}}var i;return re.a}));var i,o,s}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Er(t),this.config=t.map(Tr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,c=s?this.currentUrlTree.fragment:i;let u=null;switch(o){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}return null!==u&&(u=this.removeEmptyProps(u)),function(t,e,n,r,i){if(0===n.length)return ar(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new ur(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return gn(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new ur(n,e,r)}(n);if(o.toRoot())return ar(e.root,new Sn([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new lr(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new lr(t,t===e.root,0)}const r=or(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new lr(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?dr(s.segmentGroup,s.index,o.commands):hr(s.segmentGroup,s.index,o.commands);return ar(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,u,c)}navigateByUrl(t,e={skipLocationChange:!1}){const n=wr(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(a_){e=this.malformedUriErrorHandler(a_,this.urlSerializer,t)}return e}isActive(t,e){if(wr(t))return bn(this.currentUrlTree,t,e);const n=this.parseUrl(t);return bn(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Ke(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let c,u,l;i?(c=i.resolve,u=i.reject,l=i.promise):l=new Promise((t,e)=>{c=t,u=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.N),r.Tb(xn),r.Tb(ui),r.Tb(C),r.Tb(r.r),r.Tb(r.w),r.Tb(r.i),r.Tb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),mi=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new Lt.a,this.subscription=t.events.subscribe(t=>{t instanceof Ke&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:gi(this.skipLocationChange),replaceUrl:gi(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:gi(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(pi),r.Kb($n),r.Kb(y))},t.\u0275dir=r.Fb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Wb("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Sb("href",e.href,r.nc),r.Bb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[r.yb]}),t})();function gi(t){return""===t||!!t}let yi=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||an,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new bi(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(ui),r.Kb(r.Q),r.Kb(r.j),r.Ub("name"),r.Kb(r.h))},t.\u0275dir=r.Fb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class bi{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===$n?this.route:t===ui?this.childContexts:this.parent.get(t,e)}}class _i{}class vi{preload(t,e){return Object(Ft.a)(null)}}let wi=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new ai(e,n,e=>t.triggerEvent(new Je(e)),e=>t.triggerEvent(new tn(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(be(t=>t instanceof Ke),Ee(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.x);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(Mt.a)(n).pipe(Object(ee.a)(),Object(oe.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(Oe.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(pi),r.Tb(r.w),r.Tb(r.i),r.Tb(r.r),r.Tb(_i))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Ci=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof He?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ke&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof sn&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new sn(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(pi),r.Tb(nt),r.Tb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const Si=new r.q("ROUTER_CONFIGURATION"),Oi=new r.q("ROUTER_FORROOT_GUARD"),Ei=[C,{provide:xn,useClass:kn},{provide:pi,useFactory:function(t,e,n,r,i,o,a,c={},u,l){const h=new pi(null,t,e,n,r,i,o,pn(a));if(u&&(h.urlHandlingStrategy=u),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(c,h),c.enableTracing){const t=s();h.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[xn,ui,C,r.r,r.w,r.i,si,Si,[class{},new r.A],[class{},new r.A]]},ui,{provide:$n,useFactory:function(t){return t.routerState.root},deps:[pi]},{provide:r.w,useClass:r.K},wi,vi,class{preload(t,e){return e().pipe(we(()=>Object(Ft.a)(null)))}},{provide:Si,useValue:{enableTracing:!1}}];function xi(){return new r.y("Router",pi)}let ki=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Ei,Pi(e),{provide:Oi,useFactory:Ai,deps:[[pi,new r.A,new r.J]]},{provide:Si,useValue:n||{}},{provide:y,useFactory:Ii,deps:[c,[new r.p(_),new r.A],Si]},{provide:Ci,useFactory:Ti,deps:[pi,nt,Si]},{provide:_i,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:vi},{provide:r.y,multi:!0,useFactory:xi},[Ri,{provide:r.d,multi:!0,useFactory:ji,deps:[Ri]},{provide:Ni,useFactory:Di,deps:[Ri]},{provide:r.b,multi:!0,useExisting:Ni}]]}}static forChild(e){return{ngModule:t,providers:[Pi(e)]}}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)(r.Tb(Oi,8),r.Tb(pi,8))}}),t})();function Ti(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Ci(t,e,n)}function Ii(t,e,n={}){return n.useHash?new w(t,e):new v(t,e)}function Ai(t){return"guarded"}function Pi(t){return[{provide:r.a,multi:!0,useValue:t},{provide:si,multi:!0,useValue:t}]}let Ri=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new Lt.a}appInitializer(){return this.injector.get(l,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(pi),r=this.injector.get(Si);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(Ft.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Si),n=this.injector.get(wi),i=this.injector.get(Ci),o=this.injector.get(pi),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.r))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function ji(t){return t.appInitializer.bind(t)}function Di(t){return t.bootstrapListener.bind(t)}const Ni=new r.q("Router Initializer");let Mi=(()=>{class t{constructor(){this.title="notes",this.convertedText="",this.prettyJson=""}ngOnInit(){}formatJson(t){try{this.convertedText=JSON.parse(t);const e=JSON.stringify(this.convertedText,null,3);this.prettyJson=e.replaceAll("\n","\n \n")}catch(e){this.prettyJson=e.toString()}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-format-json"]],decls:11,vars:1,consts:[[1,"format-container"],[1,"textbox-left"],["id","jsonInput","placeholder","Raw Json..",1,"json-textarea"],["inputBox",""],[1,"formatbtn",3,"click"],[1,"textbox-right"],["readonly","","id","jsonOutput","placeholder","Output",1,"json-textarea",3,"value"],["outputbox",""]],template:function(t,e){if(1&t){const t=r.Qb();r.Pb(0,"div",0),r.Pb(1,"div",1),r.Lb(2,"textarea",2,3),r.Ob(),r.Pb(4,"div"),r.Pb(5,"button",4),r.Wb("click",function(){r.mc(t);const n=r.jc(3);return e.formatJson(n.value)}),r.Pb(6,"span"),r.vc(7,"Format"),r.Ob(),r.Ob(),r.Ob(),r.Pb(8,"div",5),r.Lb(9,"textarea",6,7),r.Ob(),r.Ob()}2&t&&(r.Ab(9),r.gc("value",e.prettyJson))},styles:['@charset "UTF-8";.format-container[_ngcontent-%COMP%]{margin-top:36px;padding-top:36px;display:flex;height:720px}.formatbtn[_ngcontent-%COMP%]{top:35%;background-color:#7b38d8;border-radius:8px;border:1px double #ccc;color:#eee;text-align:center;font-size:16px;padding:12px;transition:all .5s;margin:5px}.formatbtn[_ngcontent-%COMP%], .formatbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;display:inline-block;cursor:pointer}.formatbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transition:.5s}.formatbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:"\xbb";position:absolute;opacity:0;top:0;right:-20px;transition:.5s}.formatbtn[_ngcontent-%COMP%]:hover{background-color:#34165d}.formatbtn[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{padding-right:25px}.formatbtn[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]:after{opacity:1;right:0}.textbox-left[_ngcontent-%COMP%]{flex:100%}.textbox-left[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border:5px double rgba(89,89,155,.9803921569)}.textbox-right[_ngcontent-%COMP%]{flex:100%}.textbox-right[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{float:right;outline:none}.json-textarea[_ngcontent-%COMP%]{font-family:dejavu sans mono,droid sans mono,consolas,monaco,lucida console,courier new,courier,monospace,sans-serif;resize:none;height:100%;width:90%;border-radius:8px;border:4px double rgba(151,151,195,.9803921568627451);color:#000;font-size:16px;padding:16px 16px 16px 32px;outline:none}']}),t})();function Fi(t,e){if(1&t){const t=r.Qb();r.Lb(0,"img",6),r.Pb(1,"button",7),r.Wb("click",function(){r.mc(t);const n=e.index;return r.ac().deleteImage(n)}),r.Pb(2,"span"),r.vc(3,"Delete"),r.Ob(),r.Ob()}2&t&&r.gc("src",e.$implicit,r.nc)}let Li=(()=>{class t{constructor(t,e){this.changeDetector=e,this.savedText="",this.sanitizer=t,this.imageUrls=[]}ngOnInit(){this.imageUrls=JSON.parse(localStorage.getItem("imageUrls")||""),this.savedText=localStorage.getItem("savedText")||""}onPaste(t){var e=this.getPastedImage(t);if(!e)return;this.imageUrls.unshift(this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(e)));const n=JSON.stringify(this.imageUrls);localStorage.setItem("imageUrls",n),this.changeDetector.detectChanges()}deleteImage(t){this.imageUrls.splice(t,1);const e=JSON.stringify(this.imageUrls);localStorage.setItem("imageUrls",e),this.changeDetector.detectChanges()}saveText(t){this.savedText=t,localStorage.setItem("savedText",this.savedText)}getPastedImage(t){return t.clipboardData&&t.clipboardData.files&&t.clipboardData.files.length&&this.isImageFile(t.clipboardData.files[0])?t.clipboardData.files[0]:null}isImageFile(t){return 0===t.type.search(/^image\//i)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(At),r.Kb(r.h))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-notes"]],hostBindings:function(t,e){1&t&&r.Wb("paste",function(t){return e.onPaste(t)},!1,r.lc)},decls:6,vars:2,consts:[[1,"notes-container"],[1,"notebox"],["placeholder","Whats On Your Mind..?",1,"json-textarea",3,"value","input"],["textbox",""],[1,"image-container"],["ngFor","",3,"ngForOf"],["width","100%",1,"image",3,"src"],[1,"deletebtn",3,"click"]],template:function(t,e){if(1&t){const t=r.Qb();r.Pb(0,"div",0),r.Pb(1,"div",1),r.Pb(2,"textarea",2,3),r.Wb("input",function(){r.mc(t);const n=r.jc(3);return e.saveText(n.value)}),r.Ob(),r.Ob(),r.Pb(4,"div",4),r.uc(5,Fi,4,1,"ng-template",5),r.Ob(),r.Ob()}2&t&&(r.Ab(2),r.gc("value",e.savedText),r.Ab(3),r.gc("ngForOf",e.imageUrls))},directives:[L],styles:[".notes-container[_ngcontent-%COMP%]{margin-top:36px;padding-top:36px;display:flex;min-height:720px}.notebox[_ngcontent-%COMP%]{flex:70%}.notebox[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-family:dejavu sans mono,droid sans mono,consolas,monaco,lucida console,courier new,courier,monospace,sans-serif;resize:none;min-height:100%;width:94%;border-radius:8px;border:4px double rgba(151,151,195,.9803921568627451);color:#000;font-size:16px;padding:16px 16px 16px 32px;outline:none;box-sizing:border-box}.notebox[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border:5px double rgba(89,89,155,.9803921569)}.image-container[_ngcontent-%COMP%]{flex:30%;min-height:110%;border-radius:8px;border:4px double rgba(151,151,195,.9803921568627451);color:#978acf;font-size:16px;padding:8px;outline:none}.image-container[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{border:2px double rgba(34,34,36,.5882352941176471)}.image-container[_ngcontent-%COMP%]   .deletebtn[_ngcontent-%COMP%]{position:relative;top:-5.4%;left:85%;display:inline-block;background-color:rgba(48,11,100,.2196078431372549);border-radius:4px;border:1px hsla(0,0%,80%,.26666666666666666);color:hsla(0,0%,93.3%,.2549019607843137);text-align:center;font-size:16px;padding:4px;transition:all .5s;cursor:pointer;margin:5px}.image-container[_ngcontent-%COMP%]   .deletebtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer;display:inline-block;position:relative;transition:.5s}.image-container[_ngcontent-%COMP%]   .deletebtn[_ngcontent-%COMP%]:hover{background-color:rgba(82,43,136,.7725490196078432);color:#fff}.image-container[_ngcontent-%COMP%]   .deletebtn[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]:after{opacity:1;right:0}"]}),t})();var Vi=n("D0XW");function qi(){return t=>t.lift(new Ui)}class Ui{call(t,e){return e.subscribe(new Bi(t))}}class Bi extends zt.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function zi(t,e){return n=>n.lift(new Hi(t,e))}class Hi{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Ki(t,this.compare,this.keySelector))}}class Ki extends zt.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var Wi=n("pxpQ"),Gi=n("spgP"),Qi=n("Jgta"),$i=n("zIRd"),Yi=n("qOnz"),Xi=n("q/0M"),Zi=function(t,e){return(Zi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Ji(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var to,eo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},no=no||{},ro=eo||self;function io(){}function oo(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function so(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ao="closure_uid_"+(1e9*Math.random()>>>0),co=0;function uo(t,e,n){return t.call.apply(t.bind,arguments)}function lo(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ho(t,e,n){return(ho=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?uo:lo).apply(null,arguments)}function fo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function po(){return Date.now()}function mo(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function go(){this.j=this.j,this.i=this.i}go.prototype.j=!1,go.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,ao)&&t[ao]||(t[ao]=++co)}(this)},go.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var yo=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},bo=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function _o(t){return Array.prototype.concat.apply([],arguments)}function vo(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function wo(t){return/^[\s\xa0]*$/.test(t)}var Co,So=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Oo(t,e){return-1!=t.indexOf(e)}function Eo(t,e){return t<e?-1:t>e?1:0}t:{var xo=ro.navigator;if(xo){var ko=xo.userAgent;if(ko){Co=ko;break t}}Co=""}function To(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Io(t){var e={};for(var n in t)e[n]=t[n];return e}var Ao="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Po(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Ao.length;o++)n=Ao[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ro(t){return Ro[" "](t),t}Ro[" "]=io;var jo,Do,No=Oo(Co,"Opera"),Mo=Oo(Co,"Trident")||Oo(Co,"MSIE"),Fo=Oo(Co,"Edge"),Lo=Fo||Mo,Vo=Oo(Co,"Gecko")&&!(Oo(Co.toLowerCase(),"webkit")&&!Oo(Co,"Edge"))&&!(Oo(Co,"Trident")||Oo(Co,"MSIE"))&&!Oo(Co,"Edge"),qo=Oo(Co.toLowerCase(),"webkit")&&!Oo(Co,"Edge");function Uo(){var t=ro.document;return t?t.documentMode:void 0}t:{var Bo="",zo=(Do=Co,Vo?/rv:([^\);]+)(\)|;)/.exec(Do):Fo?/Edge\/([\d\.]+)/.exec(Do):Mo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Do):qo?/WebKit\/(\S+)/.exec(Do):No?/(?:Version)[ \/]?(\S+)/.exec(Do):void 0);if(zo&&(Bo=zo?zo[1]:""),Mo){var Ho=Uo();if(null!=Ho&&Ho>parseFloat(Bo)){jo=String(Ho);break t}}jo=Bo}var Ko={};function Wo(t){return function(t,e){var n=Ko;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=So(String(jo)).split("."),r=So(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Eo(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Eo(0==s[2].length,0==a[2].length)||Eo(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var Go=ro.document&&Mo&&(Uo()||parseInt(jo,10))||void 0,Qo=!Mo||9<=Number(Go),$o=Mo&&!Wo("9"),Yo=function(){if(!ro.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ro.addEventListener("test",io,e),ro.removeEventListener("test",io,e)}catch(n){}return t}();function Xo(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Zo(t,e){if(Xo.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Vo){t:{try{Ro(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Jo[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Xo.prototype.b=function(){this.defaultPrevented=!0},mo(Zo,Xo);var Jo={2:"touch",3:"pen",4:"mouse"};Zo.prototype.b=function(){Zo.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,$o)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ts="closure_listenable_"+(1e6*Math.random()|0),es=0;function ns(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++es,this.Y=this.Z=!1}function rs(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function is(t){this.src=t,this.a={},this.b=0}function os(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=yo(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(rs(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ss(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}is.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ss(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ns(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var as="closure_lm_"+(1e6*Math.random()|0),cs={};function us(t,e,n,r,i){if(r&&r.once)return hs(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)us(t,e[o],n,r,i);return null}return n=_s(n),t&&t[ts]?t.va(e,n,so(r)?!!r.capture:!!r,i):ls(t,e,n,!1,r,i)}function ls(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=so(i)?!!i.capture:!!i;if(s&&!Qo)return null;var a=ys(t);if(a||(t[as]=a=new is(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=gs,e=Qo?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Yo||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ps(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function hs(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)hs(t,e[o],n,r,i);return null}return n=_s(n),t&&t[ts]?t.wa(e,n,so(r)?!!r.capture:!!r,i):ls(t,e,n,!0,r,i)}function ds(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ds(t,e[o],n,r,i);else r=so(r)?!!r.capture:!!r,n=_s(n),t&&t[ts]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=ss(o=t.a[e],n,r,i))&&(rs(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=ys(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ss(e,n,r,i)),(n=-1<t?e[t]:null)&&fs(n))}function fs(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ts])os(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ps(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ys(e))?(os(n,t),0==n.b&&(n.src=null,e[as]=null)):rs(t)}}}function ps(t){return t in cs?cs[t]:cs[t]="on"+t}function ms(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&fs(t),n.call(r,e)}function gs(t,e){if(t.Y)return!0;if(!Qo){if(!e)t:{e=["window","event"];for(var n=ro,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return ms(t,e=new Zo(e,this))}return ms(t,new Zo(e,this))}function ys(t){return(t=t[as])instanceof is?t:null}var bs="__closure_events_fn_"+(1e9*Math.random()>>>0);function _s(t){return"function"==typeof t?t:(t[bs]||(t[bs]=function(e){return t.handleEvent(e)}),t[bs])}function vs(){go.call(this),this.c=new is(this),this.J=this,this.C=null}function ws(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Xo(e,t);else if(e instanceof Xo)e.target=e.target||t;else{var i=e;Po(e=new Xo(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Cs(s,r,!0,e)&&i}if(i=Cs(s=e.a=t,r,!0,e)&&i,i=Cs(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Cs(s=e.a=n[o],r,!1,e)&&i}function Cs(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,c=s.ca||s.src;s.Z&&os(t.c,s),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}mo(vs,go),vs.prototype[ts]=!0,(to=vs.prototype).addEventListener=function(t,e,n,r){us(this,t,e,n,r)},to.removeEventListener=function(t,e,n,r){ds(this,t,e,n,r)},to.G=function(){if(vs.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)rs(n[r]);delete e.a[t],e.b--}}this.C=null},to.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},to.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ss=ro.JSON.stringify;function Os(){this.b=this.a=null}var Es,xs=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Ts},function(t){t.reset()});function ks(){var t=Rs,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ts(){this.next=this.b=this.a=null}function Is(t){ro.setTimeout(function(){throw t},0)}function As(t,e){Es||function(){var t=ro.Promise.resolve(void 0);Es=function(){t.then(js)}}(),Ps||(Es(),Ps=!0),Rs.add(t,e)}Os.prototype.add=function(t,e){var n=xs.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ts.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Ts.prototype.reset=function(){this.next=this.b=this.a=null};var Ps=!1,Rs=new Os;function js(){for(var t;t=ks();){try{t.a.call(t.b)}catch(n){Is(n)}var e=xs;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Ps=!1}function Ds(t,e){vs.call(this),this.b=t||1,this.a=e||ro,this.f=ho(this.Za,this),this.g=po()}function Ns(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Ms(t,e,n){if("function"==typeof t)n&&(t=ho(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ho(t.handleEvent,t)}return 2147483647<Number(e)?-1:ro.setTimeout(t,e||0)}function Fs(t){t.a=Ms(function(){t.a=null,t.c&&(t.c=!1,Fs(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}mo(Ds,vs),(to=Ds.prototype).aa=!1,to.M=null,to.Za=function(){if(this.aa){var t=po()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),ws(this,"tick"),this.aa&&(Ns(this),this.start()))}},to.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=po())},to.G=function(){Ds.X.G.call(this),Ns(this),delete this.a};var Ls=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Zi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Fs(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(ro.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(go);function Vs(t){go.call(this),this.b=t,this.a={}}mo(Vs,go);var qs=[];function Us(t,e,n,r){Array.isArray(n)||(n&&(qs[0]=n.toString()),n=qs);for(var i=0;i<n.length;i++){var o=us(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Bs(t){To(t.a,function(t,e){this.a.hasOwnProperty(e)&&fs(t)},t),t.a={}}function zs(){this.a=!0}function Hs(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Ss(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Vs.prototype.G=function(){Vs.X.G.call(this),Bs(this)},Vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zs.prototype.info=function(){};var Ks={},Ws=null;function Gs(){return Ws=Ws||new vs}function Qs(t){Xo.call(this,Ks.Fa,t)}function $s(t){var e=Gs();ws(e,new Qs(e,t))}function Ys(t,e){Xo.call(this,Ks.STAT_EVENT,t),this.stat=e}function Xs(t){var e=Gs();ws(e,new Ys(e,t))}function Zs(t){Xo.call(this,Ks.Ga,t)}function Js(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ro.setTimeout(function(){t()},e)}Ks.Fa="serverreachability",mo(Qs,Xo),Ks.STAT_EVENT="statevent",mo(Ys,Xo),Ks.Ga="timingevent",mo(Zs,Xo);var ta={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ea={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function na(){}function ra(){}na.prototype.a=null;var ia,oa={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function sa(){Xo.call(this,"d")}function aa(){Xo.call(this,"c")}function ca(){}function ua(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Vs(this),this.P=la,this.R=new Ds(t=Lo?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}mo(sa,Xo),mo(aa,Xo),mo(ca,na),ia=new ca;var la=45e3,ha={},da={};function fa(t,e,n){t.H=1,t.i=Na(Ia(e)),t.j=n,t.I=!0,pa(t,null)}function pa(t,e){t.u=po(),ya(t),t.l=Ia(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Qa(n.b,"t",r),t.D=0,t.a=Bc(t.g,t.g.C?e:null),0<t.O&&(t.F=new Ls(ho(t.Ca,t,t.a),t.O)),Us(t.J,t.a,"readystatechange",t.Xa),e=t.B?Io(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),$s(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+u+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function ma(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=ga(t,n);if(i==da){4==e&&(t.h=4,Xs(14),r=!1),Hs(t.c,t.f,null,"[Incomplete Response]");break}if(i==ha){t.h=4,Xs(15),Hs(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Hs(t.c,t.f,i,null),Ca(t,i)}4==e&&0==n.length&&(t.h=1,Xs(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Dc(e),e.F=!0,Xs(11))):(Hs(t.c,t.f,n,"[Invalid Chunked Response]"),wa(t),va(t))}function ga(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?da:(n=Number(e.substring(n,r)),isNaN(n)?ha:(r+=1)+n>e.length?da:(e=e.substr(r,n),t.D=r+n,e))}function ya(t){t.T=po()+t.P,ba(t,t.P)}function ba(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Js(ho(t.Va,t),e)}function _a(t){t.o&&(ro.clearTimeout(t.o),t.o=null)}function va(t){0==t.g.v||t.A||Fc(t.g,t)}function wa(t){_a(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ns(t.R),Bs(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ca(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||ec(n.b,t)))if(n.I=t.N,!t.C&&ec(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Ob){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Mc(n),Ec(n)}jc(n),Xs(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Js(ho(n.Sa,n),6e3));if(1>=tc(n.b)&&n.ea){try{n.ea()}catch(Ob){}n.ea=void 0}}else Vc(n,11)}else if((t.C||n.a==t)&&Mc(n),!wo(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var c=1.5*a;n.D=c,n.c.info("backChannelRequestTimeoutMs_="+c)}c=n;var u=t.a;if(u){var l=u.a?u.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=c.b;!h.a&&(Oo(l,"spdy")||Oo(l,"quic")||Oo(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(nc(h,h.b),h.b=null))}if(c.A){var d=u.a?u.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(c.na=d,Da(c.B,c.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=po()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((c=n).la=Uc(c,c.C?c.ga:null,c.fa),f.C){rc(c.b,f);var p=f,m=c.D;m&&p.setTimeout(m),p.o&&(_a(p),ya(p)),c.a=f}else Rc(c);0<n.g.length&&Tc(n)}else"stop"!=i[0]&&"close"!=i[0]||Vc(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Vc(n,7):Oc(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);$s(4)}catch(Ob){}}function Sa(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(oo(t)||"string"==typeof t)bo(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(oo(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(oo(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Oa(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Oa)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ea(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];xa(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)xa(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function xa(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(to=ua.prototype).setTimeout=function(t){this.P=t},to.Xa=function(t){t=t.target;var e=this.F;e&&3==vc(t)?e.f():this.Ca(t)},to.Ca=function(t){try{if(t==this.a)t:{var e=vc(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Lo&&!this.a.$())){this.A||4!=e||7==n||$s(8==n||0>=r?3:2),_a(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!wo(s)){var c=s;break e}}c=null}if(!c){this.b=!1,this.h=3,Xs(12),wa(this),va(this);break t}Hs(this.c,this.f,c,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ca(this,c)}this.I?(ma(this,e,o),Lo&&this.b&&3==e&&(Us(this.J,this.R,"tick",this.Wa),this.R.start())):(Hs(this.c,this.f,o,null),Ca(this,o)),4==e&&wa(this),this.b&&!this.A&&(4==e?Fc(this.g,this):(this.b=!1,ya(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Xs(12)):(this.h=0,Xs(13)),wa(this),va(this)}}}catch(u){}},to.Wa=function(){if(this.a){var t=vc(this.a),e=this.a.$();this.D<e.length&&(_a(this),ma(this,t,e),this.b&&4!=t&&ya(this))}},to.cancel=function(){this.A=!0,wa(this)},to.Va=function(){this.o=null;var t=po();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&($s(3),Xs(17)),wa(this),this.h=2,va(this)):ba(this,this.T-t)},(to=Oa.prototype).K=function(){Ea(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},to.L=function(){return Ea(this),this.a.concat()},to.get=function(t,e){return xa(this.b,t)?this.b[t]:e},to.set=function(t,e){xa(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},to.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ka=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ta(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Ta){this.a=void 0!==e?e:t.a,Aa(this,t.f),this.j=t.j,Pa(this,t.c),Ra(this,t.h),this.g=t.g,e=t.b;var n=new Ha;n.c=e.c,e.a&&(n.a=new Oa(e.a),n.b=e.b),ja(this,n),this.i=t.i}else t&&(n=String(t).match(ka))?(this.a=!!e,Aa(this,n[1]||"",!0),this.j=Ma(n[2]||""),Pa(this,n[3]||"",!0),Ra(this,n[4]),this.g=Ma(n[5]||"",!0),ja(this,n[6]||"",!0),this.i=Ma(n[7]||"")):(this.a=!!e,this.b=new Ha(null,this.a))}function Ia(t){return new Ta(t)}function Aa(t,e,n){t.f=n?Ma(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Pa(t,e,n){t.c=n?Ma(e,!0):e}function Ra(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function ja(t,e,n){e instanceof Ha?(t.b=e,function(t,e){e&&!t.f&&(Ka(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Wa(this,e),Qa(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Fa(e,Ba)),t.b=new Ha(e,t.a))}function Da(t,e,n){t.b.set(e,n)}function Na(t){return Da(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^po()).toString(36)),t}function Ma(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Fa(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,La),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function La(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ta.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Fa(e,Va,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Fa(e,Va,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Fa(n,"/"==n.charAt(0)?Ua:qa,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Fa(n,za)),t.join("")};var Va=/[#\/\?@]/g,qa=/[#\?:]/g,Ua=/[#\?]/g,Ba=/[#\?@]/g,za=/#/g;function Ha(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ka(t){t.a||(t.a=new Oa,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Wa(t,e){Ka(t),e=$a(t,e),xa(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,xa((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ea(t)))}function Ga(t,e){return Ka(t),e=$a(t,e),xa(t.a.b,e)}function Qa(t,e,n){Wa(t,e),0<n.length&&(t.c=null,t.a.set($a(t,e),vo(n)),t.b+=n.length)}function $a(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(to=Ha.prototype).add=function(t,e){Ka(this),this.c=null,t=$a(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},to.forEach=function(t,e){Ka(this),this.a.forEach(function(n,r){bo(n,function(n){t.call(e,n,r,this)},this)},this)},to.L=function(){Ka(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},to.K=function(t){Ka(this);var e=[];if("string"==typeof t)Ga(this,t)&&(e=_o(e,this.a.get($a(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=_o(e,t[n])}return e},to.set=function(t,e){return Ka(this),this.c=null,Ga(this,t=$a(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},to.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},to.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Ya=function(){return function(t,e){this.b=t,this.a=e}}();function Xa(t){this.g=t||Za,t=ro.PerformanceNavigationTiming?0<(t=ro.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(ro.ia&&ro.ia.ya&&ro.ia.ya()&&ro.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Za=10;function Ja(t){return!!t.b||!!t.a&&t.a.size>=t.f}function tc(t){return t.b?1:t.a?t.a.size:0}function ec(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function nc(t,e){t.a?t.a.add(e):t.b=e}function rc(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function ic(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Ji(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return vo(t.c)}function oc(){}function sc(){this.a=new oc}function ac(t,e,n){var r=n||"";try{Sa(t,function(t,n){var i=t;so(t)&&(i=Ss(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(a_){throw e.push(r+"type="+encodeURIComponent("_badmap")),a_}}function cc(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Xa.prototype.cancel=function(){var t,e;if(this.c=ic(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Ji(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},oc.prototype.stringify=function(t){return ro.JSON.stringify(t,void 0)},oc.prototype.parse=function(t){return ro.JSON.parse(t,void 0)};var uc=ro.JSON.parse;function lc(t){vs.call(this),this.headers=new Oa,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=hc,this.D=this.F=!1}mo(lc,vs);var hc="",dc=/^https?$/i,fc=["POST","PUT"];function pc(t){return"content-type"==t.toLowerCase()}function mc(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,gc(t),bc(t)}function gc(t){t.u||(t.u=!0,ws(t,"complete"),ws(t,"error"))}function yc(t){if(t.b&&void 0!==no&&(!t.s[1]||4!=vc(t)||2!=t.W()))if(t.l&&4==vc(t))Ms(t.za,0,t);else if(ws(t,"readystatechange"),4==vc(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(ka)[1]||null;if(!o&&ro.self&&ro.self.location){var s=ro.self.location.protocol;o=s.substr(0,s.length-1)}i=!dc.test(o?o.toLowerCase():"")}e=i}if(e)ws(t,"complete"),ws(t,"success");else{t.h=6;try{var a=2<vc(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",gc(t)}}finally{bc(t)}}}function bc(t,e){if(t.a){_c(t);var n=t.a,r=t.s[0]?io:null;t.a=null,t.s=null,e||ws(t,"ready");try{n.onreadystatechange=r}catch(a_){}}}function _c(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(ro.clearTimeout(t.m),t.m=null)}function vc(t){return t.a?t.a.readyState:0}function wc(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return To(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Da(t,e,n))}function Cc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Sc(t){this.pa=0,this.g=[],this.c=new zs,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Cc("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Cc("baseRetryDelayMs",5e3,t),this.Ra=Cc("retryDelaySeedMs",1e4,t),this.Ma=Cc("forwardChannelMaxRetries",2,t),this.ma=Cc("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Xa(t&&t.concurrentRequestLimit),this.ka=new sc,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Oc(t){if(xc(t),3==t.v){var e=t.R++,n=Ia(t.B);Da(n,"SID",t.J),Da(n,"RID",e),Da(n,"TYPE","terminate"),Ac(t,n),(e=new ua(t,t.c,e,void 0)).H=2,e.i=Na(Ia(n)),n=!1,ro.navigator&&ro.navigator.sendBeacon&&(n=ro.navigator.sendBeacon(e.i.toString(),"")),!n&&ro.Image&&((new Image).src=e.i,n=!0),n||(e.a=Bc(e.g,null),e.a.ba(e.i)),e.u=po(),ya(e)}qc(t)}function Ec(t){t.a&&(Dc(t),t.a.cancel(),t.a=null)}function xc(t){Ec(t),t.j&&(ro.clearTimeout(t.j),t.j=null),Mc(t),t.b.cancel(),t.h&&("number"==typeof t.h&&ro.clearTimeout(t.h),t.h=null)}function kc(t,e){t.g.push(new Ya(t.Oa++,e)),3==t.v&&Tc(t)}function Tc(t){Ja(t.b)||t.h||(t.h=!0,As(t.Ba,t),t.u=0)}function Ic(t,e){var n;n=e?e.f:t.R++;var r=Ia(t.B);Da(r,"SID",t.J),Da(r,"RID",n),Da(r,"AID",t.P),Ac(t,r),t.i&&t.l&&wc(r,t.i,t.l),n=new ua(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Pc(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),nc(t.b,n),fa(n,r,e)}function Ac(t,e){t.f&&Sa({},function(t,n){Da(e,n,t)})}function Pc(t,e,n){n=Math.min(t.g.length,n);var r=t.f?ho(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,c=0;c<n;c++){var u=i[c].b,l=i[c].a;if(0>(u-=o))o=Math.max(0,i[c].b-100),a=!1;else try{ac(l,s,"req"+u+"_")}catch(_u){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Rc(t){t.a||t.j||(t.T=1,As(t.Aa,t),t.o=0)}function jc(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Js(ho(t.Aa,t),Lc(t,t.o)),t.o++,0))}function Dc(t){null!=t.s&&(ro.clearTimeout(t.s),t.s=null)}function Nc(t){t.a=new ua(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Ia(t.la);Da(e,"RID","rpc"),Da(e,"SID",t.J),Da(e,"CI",t.H?"0":"1"),Da(e,"AID",t.P),Ac(t,e),Da(e,"TYPE","xmlhttp"),t.i&&t.l&&wc(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Na(Ia(e)),n.j=null,n.I=!0,pa(n,t)}function Mc(t){null!=t.m&&(ro.clearTimeout(t.m),t.m=null)}function Fc(t,e){var n=null;if(t.a==e){Mc(t),Dc(t),t.a=null;var r=2}else{if(!ec(t.b,e))return;n=e.s,rc(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=po()-e.u;var i=t.u;ws(r=Gs(),new Zs(r,n,e,i)),Tc(t)}else Rc(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(tc(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Js(ho(t.Ba,t,e),Lc(t,t.u)),t.u++,0)))}(t,e)||2==r&&jc(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Vc(t,5);break;case 4:Vc(t,10);break;case 3:Vc(t,6);break;default:Vc(t,2)}}function Lc(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Vc(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=ho(t.Ya,t);n||(n=new Ta("//www.google.com/images/cleardot.gif"),ro.location&&"http"==ro.location.protocol||Aa(n,"https"),Na(n)),function(t,e){var n=new zs;if(ro.Image){var r=new Image;r.onload=fo(cc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=fo(cc,n,r,"TestLoadImage: error",!1,e),r.onabort=fo(cc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=fo(cc,n,r,"TestLoadImage: timeout",!1,e),ro.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Xs(2);t.v=0,t.f&&t.f.ra(e),qc(t),xc(t)}function qc(t){t.v=0,t.I=-1,t.f&&(0==ic(t.b).length&&0==t.g.length||(t.b.c.length=0,vo(t.g),t.g.length=0),t.f.qa())}function Uc(t,e,n){var r=function(t){return t instanceof Ta?Ia(t):new Ta(t,void 0)}(n);if(""!=r.c)e&&Pa(r,e+"."+r.c),Ra(r,r.h);else{var i=ro.location;r=function(t,e,n,r){var i=new Ta(null,void 0);return t&&Aa(i,t),e&&Pa(i,e),n&&Ra(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&To(t.V,function(t,e){Da(r,e,t)}),n=t.na,(e=t.A)&&n&&Da(r,e,n),Da(r,"VER",t.ha),Ac(t,r),r}function Bc(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new lc(t.Na)).F=t.C,e}function zc(){}function Hc(){if(Mo&&!(10<=Number(Go)))throw Error("Environmental error: no available transport.")}function Kc(t,e){vs.call(this),this.a=new Sc(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!wo(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!wo(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Qc(this)}function Wc(t){sa.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Gc(){aa.call(this),this.status=1}function Qc(t){this.a=t}(to=lc.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:ia),this.a.onreadystatechange=ho(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void mc(this,o)}t=n||"";var i=new Oa(this.headers);r&&Sa(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=pc,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=ro.FormData&&t instanceof ro.FormData,!(0<=yo(fc,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{_c(this),0<this.o&&((this.D=function(t){return Mo&&Wo(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=ho(this.xa,this)):this.m=Ms(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){mc(this,o)}},to.xa=function(){void 0!==no&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,ws(this,"timeout"),this.abort(8))},to.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,ws(this,"complete"),ws(this,"abort"),bc(this))},to.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),bc(this,!0)),lc.X.G.call(this)},to.za=function(){this.j||(this.A||this.l||this.g?yc(this):this.Ua())},to.Ua=function(){yc(this)},to.W=function(){try{return 2<vc(this)?this.a.status:-1}catch(Do){return-1}},to.$=function(){try{return this.a?this.a.responseText:""}catch(Do){return""}},to.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),uc(e)}},to.ua=function(){return this.h},to.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(to=Sc.prototype).ha=8,to.v=1,to.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ua(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Po(r=Io(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Pc(this,n,e),Da(i=Ia(this.B),"RID",t),Da(i,"CVER",22),this.A&&Da(i,"X-HTTP-Session-Id",this.A),Ac(this,i),this.i&&r&&wc(i,this.i,r),nc(this.b,n),this.Ia&&Da(i,"TYPE","init"),this.da?(Da(i,"$req",e),Da(i,"SID","null"),n.U=!0,fa(n,i,null)):fa(n,i,e),this.v=2}}else 3==this.v&&(t?Ic(this,t):0==this.g.length||Ja(this.b)||Ic(this))},to.Aa=function(){if(this.j=null,Nc(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Js(ho(this.Ta,this),t)}},to.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Xs(10),Ec(this),Nc(this))},to.Sa=function(){null!=this.m&&(this.m=null,Ec(this),jc(this),Xs(19))},to.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Xs(2)):(this.c.info("Failed to ping google.com"),Xs(1))},(to=zc.prototype).ta=function(){},to.sa=function(){},to.ra=function(){},to.qa=function(){},to.Ja=function(){},Hc.prototype.a=function(t,e){return new Kc(t,e)},mo(Kc,vs),Kc.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Xs(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Uc(t,null,t.fa),Tc(t)},Kc.prototype.close=function(){Oc(this.a)},Kc.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,kc(this.a,e)}else this.l?((e={}).__data__=Ss(t),kc(this.a,e)):kc(this.a,t)},Kc.prototype.G=function(){this.a.f=null,delete this.f,Oc(this.a),delete this.a,Kc.X.G.call(this)},mo(Wc,sa),mo(Gc,aa),mo(Qc,zc),Qc.prototype.ta=function(){ws(this.a,"a")},Qc.prototype.sa=function(t){ws(this.a,new Wc(t))},Qc.prototype.ra=function(t){ws(this.a,new Gc(t))},Qc.prototype.qa=function(){ws(this.a,"b")},Hc.prototype.createWebChannel=Hc.prototype.a,Kc.prototype.send=Kc.prototype.h,Kc.prototype.open=Kc.prototype.g,Kc.prototype.close=Kc.prototype.close,ta.NO_ERROR=0,ta.TIMEOUT=8,ta.HTTP_ERROR=6,ea.COMPLETE="complete",ra.EventType=oa,oa.OPEN="a",oa.CLOSE="b",oa.ERROR="c",oa.MESSAGE="d",vs.prototype.listen=vs.prototype.va,lc.prototype.listenOnce=lc.prototype.wa,lc.prototype.getLastError=lc.prototype.Qa,lc.prototype.getLastErrorCode=lc.prototype.ua,lc.prototype.getStatus=lc.prototype.W,lc.prototype.getResponseJson=lc.prototype.Pa,lc.prototype.getResponseText=lc.prototype.$,lc.prototype.send=lc.prototype.ba;var $c=ta,Yc=ea,Xc=Ks,Zc=ra,Jc=lc,tu=n("mrSG"),eu=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();eu.o=-1;var nu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ru=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(tu.c)(e,t),e}(Error),iu=new Xi.b("@firebase/firestore");function ou(){return iu.logLevel}function su(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(iu.logLevel<=Xi.a.DEBUG){var r=e.map(uu);iu.debug.apply(iu,Object(tu.f)(["Firestore (8.5.0): "+t],r))}}function au(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(iu.logLevel<=Xi.a.ERROR){var r=e.map(uu);iu.error.apply(iu,Object(tu.f)(["Firestore (8.5.0): "+t],r))}}function cu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(iu.logLevel<=Xi.a.WARN){var r=e.map(uu);iu.warn.apply(iu,Object(tu.f)(["Firestore (8.5.0): "+t],r))}}function uu(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(a_){return t}}function lu(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.5.0) INTERNAL ASSERTION FAILED: "+t;throw au(e),new Error(e)}function hu(t,e){t||lu()}function du(t,e){return t}function fu(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var pu=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=fu(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function mu(t,e){return t<e?-1:t>e?1:0}function gu(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function yu(t){return t+"\0"}var bu=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ru(nu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ru(nu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ru(nu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ru(nu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?mu(this.nanoseconds,t.nanoseconds):mu(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),_u=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new bu(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function vu(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wu(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Cu(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Su=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&lu(),void 0===n?n=t.length-e:n>t.length-e&&lu(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Ou=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(tu.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new ru(nu.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Su),Eu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,xu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(tu.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Eu.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new ru(nu.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new ru(nu.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var c=t[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new ru(nu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ru(nu.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Su),ku=function(){function t(t){this.fields=t,t.sort(xu.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return gu(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Tu=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return mu(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Tu.EMPTY_BYTE_STRING=new Tu("");var Iu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Au(t){if(hu(!!t),"string"==typeof t){var e=0,n=Iu.exec(t);if(hu(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Pu(t.seconds),nanos:Pu(t.nanos)}}function Pu(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ru(t){return"string"==typeof t?Tu.fromBase64String(t):Tu.fromUint8Array(t)}function ju(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Du(t){var e=t.mapValue.fields.__previous_value__;return ju(e)?Du(e):e}function Nu(t){var e=Au(t.mapValue.fields.__local_write_time__.timestampValue);return new bu(e.seconds,e.nanos)}function Mu(t){return null==t}function Fu(t){return 0===t&&1/t==-1/0}function Lu(t){return"number"==typeof t&&Number.isInteger(t)&&!Fu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Vu=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Ou.fromString(e))},t.fromName=function(e){return new t(Ou.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Ou.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Ou.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Ou(e.slice()))},t}();function qu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ju(t)?4:10:lu()}function Uu(t,e){var n=qu(t);if(n!==qu(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nu(t).isEqual(Nu(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Au(t.timestampValue),r=Au(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ru(t.bytesValue).isEqual(Ru(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Pu(t.geoPointValue.latitude)===Pu(e.geoPointValue.latitude)&&Pu(t.geoPointValue.longitude)===Pu(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Pu(t.integerValue)===Pu(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Pu(t.doubleValue),r=Pu(e.doubleValue);return n===r?Fu(n)===Fu(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return gu(t.arrayValue.values||[],e.arrayValue.values||[],Uu);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(vu(n)!==vu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Uu(n[i],r[i])))return!1;return!0}(t,e);default:return lu()}}function Bu(t,e){return void 0!==(t.values||[]).find(function(t){return Uu(t,e)})}function zu(t,e){var n=qu(t),r=qu(e);if(n!==r)return mu(n,r);switch(n){case 0:return 0;case 1:return mu(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Pu(t.integerValue||t.doubleValue),r=Pu(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Hu(t.timestampValue,e.timestampValue);case 4:return Hu(Nu(t),Nu(e));case 5:return mu(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ru(t),r=Ru(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=mu(n[i],r[i]);if(0!==o)return o}return mu(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=mu(Pu(t.latitude),Pu(e.latitude));return 0!==n?n:mu(Pu(t.longitude),Pu(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=zu(n[i],r[i]);if(o)return o}return mu(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=mu(r[s],o[s]);if(0!==a)return a;var c=zu(n[r[s]],i[o[s]]);if(0!==c)return c}return mu(r.length,o.length)}(t.mapValue,e.mapValue);default:throw lu()}}function Hu(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return mu(t,e);var n=Au(t),r=Au(e),i=mu(n.seconds,r.seconds);return 0!==i?i:mu(n.nanos,r.nanos)}function Ku(t){return Wu(t)}function Wu(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Au(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ru(t.bytesValue).toBase64():"referenceValue"in t?Vu.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Wu(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Wu(t.fields[o])}return e+"}"}(t.mapValue):lu();var e}function Gu(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Qu(t){return!!t&&"integerValue"in t}function $u(t){return!!t&&"arrayValue"in t}function Yu(t){return!!t&&"nullValue"in t}function Xu(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zu(t){return!!t&&"mapValue"in t}var Ju=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(xu.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return Uu(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===qu(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=Zu(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)}),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(xu.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!Zu(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function tl(t){var e=[];return wu(t.fields||{},function(t,n){var r=new xu([t]);if(Zu(n)){var i=tl(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new ku(e)}var el=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,_u.min(),Ju.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Ju.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Ju.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Ju.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Ju.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),nl=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function rl(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new nl(t,e,n,r,i,o,s)}function il(t){var e=du(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Ku(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Mu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=yl(e.startAt)),e.endAt&&(n+="|ub:",n+=yl(e.endAt)),e.h=n}return e.h}function ol(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!_l(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Uu(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wl(t.startAt,e.startAt)&&wl(t.endAt,e.endAt)}function sl(t){return Vu.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var al=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(tu.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new cl(t,n,r):"array-contains"===n?new dl(t,r):"in"===n?new fl(t,r):"not-in"===n?new pl(t,r):"array-contains-any"===n?new ml(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new ul(t,n):new ll(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(zu(e,this.value)):null!==e&&qu(this.value)===qu(e)&&this.m(zu(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return lu()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),cl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Vu.fromName(r.referenceValue),i}return Object(tu.c)(e,t),e.prototype.matches=function(t){var e=Vu.comparator(t.key,this.key);return this.m(e)},e}(al),ul=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=hl(0,n),r}return Object(tu.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(al),ll=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=hl(0,n),r}return Object(tu.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(al);function hl(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Vu.fromName(t.referenceValue)})}var dl=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(tu.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return $u(e)&&Bu(e.arrayValue,this.value)},e}(al),fl=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(tu.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Bu(this.value.arrayValue,e)},e}(al),pl=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(tu.c)(e,t),e.prototype.matches=function(t){if(Bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Bu(this.value.arrayValue,e)},e}(al),ml=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(tu.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!$u(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Bu(e.value.arrayValue,t)})},e}(al),gl=function(t,e){this.position=t,this.before=e};function yl(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Ku(t)}).join(",")}var bl=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function _l(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function vl(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Vu.comparator(Vu.fromName(s.referenceValue),n.key):zu(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function wl(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Uu(t.position[n],e.position[n]))return!1;return!0}var Cl=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function Sl(t,e,n,r,i,o,s,a){return new Cl(t,e,n,r,i,o,s,a)}function Ol(t){return new Cl(t)}function El(t){return!Mu(t.limit)&&"F"===t.limitType}function xl(t){return!Mu(t.limit)&&"L"===t.limitType}function kl(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Tl(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Il(t){return null!==t.collectionGroup}function Al(t){var e=du(t);if(null===e.p){e.p=[];var n=Tl(e),r=kl(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new bl(n)),e.p.push(new bl(xu.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new bl(xu.keyField(),c))}}}return e.p}function Pl(t){var e=du(t);if(!e.T)if("F"===e.limitType)e.T=rl(e.path,e.collectionGroup,Al(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Al(e);r<i.length;r++){var o=i[r];n.push(new bl(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new gl(e.endAt.position,!e.endAt.before):null,a=e.startAt?new gl(e.startAt.position,!e.startAt.before):null;e.T=rl(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Rl(t,e,n){return new Cl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jl(t,e){return ol(Pl(t),Pl(e))&&t.limitType===e.limitType}function Dl(t){return il(Pl(t))+"|lt:"+t.limitType}function Nl(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Ku(e.value);var e}).join(", ")+"]"),Mu(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+yl(t.startAt)),t.endAt&&(e+=", endAt: "+yl(t.endAt)),"Target("+e+")"}(Pl(t))+"; limitType="+t.limitType+")"}function Ml(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Vu.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!vl(t.startAt,Al(t),e)||t.endAt&&vl(t.endAt,Al(t),e))}(t,e)}function Fl(t){return function(e,n){for(var r=!1,i=0,o=Al(t);i<o.length;i++){var s=o[i],a=Ll(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Ll(t,e,n){var r=t.field.isKeyField()?Vu.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?zu(r,i):lu()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return lu()}}function Vl(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fu(e)?"-0":e}}function ql(t){return{integerValue:""+t}}function Ul(t,e){return Lu(e)?ql(e):Vl(t,e)}var Bl=function(){this._=void 0};function zl(t,e,n){return t instanceof Wl?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Gl?Ql(t,e):t instanceof $l?Yl(t,e):function(t,e){var n=Kl(t,e),r=Zl(n)+Zl(t.A);return Qu(n)&&Qu(t.A)?ql(r):Vl(t.R,r)}(t,e)}function Hl(t,e,n){return t instanceof Gl?Ql(t,e):t instanceof $l?Yl(t,e):n}function Kl(t,e){return t instanceof Xl?Qu(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Wl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(tu.c)(e,t),e}(Bl),Gl=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(tu.c)(e,t),e}(Bl);function Ql(t,e){for(var n=Jl(e),r=function(t){n.some(function(e){return Uu(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var $l=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(tu.c)(e,t),e}(Bl);function Yl(t,e){for(var n=Jl(e),r=function(t){n=n.filter(function(e){return!Uu(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Xl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(tu.c)(e,t),e}(Bl);function Zl(t){return Pu(t.integerValue||t.doubleValue)}function Jl(t){return $u(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var th=function(t,e){this.field=t,this.transform=e},eh=function(t,e){this.version=t,this.transformResults=e},nh=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function rh(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var ih=function(){};function oh(t,e,n){t instanceof lh?function(t,e,n){var r=t.value.clone(),i=fh(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof hh?function(t,e,n){if(rh(t.precondition,e)){var r=fh(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(dh(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function sh(t,e,n){t instanceof lh?function(t,e,n){if(rh(t.precondition,e)){var r=t.value.clone(),i=ph(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(uh(e),r).setHasLocalMutations()}}(t,e,n):t instanceof hh?function(t,e,n){if(rh(t.precondition,e)){var r=ph(t.fieldTransforms,n,e),i=e.data;i.setAll(dh(t)),i.setAll(r),e.convertToFoundDocument(uh(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){rh(t.precondition,e)&&e.convertToNoDocument(_u.min())}(t,e)}function ah(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Kl(o.transform,s||null);null!=a&&(null==n&&(n=Ju.empty()),n.set(o.field,a))}return n||null}function ch(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&gu(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Gl&&e instanceof Gl||t instanceof $l&&e instanceof $l?gu(t.elements,e.elements,Uu):t instanceof Xl&&e instanceof Xl?Uu(t.A,e.A):t instanceof Wl&&e instanceof Wl}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function uh(t){return t.isFoundDocument()?t.version:_u.min()}var lh=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(tu.c)(e,t),e}(ih),hh=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(tu.c)(e,t),e}(ih);function dh(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function fh(t,e,n){var r=new Map;hu(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Hl(s,a,n[i]))}return r}function ph(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,c=n.data.field(s.field);r.set(s.field,zl(a,c,e))}return r}var mh,gh,yh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(tu.c)(e,t),e}(ih),bh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(tu.c)(e,t),e}(ih),_h=function(t){this.count=t};function vh(t){switch(t){case nu.OK:return lu();case nu.CANCELLED:case nu.UNKNOWN:case nu.DEADLINE_EXCEEDED:case nu.RESOURCE_EXHAUSTED:case nu.INTERNAL:case nu.UNAVAILABLE:case nu.UNAUTHENTICATED:return!1;case nu.INVALID_ARGUMENT:case nu.NOT_FOUND:case nu.ALREADY_EXISTS:case nu.PERMISSION_DENIED:case nu.FAILED_PRECONDITION:case nu.ABORTED:case nu.OUT_OF_RANGE:case nu.UNIMPLEMENTED:case nu.DATA_LOSS:return!0;default:return lu()}}function wh(t){if(void 0===t)return au("GRPC error has no .code"),nu.UNKNOWN;switch(t){case mh.OK:return nu.OK;case mh.CANCELLED:return nu.CANCELLED;case mh.UNKNOWN:return nu.UNKNOWN;case mh.DEADLINE_EXCEEDED:return nu.DEADLINE_EXCEEDED;case mh.RESOURCE_EXHAUSTED:return nu.RESOURCE_EXHAUSTED;case mh.INTERNAL:return nu.INTERNAL;case mh.UNAVAILABLE:return nu.UNAVAILABLE;case mh.UNAUTHENTICATED:return nu.UNAUTHENTICATED;case mh.INVALID_ARGUMENT:return nu.INVALID_ARGUMENT;case mh.NOT_FOUND:return nu.NOT_FOUND;case mh.ALREADY_EXISTS:return nu.ALREADY_EXISTS;case mh.PERMISSION_DENIED:return nu.PERMISSION_DENIED;case mh.FAILED_PRECONDITION:return nu.FAILED_PRECONDITION;case mh.ABORTED:return nu.ABORTED;case mh.OUT_OF_RANGE:return nu.OUT_OF_RANGE;case mh.UNIMPLEMENTED:return nu.UNIMPLEMENTED;case mh.DATA_LOSS:return nu.DATA_LOSS;default:return lu()}}(gh=mh||(mh={}))[gh.OK=0]="OK",gh[gh.CANCELLED=1]="CANCELLED",gh[gh.UNKNOWN=2]="UNKNOWN",gh[gh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gh[gh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gh[gh.NOT_FOUND=5]="NOT_FOUND",gh[gh.ALREADY_EXISTS=6]="ALREADY_EXISTS",gh[gh.PERMISSION_DENIED=7]="PERMISSION_DENIED",gh[gh.UNAUTHENTICATED=16]="UNAUTHENTICATED",gh[gh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gh[gh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gh[gh.ABORTED=10]="ABORTED",gh[gh.OUT_OF_RANGE=11]="OUT_OF_RANGE",gh[gh.UNIMPLEMENTED=12]="UNIMPLEMENTED",gh[gh.INTERNAL=13]="INTERNAL",gh[gh.UNAVAILABLE=14]="UNAVAILABLE",gh[gh.DATA_LOSS=15]="DATA_LOSS";var Ch=function(){function t(t,e){this.comparator=t,this.root=e||Oh.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Oh.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Oh.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Sh(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Sh(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Sh(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Sh(this.root,t,this.comparator,!0)},t}(),Sh=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Oh=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw lu();if(this.right.isRed())throw lu();var t=this.left.check();if(t!==this.right.check())throw lu();return t+(this.isRed()?0:1)},t}();Oh.EMPTY=null,Oh.RED=!0,Oh.BLACK=!1,Oh.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw lu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw lu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw lu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw lu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw lu()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Oh(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Eh=function(){function t(t){this.comparator=t,this.data=new Ch(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new xh(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new xh(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),xh=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),kh=new Ch(Vu.comparator);function Th(){return kh}var Ih=new Ch(Vu.comparator);function Ah(){return Ih}var Ph=new Ch(Vu.comparator);function Rh(){return Ph}var jh=new Eh(Vu.comparator);function Dh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=jh,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Nh=new Eh(mu);function Mh(){return Nh}var Fh=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Lh.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(_u.min(),r,Mh(),Th(),Dh())},t}(),Lh=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Tu.EMPTY_BYTE_STRING,n,Dh(),Dh(),Dh())},t}(),Vh=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},qh=function(t,e){this.targetId=t,this.V=e},Uh=function(t,e,n,r){void 0===n&&(n=Tu.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Bh=function(){function t(){this.S=0,this.D=Kh(),this.C=Tu.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Dh(),e=Dh(),n=Dh();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:lu()}}),new Lh(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Kh()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),zh=function(){function t(t){this.W=t,this.G=new Map,this.H=Th(),this.J=Hh(),this.Y=new Eh(mu)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:lu()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(sl(i))if(0===n){var o=new Vu(i.path);this.tt(e,o,el.newNoDocument(o,_u.min()))}else hu(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&sl(o.target)){var s=new Vu(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,el.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=Dh();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Fh(t,n,this.Y,this.H,r);return this.H=Th(),this.J=Hh(),this.Y=new Eh(mu),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Bh,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Eh(mu),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||su("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Bh),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Hh(){return new Ch(Vu.comparator)}function Kh(){return new Ch(Vu.comparator)}var Wh={asc:"ASCENDING",desc:"DESCENDING"},Gh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qh=function(t,e){this.databaseId=t,this.I=e};function $h(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Yh(t,e){return t.I?e.toBase64():e.toUint8Array()}function Xh(t,e){return $h(t,e.toTimestamp())}function Zh(t){return hu(!!t),_u.fromTimestamp(function(t){var e=Au(t);return new bu(e.seconds,e.nanos)}(t))}function Jh(t,e){return function(t){return new Ou(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function td(t){var e=Ou.fromString(t);return hu(Od(e)),e}function ed(t,e){return Jh(t.databaseId,e.path)}function nd(t,e){var n=td(e);if(n.get(1)!==t.databaseId.projectId)throw new ru(nu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ru(nu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Vu(sd(n))}function rd(t,e){return Jh(t.databaseId,e)}function id(t){var e=td(t);return 4===e.length?Ou.emptyPath():sd(e)}function od(t){return new Ou(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sd(t){return hu(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function ad(t,e,n){return{name:ed(t,e),fields:n.toProto().mapValue.fields}}function cd(t,e,n){var r=nd(t,e.name),i=Zh(e.updateTime),o=new Ju({mapValue:{fields:e.fields}}),s=el.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function ud(t,e){var n;if(e instanceof lh)n={update:ad(t,e.key,e.value)};else if(e instanceof yh)n={delete:ed(t,e.key)};else if(e instanceof hh)n={update:ad(t,e.key,e.data),updateMask:Sd(e.fieldMask)};else{if(!(e instanceof bh))return lu();n={verify:ed(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Wl)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Gl)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof $l)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Xl)return{fieldPath:e.field.canonicalString(),increment:n.A};throw lu()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Xh(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:lu()}(t,e.precondition)),n}function ld(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?nh.updateTime(Zh(t.updateTime)):void 0!==t.exists?nh.exists(t.exists):nh.none()}(e.currentDocument):nh.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(hu("REQUEST_TIME"===e.setToServerValue),n=new Wl):"appendMissingElements"in e?n=new Gl(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new $l(e.removeAllFromArray.values||[]):"increment"in e?n=new Xl(t,e.increment):lu();var r=xu.fromServerFormat(e.fieldPath);return new th(r,n)}(t,e)}):[];if(e.update){var i=nd(t,e.update.name),o=new Ju({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new ku((t.fieldPaths||[]).map(function(t){return xu.fromServerFormat(t)}))}(e.updateMask);return new hh(i,o,s,n,r)}return new lh(i,o,n,r)}if(e.delete){var a=nd(t,e.delete);return new yh(a,n)}if(e.verify){var c=nd(t,e.verify);return new bh(c,n)}return lu()}function hd(t,e){return{documents:[rd(t,e.path)]}}function dd(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=rd(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=rd(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Xu(t.value))return{unaryFilter:{field:_d(t.field),op:"IS_NAN"}};if(Yu(t.value))return{unaryFilter:{field:_d(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Xu(t.value))return{unaryFilter:{field:_d(t.field),op:"IS_NOT_NAN"}};if(Yu(t.value))return{unaryFilter:{field:_d(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_d(t.field),op:bd(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:_d(t.field),direction:yd(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||Mu(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=md(e.startAt)),e.endAt&&(n.structuredQuery.endAt=md(e.endAt)),n}function fd(t){var e=id(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){hu(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=pd(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new bl(vd(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var c=null;n.limit&&(c=function(t){var e;return Mu(e="object"==typeof t?t.value:t)?null:e}(n.limit));var u=null;n.startAt&&(u=gd(n.startAt));var l=null;return n.endAt&&(l=gd(n.endAt)),Sl(e,i,a,s,c,"F",u,l)}function pd(t){return t?void 0!==t.unaryFilter?[Cd(t)]:void 0!==t.fieldFilter?[wd(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return pd(t)}).reduce(function(t,e){return t.concat(e)}):lu():[]}function md(t){return{before:t.before,values:t.position}}function gd(t){return new gl(t.values||[],!!t.before)}function yd(t){return Wh[t]}function bd(t){return Gh[t]}function _d(t){return{fieldPath:t.canonicalString()}}function vd(t){return xu.fromServerFormat(t.fieldPath)}function wd(t){return al.create(vd(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return lu()}}(t.fieldFilter.op),t.fieldFilter.value)}function Cd(t){switch(t.unaryFilter.op){case"IS_NAN":var e=vd(t.unaryFilter.field);return al.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=vd(t.unaryFilter.field);return al.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=vd(t.unaryFilter.field);return al.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=vd(t.unaryFilter.field);return al.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return lu()}}function Sd(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Od(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Ed(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=kd(e)),e=xd(t.get(n),e);return kd(e)}function xd(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function kd(t){return t+"\x01\x01"}function Td(t){var e=t.length;if(hu(e>=2),2===e)return hu("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Ou.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&lu(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),c=void 0;0===i.length?c=a:(c=i+=a,i=""),r.push(c);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:lu()}o=s+2}return new Ou(r)}var Id=function(t,e){this.seconds=t,this.nanoseconds=e},Ad=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Ad.store="owner",Ad.key="owner";var Pd=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Pd.store="mutationQueues",Pd.keyPath="userId";var Rd=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Rd.store="mutations",Rd.keyPath="batchId",Rd.userMutationsIndex="userMutationsIndex",Rd.userMutationsKeyPath=["userId","batchId"];var jd=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Ed(e)]},t.key=function(t,e,n){return[t,Ed(e),n]},t}();jd.store="documentMutations",jd.PLACEHOLDER=new jd;var Dd=function(t,e){this.path=t,this.readTime=e},Nd=function(t,e){this.path=t,this.version=e},Md=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Md.store="remoteDocuments",Md.readTimeIndex="readTimeIndex",Md.readTimeIndexPath="readTime",Md.collectionReadTimeIndex="collectionReadTimeIndex",Md.collectionReadTimeIndexPath=["parentPath","readTime"];var Fd=function(t){this.byteSize=t};Fd.store="remoteDocumentGlobal",Fd.key="remoteDocumentGlobalKey";var Ld=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Ld.store="targets",Ld.keyPath="targetId",Ld.queryTargetsIndexName="queryTargetsIndex",Ld.queryTargetsKeyPath=["canonicalId","targetId"];var Vd=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Vd.store="targetDocuments",Vd.keyPath=["targetId","path"],Vd.documentTargetsIndex="documentTargetsIndex",Vd.documentTargetsKeyPath=["path","targetId"];var qd=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};qd.key="targetGlobalKey",qd.store="targetGlobal";var Ud=function(t,e){this.collectionId=t,this.parent=e};Ud.store="collectionParents",Ud.keyPath=["collectionId","parent"];var Bd=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Bd.store="clientMetadata",Bd.keyPath="clientId";var zd=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};zd.store="bundles",zd.keyPath="bundleId";var Hd=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Hd.store="namedQueries",Hd.keyPath="name";var Kd=Object(tu.f)(Object(tu.f)([],Object(tu.f)(Object(tu.f)([],Object(tu.f)(Object(tu.f)([],Object(tu.f)(Object(tu.f)([],[Pd.store,Rd.store,jd.store,Md.store,Ld.store,Ad.store,qd.store,Vd.store]),[Bd.store])),[Fd.store])),[Ud.store])),[zd.store,Hd.store]),Wd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Gd=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Qd=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},$d=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&lu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Yd=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Qd,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Jd(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=of(e.target.error);n.ft.reject(new Jd(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Jd(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(su("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new ef(e)},t}(),Xd=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(Yi.o)())&&au("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return su("SimpleDb","Removing database:",t),nf(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(Yi.o)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(tu.b)(this,void 0,void 0,function(){var e,n=this;return Object(tu.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(su("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Jd(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new ru(nu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Jd(t,n))},i.onupgradeneeded=function(t){su("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){su("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(tu.b)(this,void 0,void 0,function(){var i,o,s,a,c;return Object(tu.d)(this,function(u){switch(u.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,c,u,l;return Object(tu.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Yd.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),$d.reject(t)}).toPromise(),c={},s.catch(function(){}),[4,e.dt];case 3:return[2,(c.value=(h.sent(),s),c)];case 4:return su("SimpleDb","Transaction failed with error:",(u=h.sent()).message,"Retrying:",l="FirebaseError"!==u.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(u)}];case 5:return[2]}})},a=this,u.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=u.sent()))return[2,c.value];u.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Zd=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return nf(this.Pt.delete())},t}(),Jd=function(t){function e(e,n){var r=this;return(r=t.call(this,nu.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(tu.c)(e,t),e}(ru);function tf(t){return"IndexedDbTransactionError"===t.name}var ef=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(su("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(su("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),nf(n)},t.prototype.add=function(t){return su("SimpleDb","ADD",this.store.name,t,t),nf(this.store.add(t))},t.prototype.get=function(t){var e=this;return nf(this.store.get(t)).next(function(n){return void 0===n&&(n=null),su("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return su("SimpleDb","DELETE",this.store.name,t),nf(this.store.delete(t))},t.prototype.count=function(){return su("SimpleDb","COUNT",this.store.name),nf(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){su("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new $d(function(n,r){e.onerror=function(t){var e=of(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new $d(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Zd(i),s=e(i.primaryKey,i.value,o);if(s instanceof $d){var a=s.catch(function(t){return o.done(),$d.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return $d.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function nf(t){return new $d(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=of(t.target.error);n(e)}})}var rf=!1;function of(t){var e=Xd._t(Object(Yi.o)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new ru("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return rf||(rf=!0,setTimeout(function(){throw r},0)),r}}return t}var sf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(tu.c)(e,t),e}(Gd);function af(t,e){var n=du(t);return Xd.It(n.Mt,e)}var cf=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&oh(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&sh(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&sh(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(_u.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Dh())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&gu(this.mutations,t.mutations,function(t,e){return ch(t,e)})&&gu(this.baseMutations,t.baseMutations,function(t,e){return ch(t,e)})},t}(),uf=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){hu(e.mutations.length===r.length);for(var i=Rh(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),lf=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=_u.min()),void 0===o&&(o=_u.min()),void 0===s&&(s=Tu.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),hf=function(t){this.Lt=t};function df(t,e){if(e.document)return cd(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Vu.fromSegments(e.noDocument.path),r=yf(e.noDocument.readTime),i=el.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Vu.fromSegments(e.unknownDocument.path);return r=yf(e.unknownDocument.version),el.newUnknownDocument(o,r)}return lu()}function ff(t,e,n){var r=pf(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:ed(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:$h(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Md(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),c=gf(e.version);return s=e.hasCommittedMutations,new Md(null,new Dd(a,c),null,s,r,i)}if(e.isUnknownDocument()){var u=e.key.path.toArray(),l=gf(e.version);return new Md(new Nd(u,l),null,null,!0,r,i)}return lu()}function pf(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function mf(t){var e=new bu(t[0],t[1]);return _u.fromTimestamp(e)}function gf(t){var e=t.toTimestamp();return new Id(e.seconds,e.nanoseconds)}function yf(t){var e=new bu(t.seconds,t.nanoseconds);return _u.fromTimestamp(e)}function bf(t,e){for(var n=(e.baseMutations||[]).map(function(e){return ld(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return ld(t.Lt,e)}),o=bu.fromMillis(e.localWriteTimeMs);return new cf(e.batchId,o,n,i)}function _f(t){var e,n,r=yf(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?yf(t.lastLimboFreeSnapshotVersion):_u.min();return void 0!==t.query.documents?(hu(1===(n=t.query).documents.length),e=Pl(Ol(id(n.documents[0])))):e=function(t){return Pl(fd(t))}(t.query),new lf(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Tu.fromBase64String(t.resumeToken))}function vf(t,e){var n,r=gf(e.snapshotVersion),i=gf(e.lastLimboFreeSnapshotVersion);n=sl(e.target)?hd(t.Lt,e.target):dd(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Ld(e.targetId,il(e.target),r,o,e.sequenceNumber,i,n)}function wf(t){var e=fd({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Rl(e,e.limit,"L"):e}var Cf=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Sf(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:yf(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Sf(t).put({bundleId:(n=e).id,createTime:gf(Zh(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Of(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:wf(e.bundledQuery),readTime:yf(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Of(t).put(function(t){return{name:t.name,readTime:gf(Zh(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Sf(t){return af(t,zd.store)}function Of(t){return af(t,Hd.store)}var Ef=function(){function t(){this.Bt=new xf}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),$d.resolve()},t.prototype.getCollectionParents=function(t,e){return $d.resolve(this.Bt.getEntries(e))},t}(),xf=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Eh(Ou.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Eh(Ou.comparator)).toArray()},t}(),kf=function(){function t(){this.qt=new xf}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:Ed(i)};return Tf(t).put(o)}return $d.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[yu(e),""],!1,!0);return Tf(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Td(o.parent))}return n})},t}();function Tf(t){return af(t,Ud.store)}var If={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Af=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Pf(t,e,n){var r=t.store(Rd.store),i=t.store(jd.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=r.Ot({range:s},function(t,e,n){return a++,n.delete()});o.push(c.next(function(){hu(1===a)}));for(var u=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=jd.key(e,d.key.path,n.batchId);o.push(i.delete(f)),u.push(d.key)}return $d.waitFor(o).next(function(){return u})}function Rf(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw lu();e=t.noDocument}return JSON.stringify(e).length}Af.DEFAULT_COLLECTION_PERCENTILE=10,Af.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Af.DEFAULT=new Af(41943040,Af.DEFAULT_COLLECTION_PERCENTILE,Af.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Af.DISABLED=new Af(-1,0,0);var jf=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return hu(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Nf(t).Ot({index:Rd.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Mf(t),s=Nf(t);return s.add({}).next(function(a){hu("number"==typeof a);for(var c=new cf(a,e,n,r),u=function(t,e,n){var r=n.baseMutations.map(function(e){return ud(t.Lt,e)}),i=n.mutations.map(function(e){return ud(t.Lt,e)});return new Rd(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,c),l=[],h=new Eh(function(t,e){return mu(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],m=jd.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(u)),l.push(o.put(m,jd.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=c.keys()}),$d.waitFor(l).next(function(){return c})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Nf(t).get(e).next(function(t){return t?(hu(t.userId===n.userId),bf(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?$d.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Nf(t).Ot({index:Rd.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(hu(e.batchId>=r),o=bf(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Nf(t).Ot({index:Rd.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Nf(t).Nt(Rd.userMutationsIndex,n).next(function(t){return t.map(function(t){return bf(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=jd.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Mf(t).Ot({range:i},function(r,i,s){var a=r[0],c=r[2],u=Td(r[1]);if(a===n.userId&&e.path.isEqual(u))return Nf(t).get(c).next(function(t){if(!t)throw lu();hu(t.userId===n.userId),o.push(bf(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Eh(mu),i=[];return e.forEach(function(e){var o=jd.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Mf(t).Ot({range:s},function(t,i,o){var s=t[0],a=t[2],c=Td(t[1]);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()});i.push(a)}),$d.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=jd.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Eh(mu);return Mf(t).Ot({range:s},function(t,e,o){var s=t[0],c=t[2],u=Td(t[1]);s===n.userId&&r.isPrefixOf(u)?u.length===i&&(a=a.add(c)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Nf(t).get(e).next(function(t){if(null===t)throw lu();hu(t.userId===n.userId),r.push(bf(n.R,t))}))}),$d.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return Pf(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),$d.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return $d.resolve();var r=IDBKeyRange.lowerBound(jd.prefixForUser(e.userId)),i=[];return Mf(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=Td(t[1]);i.push(o)}else r.done()}).next(function(){hu(0===i.length)})})},t.prototype.containsKey=function(t,e){return Df(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Ff(t).get(this.userId).next(function(t){return t||new Pd(e.userId,-1,"")})},t}();function Df(t,e,n){var r=jd.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Mf(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Nf(t){return af(t,Rd.store)}function Mf(t){return af(t,jd.store)}function Ff(t){return af(t,Pd.store)}var Lf=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Vf=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Lf(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return _u.fromTimestamp(new bu(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return qf(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return hu(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return qf(t).Ot(function(s,a){var c=_f(a);c.sequenceNumber<=e&&null===n.get(c.targetId)&&(i++,o.push(r.removeTargetData(t,c)))}).next(function(){return $d.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return qf(t).Ot(function(t,n){var r=_f(n);e(r)})},t.prototype.Xt=function(t){return Uf(t).get(qd.key).next(function(t){return hu(null!==t),t})},t.prototype.Zt=function(t,e){return Uf(t).put(qd.key,e)},t.prototype.te=function(t,e){return qf(t).put(vf(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=il(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return qf(t).Ot({range:r,index:Ld.queryTargetsIndexName},function(t,n,r){var o=_f(n);ol(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Bf(t);return e.forEach(function(e){var s=Ed(e.path);i.push(o.put(new Vd(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),$d.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Bf(t);return $d.forEach(e,function(e){var o=Ed(e.path);return $d.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Bf(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Bf(t),i=Dh();return r.Ot({range:n,kt:!0},function(t,e,n){var r=Td(t[1]),o=new Vu(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Ed(e.path),r=IDBKeyRange.bound([n],[yu(n)],!1,!0),i=0;return Bf(t).Ot({index:Vd.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return qf(t).get(e).next(function(t){return t?_f(t):null})},t}();function qf(t){return af(t,Ld.store)}function Uf(t){return af(t,qd.store)}function Bf(t){return af(t,Vd.store)}function zf(t){return Object(tu.b)(this,void 0,void 0,function(){return Object(tu.d)(this,function(e){if(t.code!==nu.FAILED_PRECONDITION||t.message!==Wd)throw t;return su("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Hf(t,e){var n=t[1],r=e[1],i=mu(t[0],e[0]);return 0===i?mu(n,r):i}var Kf=function(){function t(t){this.ne=t,this.buffer=new Eh(Hf),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Hf(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Wf=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;su("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(tu.b)(e,void 0,void 0,function(){var e;return Object(tu.d)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return tf(e=n.sent())?(su("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,zf(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Gf=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return $d.resolve(eu.o);var r=new Kf(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(su("LruGarbageCollector","Garbage collection skipped; disabled"),$d.resolve(If)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(su("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),If):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,c,u=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>u.params.maximumSequenceNumbersToCollect?(su("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+u.params.maximumSequenceNumbersToCollect+" from "+e),r=u.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),u.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),u.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),u.removeOrphanedDocuments(t,n)}).next(function(t){return c=Date.now(),ou()<=Xi.a.DEBUG&&su("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(c-a)+"ms\nTotal Duration: "+(c-l)+"ms"),$d.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Qf=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Gf(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return $f(t,n)},t.prototype.removeReference=function(t,e,n){return $f(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return $f(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Ff(t).$t(function(r){return Df(t,r,e).next(function(t){return t&&(n=!0),$d.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var c=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Bf(t).delete([0,Ed(s.path)])})});i.push(c)}}).next(function(){return $d.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return $f(t,e)},t.prototype.we=function(t,e){var n,r=Bf(t),i=eu.o;return r.Ot({index:Vd.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==eu.o&&e(new Vu(Td(n)),i),i=s,n=o):i=eu.o}).next(function(){i!==eu.o&&e(new Vu(Td(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function $f(t,e){return Bf(t).put(function(t,e){return new Vd(0,Ed(t.path),e)}(e,t.currentSequenceNumber))}var Yf=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){wu(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return Cu(this.inner)},t}(),Xf=function(){function t(){this.changes=new Yf(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:_u.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:el.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?$d.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Zf=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return ep(t).put(np(e),n)},t.prototype.removeEntry=function(t,e){var n=ep(t),r=np(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return ep(t).get(np(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return ep(t).get(np(e)).next(function(t){return{document:n.ye(e,t),size:Rf(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=Th();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=Th(),i=new Ch(Vu.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Rf(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return $d.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return ep(t).Ot({range:r},function(t,e,r){for(var s=Vu.fromSegments(t);o&&Vu.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Th(),o=e.path.length+1,s={};if(n.isEqual(_u.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var c=e.path.toArray(),u=pf(n);s.range=IDBKeyRange.lowerBound([c,u],!0),s.index=Md.collectionReadTimeIndex}return ep(t).Ot(s,function(t,n,s){if(t.length===o){var a=df(r.R,n);e.path.isPrefixOf(a.key.path)?Ml(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Jf(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return tp(t).get(Fd.key).next(function(t){return hu(!!t),t})},t.prototype.me=function(t,e){return tp(t).put(Fd.key,e)},t.prototype.ye=function(t,e){if(e){var n=df(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(_u.min()))return n}return el.newInvalidDocument(t)},t}(),Jf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Yf(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(tu.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Eh(function(t,e){return mu(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var c=ff(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var u=Rf(c);r+=u-a,n.push(e.Ie.addEntry(t,o,c))}else if(r-=a,e.trackRemovals){var l=ff(e.Ie.R,el.newNoDocument(o,_u.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),$d.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Xf);function tp(t){return af(t,Fd.store)}function ep(t){return af(t,Md.store)}function np(t){return t.path.toArray()}var rp=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;hu(n<r&&n>=0&&r<=11);var o=new Yd("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Ad.store)}(t),function(t){t.createObjectStore(Pd.store,{keyPath:Pd.keyPath}),t.createObjectStore(Rd.store,{keyPath:Rd.keyPath,autoIncrement:!0}).createIndex(Rd.userMutationsIndex,Rd.userMutationsKeyPath,{unique:!0}),t.createObjectStore(jd.store)}(t),ip(t),function(t){t.createObjectStore(Md.store)}(t));var s=$d.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Vd.store),t.deleteObjectStore(Ld.store),t.deleteObjectStore(qd.store)}(t),ip(t)),s=s.next(function(){return function(t){var e=t.store(qd.store),n=new qd(0,0,_u.min().toTimestamp(),0);return e.put(qd.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Rd.store).Nt().next(function(n){t.deleteObjectStore(Rd.store),t.createObjectStore(Rd.store,{keyPath:Rd.keyPath,autoIncrement:!0}).createIndex(Rd.userMutationsIndex,Rd.userMutationsKeyPath,{unique:!0});var r=e.store(Rd.store),i=n.map(function(t){return r.put(t)});return $d.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Bd.store,{keyPath:Bd.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Fd.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Md.store);e.createIndex(Md.readTimeIndex,Md.readTimeIndexPath,{unique:!1}),e.createIndex(Md.collectionReadTimeIndex,Md.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(zd.store,{keyPath:zd.keyPath})}(t),function(t){t.createObjectStore(Hd.store,{keyPath:Hd.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(Md.store).Ot(function(t,n){e+=Rf(n)}).next(function(){var n=new Fd(e);return t.store(Fd.store).put(Fd.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(Pd.store),r=t.store(Rd.store);return n.Nt().next(function(n){return $d.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Rd.userMutationsIndex,i).next(function(r){return $d.forEach(r,function(r){hu(r.userId===n.userId);var i=bf(e.R,r);return Pf(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(Vd.store),n=t.store(Md.store);return t.store(qd.store).get(qd.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new Ou(n),s=function(t){return[0,Ed(t)]}(o);r.push(e.get(s).next(function(n){return n?$d.resolve():function(n){return e.put(new Vd(0,Ed(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return $d.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Ud.store,{keyPath:Ud.keyPath});var n=e.store(Ud.store),r=new xf,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Ed(i)})}};return e.store(Md.store).Ot({kt:!0},function(t,e){var n=new Ou(t);return i(n.popLast())}).next(function(){return e.store(jd.store).Ot({kt:!0},function(t,e){var n=Td(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(Ld.store);return n.Ot(function(t,r){var i=_f(r),o=vf(e.R,i);return n.put(o)})},t}();function ip(t){t.createObjectStore(Vd.store,{keyPath:Vd.keyPath}).createIndex(Vd.documentTargetsIndex,Vd.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Ld.store,{keyPath:Ld.keyPath}).createIndex(Ld.queryTargetsIndexName,Ld.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(qd.store)}var op="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sp=function(){function t(e,n,r,i,o,s,a,c,u,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=u,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new ru(nu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Qf(this,i),this.Le=n+"main",this.R=new hf(c),this.Be=new Xd(this.Le,11,new rp(this.R)),this.qe=new Vf(this.referenceDelegate,this.R),this.Ut=new kf,this.Ue=function(t,e){return new Zf(t,e)}(this.R,this.Ut),this.Qe=new Cf,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&au("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new ru(nu.FAILED_PRECONDITION,op);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new eu(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(tu.b)(e,void 0,void 0,function(){return Object(tu.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(tu.b)(e,void 0,void 0,function(){return Object(tu.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(tu.b)(e,void 0,void 0,function(){return Object(tu.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return cp(e).put(new Bd(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(tf(e))return su("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return su("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return ap(t).get(Ad.key).next(function(t){return $d.resolve(e.tn(t))})},t.prototype.en=function(t){return cp(t).delete(this.clientId)},t.prototype.nn=function(){return Object(tu.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(tu.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=af(t,Bd.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return $d.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?$d.resolve(!0):ap(t).get(Ad.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new ru(nu.FAILED_PRECONDITION,op);return!1}}return!(!e.networkEnabled||!e.inForeground)||cp(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&su("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(tu.b)(this,void 0,void 0,function(){var t=this;return Object(tu.d)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Ad.store,Bd.store],function(e){var n=new sf(e,eu.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return cp(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return jf.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return su("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Kd,function(o){return r=new sf(o,i.Ne?i.Ne.next():eu.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw au("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new ru(nu.FAILED_PRECONDITION,Wd);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return ap(t).get(Ad.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new ru(nu.FAILED_PRECONDITION,op)})},t.prototype.Ze=function(t){var e=new Ad(this.clientId,this.allowTabSynchronization,Date.now());return ap(t).put(Ad.key,e)},t.yt=function(){return Xd.yt()},t.prototype.Xe=function(t){var e=this,n=ap(t);return n.get(Ad.key).next(function(t){return e.tn(t)?(su("IndexedDbPersistence","Releasing primary lease."),n.delete(Ad.key)):$d.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(au("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return su("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return au("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){au("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function ap(t){return af(t,Ad.store)}function cp(t){return af(t,Bd.store)}function up(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var lp=function(t,e){this.progress=t,this.wn=e},hp=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Vu.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Il(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Vu(e)).next(function(t){var e=Ah();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Ah();return this.Ut.getCollectionParents(t,i).next(function(s){return $d.forEach(s,function(s){var a=function(t,e){return new Cl(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var c=a[s],u=c.key,l=r.get(u);null==l&&(l=el.newInvalidDocument(u),r=r.insert(u,l)),sh(c,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(u))}})}).next(function(){return r.forEach(function(t,n){Ml(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=Dh(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var c=a[s];c instanceof hh&&null===n.get(c.key)&&(r=r.add(c.key))}var u=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(u=u.insert(t,e))}),u})},t}(),dp=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Dh(),i=Dh(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),fp=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(_u.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(El(e)||xl(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(ou()<=Xi.a.DEBUG&&su("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Nl(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new Eh(Fl(t));return e.forEach(function(e,r){Ml(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return ou()<=Xi.a.DEBUG&&su("QueryEngine","Using full collection scan to execute query:",Nl(e)),this.Sn.getDocumentsMatchingQuery(t,e,_u.min())},t}(),pp=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Ch(mu),this.kn=new Yf(function(t){return il(t)},ol),this.On=_u.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new hp(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function mp(t,e,n,r){return new pp(t,e,n,r)}function gp(t,e){return Object(tu.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(tu.d)(this,function(s){switch(s.label){case 0:return n=du(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new hp(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=Dh(),a=0,c=o;a<c.length;a++){var u=c[a];n.push(u.batchId);for(var l=0,h=u.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var m=0,g=p.mutations;m<g.length;m++)s=s.add(g[m].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function yp(t,e){var n=du(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=$d.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);hu(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function bp(t){var e=du(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function _p(t,e){var n=du(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var c=e.resumeToken;if(c.approximateByteSize()>0){var u=a.withResumeToken(c,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,u),function(t,e,n){return hu(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,u,e)&&s.push(n.qe.updateTargetData(t,u))}}});var a=Th();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(vp(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(_u.min())){var c=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(c)}return $d.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function vp(t,e,n,r,i){var o=Dh();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Th();return n.forEach(function(n,s){var a=t.get(n),c=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(_u.min())?(e.removeEntry(n,c),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,c),o=o.insert(n,s)):su("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function wp(t,e){var n=du(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function Cp(t,e){var n=du(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?$d.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new lf(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function Sp(t,e,n){return Object(tu.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(tu.d)(this,function(a){switch(a.label){case 0:r=du(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!tf(s=a.sent()))throw s;return su("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function Op(t,e,n){var r=du(t),i=_u.min(),o=Dh();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=du(t),i=r.kn.get(n);return void 0!==i?$d.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Pl(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:_u.min(),n?o:Dh())}).next(function(t){return{documents:t,Bn:o}})})}function Ep(t,e){var n=du(t),r=du(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function xp(t){var e=du(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=du(t),i=Th(),o=pf(n),s=ep(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:Md.readTimeIndex,range:a},function(t,e){var n=df(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:mf(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function kp(t){return Object(tu.b)(this,void 0,void 0,function(){var e;return Object(tu.d)(this,function(n){return[2,(e=du(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=ep(t),n=_u.min();return e.Ot({index:Md.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=mf(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function Tp(t,e,n,r){return Object(tu.b)(this,void 0,void 0,function(){var i,o,s,a,c,u,l,h,d,f;return Object(tu.d)(this,function(p){switch(p.label){case 0:for(i=du(t),o=Dh(),s=Th(),a=Rh(),c=0,u=n;c<u.length;c++)h=e.qn((l=u[c]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return d=i.$n.newChangeBuffer({trackRemovals:!0}),[4,Cp(i,function(t){return Pl(Ol(Ou.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return vp(t,d,s,_u.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.qe.addMatchingKeys(t,o,f.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function Ip(t,e,n){return void 0===n&&(n=Dh()),Object(tu.b)(this,void 0,void 0,function(){var r,i;return Object(tu.d)(this,function(o){switch(o.label){case 0:return[4,Cp(t,Pl(wf(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=du(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Zh(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(Tu.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var Ap=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return $d.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Zh(n.createTime)}),$d.resolve()},t.prototype.getNamedQuery=function(t,e){return $d.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:wf(t.bundledQuery),readTime:Zh(t.readTime)}}(e)),$d.resolve()},t}(),Pp=function(){function t(){this.Wn=new Eh(Rp.Gn),this.zn=new Eh(Rp.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Rp(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new Rp(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new Vu(new Ou([])),r=new Rp(n,t),i=new Rp(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Vu(new Ou([])),n=new Rp(e,t),r=new Rp(e,t+1),i=Dh();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Rp(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Rp=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Vu.comparator(t.key,e.key)||mu(t.ns,e.ns)},t.Hn=function(t,e){return mu(t.ns,e.ns)||Vu.comparator(t.key,e.key)},t}(),jp=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Eh(Rp.Gn)}return t.prototype.checkEmpty=function(t){return $d.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new cf(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var c=a[s];this.rs=this.rs.add(new Rp(c.key,i)),this.Ut.addToCollectionParentIndex(t,c.key.path.popLast())}return $d.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return $d.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return $d.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return $d.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return $d.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Rp(e,0),i=new Rp(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),$d.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Eh(mu);return e.forEach(function(t){var e=new Rp(t,0),i=new Rp(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),$d.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Vu.isDocumentKey(i)||(i=i.child(""));var o=new Rp(new Vu(i),0),s=new Eh(mu);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),$d.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;hu(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return $d.forEach(e.mutations,function(i){var o=new Rp(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Rp(e,0),r=this.rs.firstAfterOrEqual(n);return $d.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return $d.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Dp=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Ch(Vu.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return $d.resolve(n?n.document.clone():el.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Th();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():el.newInvalidDocument(t))}),$d.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Th(),i=new Vu(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,c=a.document,u=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;u.compareTo(n)<=0||Ml(e,c)&&(r=r.insert(c.key,c.clone()))}return $d.resolve(r)},t.prototype.fs=function(t,e){return $d.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new Np(this)},t.prototype.getSize=function(t){return $d.resolve(this.size)},t}(),Np=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(tu.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),$d.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Xf),Mp=function(){function t(t){this.persistence=t,this.ds=new Yf(function(t){return il(t)},ol),this.lastRemoteSnapshotVersion=_u.min(),this.highestTargetId=0,this.ws=0,this._s=new Pp,this.targetCount=0,this.ys=Lf.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),$d.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return $d.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return $d.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),$d.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),$d.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Lf(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,$d.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),$d.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,$d.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),$d.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return $d.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return $d.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),$d.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),$d.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),$d.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return $d.resolve(n)},t.prototype.containsKey=function(t,e){return $d.resolve(this._s.containsKey(e))},t}(),Fp=function(){function t(t,e){var n=this;this.gs={},this.Ne=new eu(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Mp(this),this.Ut=new Ef,this.Ue=function(t,e){return new Dp(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new hf(e),this.Qe=new Ap(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new jp(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;su("MemoryPersistence","Starting transaction:",t);var i=new Lp(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return $d.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Lp=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(tu.c)(e,t),e}(Gd),Vp=function(){function t(t){this.persistence=t,this.As=new Pp,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw lu()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),$d.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),$d.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),$d.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $d.forEach(this.vs,function(r){var i=Vu.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return $d.or([function(){return $d.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),qp=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Up(t,e){return"firestore_clients_"+t+"_"+e}function Bp(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function zp(t,e){return"firestore_targets_"+t+"_"+e}qp.UNAUTHENTICATED=new qp(null),qp.GOOGLE_CREDENTIALS=new qp("google-credentials-uid"),qp.FIRST_PARTY=new qp("first-party-uid");var Hp=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new ru(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(au("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Kp=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ru(i.error.code,i.error.message)),o?new t(e,i.state,r):(au("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Wp=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Mh(),s=0;i&&s<r.activeTargetIds.length;++s)i=Lu(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(au("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Gp=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(au("SharedClientState","Failed to parse online state: "+e),null)},t}(),Qp=function(){function t(){this.activeTargetIds=Mh()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),$p=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Ch(mu),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=Up(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Qp),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(tu.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,c,u,l=this;return Object(tu.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Up(this.persistenceKey,r)))&&(o=Wp.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),c=0,u=this.Os;c<u.length;c++)this.Fs(u[c]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(zp(this.persistenceKey,t));if(n){var r=Kp.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(zp(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return su("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){su("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){su("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(su("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void au("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(tu.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(tu.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=eu.o;if(null!=t)try{var n=JSON.parse(t);hu("number"==typeof n),e=n}catch(t){au("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==eu.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Hp(this.currentUser,t,e,n),i=Bp(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Bp(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=zp(this.persistenceKey,t),i=new Kp(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Wp.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Hp.Vs(new qp(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Kp.Vs(r,e)},t.prototype.js=function(t){return Gp.Vs(t)},t.prototype.ii=function(t){return Object(tu.b)(this,void 0,void 0,function(){return Object(tu.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(su("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Mh();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Yp=function(){function t(){this.li=new Qp,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Qp,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Xp=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Zp=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){su("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){su("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Jp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},tm=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),em=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(tu.c)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new Jc;s.listenOnce(Yc.COMPLETE,function(){try{switch(s.getLastErrorCode()){case $c.NO_ERROR:var e=s.getResponseJson();su("Connection","XHR received:",JSON.stringify(e)),i(e);break;case $c.TIMEOUT:su("Connection",'RPC "'+t+'" timed out'),o(new ru(nu.DEADLINE_EXCEEDED,"Request time out"));break;case $c.HTTP_ERROR:var n=s.getStatus();if(su("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(nu).indexOf(e)>=0?e:nu.UNKNOWN}(r.status);o(new ru(a,r.message))}else o(new ru(nu.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new ru(nu.UNAVAILABLE,"Connection failed."));break;default:lu()}}finally{su("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Hc,i=Gs(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(Yi.v)()||Object(Yi.y)()||Object(Yi.s)()||Object(Yi.u)()||Object(Yi.z)()||Object(Yi.r)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");su("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),c=!1,u=!1,l=new tm({Ei:function(t){u?su("Connection","Not sending because WebChannel is closed:",t):(c||(su("Connection","Opening WebChannel transport."),a.open(),c=!0),su("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Zc.EventType.OPEN,function(){u||su("Connection","WebChannel transport opened.")}),h(a,Zc.EventType.CLOSE,function(){u||(u=!0,su("Connection","WebChannel transport closed"),l.Vi())}),h(a,Zc.EventType.ERROR,function(t){u||(u=!0,cu("Connection","WebChannel transport errored:",t),l.Vi(new ru(nu.UNAVAILABLE,"The operation could not be completed")))}),h(a,Zc.EventType.MESSAGE,function(t){var e;if(!u){var n=t.data[0];hu(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){su("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=mh[t];if(void 0!==e)return wh(e)}(i),s=r.message;void 0===o&&(o=nu.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),u=!0,l.Vi(new ru(o,s)),a.close()}else su("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Xc.STAT_EVENT,function(t){10===t.stat?su("Connection","Detected buffering proxy"):11===t.stat&&su("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);su("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return su("RestConnection","Received: ",t),t},function(e){throw cu("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.5.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Jp[t]},t}());function nm(){return"undefined"!=typeof window?window:null}function rm(){return"undefined"!=typeof document?document:null}function im(t){return new Qh(t,!0)}var om=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&su("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),sm=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new om(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(tu.b)(this,void 0,void 0,function(){return Object(tu.d)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(tu.b)(this,void 0,void 0,function(){return Object(tu.d)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(tu.b)(this,void 0,void 0,function(){return Object(tu.d)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===nu.RESOURCE_EXHAUSTED?(au(e.toString()),au("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===nu.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new ru(nu.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(tu.b)(t,void 0,void 0,function(){return Object(tu.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return su("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(su("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),am=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(tu.c)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:lu()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(hu(void 0===e||"string"==typeof e),Tu.fromBase64String(e||"")):(hu(void 0===e||e instanceof Uint8Array),Tu.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?nu.UNKNOWN:wh(t.code);return new ru(e,t.message||"")}(a);n=new Uh(r,i,o,s||null)}else if("documentChange"in e){i=nd(t,(r=e.documentChange).document.name),o=Zh(r.document.updateTime);var a=new Ju({mapValue:{fields:r.document.fields}}),c=(s=el.newFoundDocument(i,o,a),r.targetIds||[]);n=new Vh(c,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=nd(t,(r=e.documentDelete).document),o=r.readTime?Zh(r.readTime):_u.min(),a=el.newNoDocument(i,o),n=new Vh([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=nd(t,(r=e.documentRemove).document),n=new Vh([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return lu();var u=e.filter;i=new _h(r=u.count||0),n=new qh(o=u.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return _u.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?_u.min():e.readTime?Zh(e.readTime):_u.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=od(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=sl(r)?{documents:hd(t,r)}:{query:dd(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Yh(t,e.resumeToken):e.snapshotVersion.compareTo(_u.min())>0&&(n.readTime=$h(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lu()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=od(this.R),e.removeTarget=t,this.cr(e)},e}(sm),cm=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(tu.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(hu(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(hu(void 0!==e),t.map(function(t){return function(t,e){var n=Zh(t.updateTime?t.updateTime:e);return n.isEqual(_u.min())&&(n=Zh(e)),new eh(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Zh(t.commitTime);return this.listener.Tr(n,e)}return hu(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=od(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return ud(e.R,t)})};this.cr(n)},e}(sm),um=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(tu.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new ru(nu.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===nu.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new ru(nu.UNKNOWN,t.toString())})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===nu.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new ru(nu.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),lm=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(au(e),this.Vr=!1):su("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),hm=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(tu.b)(o,void 0,void 0,function(){return Object(tu.d)(this,function(t){switch(t.label){case 0:return vm(this)?(su("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(tu.b)(this,void 0,void 0,function(){var e;return Object(tu.d)(this,function(n){switch(n.label){case 0:return(e=du(t)).$r.add(4),[4,fm(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,dm(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new lm(n,r)};function dm(t){return Object(tu.b)(this,void 0,void 0,function(){var e,n;return Object(tu.d)(this,function(r){switch(r.label){case 0:if(!vm(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function fm(t){return Object(tu.b)(this,void 0,void 0,function(){var e,n;return Object(tu.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function pm(t,e){var n=du(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),_m(n)?bm(n):Nm(n).er()&&gm(n,e))}function mm(t,e){var n=du(t),r=Nm(n);n.Or.delete(e),r.er()&&ym(n,e),0===n.Or.size&&(r.er()?r.ir():vm(n)&&n.Br.set("Unknown"))}function gm(t,e){t.qr.U(e.targetId),Nm(t).mr(e)}function ym(t,e){t.qr.U(e),Nm(t).yr(e)}function bm(t){t.qr=new zh({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),Nm(t).start(),t.Br.Sr()}function _m(t){return vm(t)&&!Nm(t).tr()&&t.Or.size>0}function vm(t){return 0===du(t).$r.size}function wm(t){t.qr=void 0}function Cm(t){return Object(tu.b)(this,void 0,void 0,function(){return Object(tu.d)(this,function(e){return t.Or.forEach(function(e,n){gm(t,e)}),[2]})})}function Sm(t,e){return Object(tu.b)(this,void 0,void 0,function(){return Object(tu.d)(this,function(n){return wm(t),_m(t)?(t.Br.Nr(e),bm(t)):t.Br.set("Unknown"),[2]})})}function Om(t,e,n){return Object(tu.b)(this,void 0,void 0,function(){var r,i,o;return Object(tu.d)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Uh&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(tu.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(tu.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),su("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Em(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Vh?t.qr.X(e):e instanceof qh?t.qr.rt(e):t.qr.et(e),n.isEqual(_u.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,bp(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(Tu.EMPTY_BYTE_STRING,n.snapshotVersion)),ym(t,e);var r=new lf(n.target,e,1,n.sequenceNumber);gm(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return su("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Em(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Em(t,e,n){return Object(tu.b)(this,void 0,void 0,function(){var r=this;return Object(tu.d)(this,function(i){switch(i.label){case 0:if(!tf(e))throw e;return t.$r.add(1),[4,fm(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return bp(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(tu.b)(r,void 0,void 0,function(){return Object(tu.d)(this,function(e){switch(e.label){case 0:return su("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,dm(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function xm(t,e){return e().catch(function(n){return Em(t,n,e)})}function km(t){return Object(tu.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(tu.d)(this,function(s){switch(s.label){case 0:e=du(t),n=Mm(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return vm(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,wp(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Mm(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Em(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Tm(e)&&Im(e),[2]}})})}function Tm(t){return vm(t)&&!Mm(t).tr()&&t.kr.length>0}function Im(t){Mm(t).start()}function Am(t){return Object(tu.b)(this,void 0,void 0,function(){return Object(tu.d)(this,function(e){return Mm(t).Ar(),[2]})})}function Pm(t){return Object(tu.b)(this,void 0,void 0,function(){var e,n,r;return Object(tu.d)(this,function(i){for(e=Mm(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function Rm(t,e,n){return Object(tu.b)(this,void 0,void 0,function(){var r,i;return Object(tu.d)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=uf.from(r,e,n),[4,xm(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,km(t)];case 2:return o.sent(),[2]}})})}function jm(t,e){return Object(tu.b)(this,void 0,void 0,function(){return Object(tu.d)(this,function(n){switch(n.label){case 0:return e&&Mm(t).pr?[4,function(t,e){return Object(tu.b)(this,void 0,void 0,function(){var n,r;return Object(tu.d)(this,function(i){switch(i.label){case 0:return vh(r=e.code)&&r!==nu.ABORTED?(n=t.kr.shift(),Mm(t).sr(),[4,xm(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,km(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Tm(t)&&Im(t),[2]}})})}function Dm(t,e){return Object(tu.b)(this,void 0,void 0,function(){var n;return Object(tu.d)(this,function(r){switch(r.label){case 0:return n=du(t),e?(n.$r.delete(2),[4,dm(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,fm(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Nm(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=du(t);return r.br(),new am(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Cm.bind(null,t),Ri:Sm.bind(null,t),_r:Om.bind(null,t)}),t.Mr.push(function(n){return Object(tu.b)(e,void 0,void 0,function(){return Object(tu.d)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),_m(t)?bm(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),wm(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Mm(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=du(t);return r.br(),new cm(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Am.bind(null,t),Ri:jm.bind(null,t),Ir:Pm.bind(null,t),Tr:Rm.bind(null,t)}),t.Mr.push(function(n){return Object(tu.b)(e,void 0,void 0,function(){return Object(tu.d)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,km(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(su("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var Fm=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Qd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ru(nu.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Lm(t,e){if(au("AsyncQueue",e+": "+t),tf(t))return new ru(nu.UNAVAILABLE,e+": "+t);throw t}var Vm=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Vu.comparator(e.key,n.key)}:function(t,e){return Vu.comparator(t.key,e.key)},this.keyedMap=Ah(),this.sortedSet=new Ch(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),qm=function(){function t(){this.Kr=new Ch(Vu.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):lu():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Um=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Vm.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&jl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Bm=function(){this.Wr=void 0,this.listeners=[]},zm=function(){this.queries=new Yf(function(t){return Dl(t)},jl),this.onlineState="Unknown",this.Gr=new Set};function Hm(t,e){return Object(tu.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,c;return Object(tu.d)(this,function(u){switch(u.label){case 0:if(n=du(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Bm),!i)return[3,4];u.label=1;case 1:return u.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=u.sent(),[3,4];case 3:return a=u.sent(),c=Lm(a,"Initialization of query '"+Nl(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Qm(n),[2]}})})}function Km(t,e){return Object(tu.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(tu.d)(this,function(a){return n=du(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Wm(t,e){for(var n=du(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var c=0,u=a.listeners;c<u.length;c++)u[c].Hr(s)&&(r=!0);a.Wr=s}}r&&Qm(n)}function Gm(t,e,n){var r=du(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Qm(t){t.Gr.forEach(function(t){t.next()})}var $m=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Um(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Um.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Ym=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Xm=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return nd(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?cd(this.R,t.document,!1):el.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Zh(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Xm(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,c=o.metadata.queries;a<c.length;a++){var u=c[a],l=(e.get(u)||Dh()).add(s);e.set(u,l)}}return e},t.prototype.complete=function(){return Object(tu.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(tu.d)(this,function(o){switch(o.label){case 0:return[4,Tp(this.localStore,new Xm(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Ip(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new lp(Object.assign({},this.progress),t))]}})})}}();var Zm=function(t){this.key=t},Jm=function(t){this.key=t},tg=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Dh(),this.mutatedKeys=Dh(),this.lo=Fl(t),this.fo=new Vm(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new qm,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=El(this.query)&&i.size===this.query.limit?i.last():null,u=xl(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=Ml(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(c&&n.lo(h,c)>0||u&&n.lo(h,u)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(c||u)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),El(this.query)||xl(this.query))for(;s.size>this.query.limit;){var l=El(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lu()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,c=a!==this.ao;return this.ao=a,0!==o.length||c?{snapshot:new Um(this.query,t.fo,i,o,t.mutatedKeys,0===a,c,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new qm,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Dh(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Jm(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Zm(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Dh();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Um.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),eg=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ng=function(t){this.key=t,this.bo=!1},rg=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Yf(function(t){return Dl(t)},jl),this.Vo=new Map,this.So=new Set,this.Do=new Ch(Vu.comparator),this.Co=new Map,this.No=new Pp,this.xo={},this.Fo=new Map,this.ko=Lf.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function ig(t,e){return Object(tu.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(tu.d)(this,function(a){switch(a.label){case 0:return n=jg(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,Cp(n.localStore,Pl(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,og(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&pm(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function og(t,e,n,r){return Object(tu.b)(this,void 0,void 0,function(){var i,o,s,a,c,u;return Object(tu.d)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(tu.b)(this,void 0,void 0,function(){var i,o,s;return Object(tu.d)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Op(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(bg(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,Op(t.localStore,e,!0)];case 1:return i=l.sent(),o=new tg(e,i.Bn),s=o._o(i.documents),a=Lh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,a),bg(t,n,c.To),u=new eg(e,n,o),[2,(t.Po.set(e,u),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),c.snapshot)]}})})}function sg(t,e){return Object(tu.b)(this,void 0,void 0,function(){var n,r,i;return Object(tu.d)(this,function(o){switch(o.label){case 0:return n=du(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!jl(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Sp(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),mm(n.remoteStore,r.targetId),gg(n,r.targetId)}).catch(zf)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return gg(n,r.targetId),[4,Sp(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function ag(t,e,n){return Object(tu.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(tu.d)(this,function(a){switch(a.label){case 0:r=Dg(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=du(t),i=bu.now(),o=e.reduce(function(t,e){return t.add(e.key)},Dh());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,c=e;a<c.length;a++){var u=c[a],l=ah(u,n.get(u.key));null!=l&&s.push(new hh(u.key,l,tl(l.toProto().mapValue),nh.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Ch(mu)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,wg(r,i.changes)];case 3:return a.sent(),[4,km(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Lm(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function cg(t,e){return Object(tu.b)(this,void 0,void 0,function(){var n,r;return Object(tu.d)(this,function(i){switch(i.label){case 0:n=du(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,_p(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(hu(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?hu(r.bo):t.removedDocuments.size>0&&(hu(r.bo),r.bo=!1))}),[4,wg(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,zf(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function ug(t,e,n){var r=du(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=du(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&Qm(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function lg(t,e,n){return Object(tu.b)(this,void 0,void 0,function(){var r,i,o,s,a,c;return Object(tu.d)(this,function(u){switch(u.label){case 0:return(r=du(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Ch(Vu.comparator)).insert(o,el.newNoDocument(o,_u.min())),a=Dh().add(o),c=new Fh(_u.min(),new Map,new Eh(mu),s,a),[4,cg(r,c)]):[3,2];case 1:return u.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),vg(r),[3,4];case 2:return[4,Sp(r.localStore,e,!1).then(function(){return gg(r,e,n)}).catch(zf)];case 3:u.sent(),u.label=4;case 4:return[2]}})})}function hg(t,e){return Object(tu.b)(this,void 0,void 0,function(){var n,r,i;return Object(tu.d)(this,function(o){switch(o.label){case 0:n=du(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,yp(n.localStore,e)];case 2:return i=o.sent(),mg(n,r,null),pg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,wg(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,zf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function dg(t,e,n){return Object(tu.b)(this,void 0,void 0,function(){var r,i;return Object(tu.d)(this,function(o){switch(o.label){case 0:r=du(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=du(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return hu(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),mg(r,e,n),pg(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,wg(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,zf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function fg(t,e){return Object(tu.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(tu.d)(this,function(a){switch(a.label){case 0:vm((n=du(t)).remoteStore)||su("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=du(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Lm(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function pg(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function mg(t,e,n){var r=du(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function gg(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||yg(t,e)})}function yg(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(mm(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),vg(t))}function bg(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Zm?(t.No.addReference(o.key,e),_g(t,o)):o instanceof Jm?(su("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||yg(t,o.key)):lu()}}function _g(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(su("SyncEngine","New document in limbo: "+n),t.So.add(r),vg(t))}function vg(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Vu(Ou.fromString(e)),r=t.ko.next();t.Co.set(r,new ng(n)),t.Do=t.Do.insert(n,r),pm(t.remoteStore,new lf(Pl(Ol(n.path)),r,2,eu.o))}}function wg(t,e,n){return Object(tu.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(tu.d)(this,function(a){switch(a.label){case 0:return r=du(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.$o(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=dp.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(tu.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,c,u;return Object(tu.d)(this,function(l){switch(l.label){case 0:n=du(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return $d.forEach(e,function(e){return $d.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return $d.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!tf(r=l.sent()))throw r;return su("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(c=n.Fn.get(a),u=c.withLastLimboFreeSnapshotVersion(c.snapshotVersion),n.Fn=n.Fn.insert(a,u));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Cg(t,e){return Object(tu.b)(this,void 0,void 0,function(){var n,r;return Object(tu.d)(this,function(i){switch(i.label){case 0:return(n=du(t)).currentUser.isEqual(e)?[3,3]:(su("SyncEngine","User change. New user:",e.toKey()),[4,gp(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new ru(nu.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,wg(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Sg(t,e){var n=du(t),r=n.Co.get(e);if(r&&r.bo)return Dh().add(r.key);var i=Dh(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var c=n.Po.get(a[s]);i=i.unionWith(c.view.wo)}return i}function Og(t,e){return Object(tu.b)(this,void 0,void 0,function(){var n,r,i;return Object(tu.d)(this,function(o){switch(o.label){case 0:return[4,Op((n=du(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&bg(n,e.targetId,i.To),i)]}})})}function Eg(t){return Object(tu.b)(this,void 0,void 0,function(){var e;return Object(tu.d)(this,function(n){return[2,xp((e=du(t)).localStore).then(function(t){return wg(e,t)})]})})}function xg(t,e,n,r){return Object(tu.b)(this,void 0,void 0,function(){var i,o;return Object(tu.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=du(t),r=du(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):$d.resolve(null)})})}((i=du(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,km(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(mg(i,e,r||null),pg(i,e),function(t,e){du(du(t)._n).Gt(e)}(i.localStore,e)):lu(),s.label=4;case 4:return[4,wg(i,o)];case 5:return s.sent(),[3,7];case 6:su("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function kg(t,e){return Object(tu.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,c;return Object(tu.d)(this,function(u){switch(u.label){case 0:return jg(n=du(t)),Dg(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Tg(n,r.toArray())]);case 1:return i=u.sent(),n.Oo=!0,[4,Dm(n.remoteStore,!0)];case 2:for(u.sent(),o=0,s=i;o<s.length;o++)pm(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],c=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):c=c.then(function(){return gg(n,e),Sp(n.localStore,e,!0)}),mm(n.remoteStore,e)}),[4,c]);case 4:return u.sent(),[4,Tg(n,a)];case 5:return u.sent(),function(t){var e=du(t);e.Co.forEach(function(t,n){mm(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new Ch(Vu.comparator)}(n),n.Oo=!1,[4,Dm(n.remoteStore,!1)];case 6:u.sent(),u.label=7;case 7:return[2]}})})}function Tg(t,e,n){return Object(tu.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,c,u,l,h,d,f,p;return Object(tu.d)(this,function(m){switch(m.label){case 0:n=du(t),r=[],i=[],o=0,s=e,m.label=1;case 1:return o<s.length?(c=void 0,(u=n.Vo.get(a=s[o]))&&0!==u.length?[4,Cp(n.localStore,Pl(u[0]))]:[3,7]):[3,13];case 2:c=m.sent(),l=0,h=u,m.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,Og(n,d)]):[3,6];case 4:(f=m.sent()).snapshot&&i.push(f.snapshot),m.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Ep(n.localStore,a)];case 8:return p=m.sent(),[4,Cp(n.localStore,p)];case 9:return c=m.sent(),[4,og(n,Ig(p),a,!1)];case 10:m.sent(),m.label=11;case 11:r.push(c),m.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function Ig(t){return Sl(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ag(t){var e=du(t);return du(du(e.localStore).persistence).fn()}function Pg(t,e,n,r){return Object(tu.b)(this,void 0,void 0,function(){var i,o,s;return Object(tu.d)(this,function(a){switch(a.label){case 0:return(i=du(t)).Oo?(su("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,xp(i.localStore)];case 3:return o=a.sent(),s=Fh.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,wg(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Sp(i.localStore,e,!0)];case 6:return a.sent(),gg(i,e,r),[3,8];case 7:lu(),a.label=8;case 8:return[2]}})})}function Rg(t,e,n){return Object(tu.b)(this,void 0,void 0,function(){var r,i,o,s,a,c,u,l,h;return Object(tu.d)(this,function(d){switch(d.label){case 0:if(!(r=jg(t)).Oo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(su("SyncEngine","Adding an already active target "+s),[3,5]):[4,Ep(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,Cp(r.localStore,a)];case 3:return c=d.sent(),[4,og(r,Ig(a),c.targetId,!1)];case 4:d.sent(),pm(r.remoteStore,c),d.label=5;case 5:return i++,[3,1];case 6:u=function(t){return Object(tu.d)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Sp(r.localStore,t,!1).then(function(){mm(r.remoteStore,t),gg(r,t)}).catch(zf)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,u(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function jg(t){var e=du(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Sg.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lg.bind(null,e),e.vo._r=Wm.bind(null,e.eventManager),e.vo.Mo=Gm.bind(null,e.eventManager),e}function Dg(t){var e=du(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hg.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dg.bind(null,e),e}var Ng=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(tu.b)(this,void 0,void 0,function(){return Object(tu.d)(this,function(e){switch(e.label){case 0:return this.R=im(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return mp(this.persistence,new fp,t.initialUser,this.R)},t.prototype.qo=function(t){return new Fp(Vp.bs,this.R)},t.prototype.Bo=function(t){return new Yp},t.prototype.terminate=function(){return Object(tu.b)(this,void 0,void 0,function(){return Object(tu.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Mg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(tu.c)(e,t),e.prototype.initialize=function(e){return Object(tu.b)(this,void 0,void 0,function(){return Object(tu.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,kp(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,Dg(this.Ko.syncEngine)];case 4:return n.sent(),[4,km(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return mp(this.persistence,new fp,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Wf(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=up(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Af.withCacheSize(this.cacheSizeBytes):Af.DEFAULT;return new sp(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,nm(),rm(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Yp},e}(Ng),Fg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(tu.c)(e,t),e.prototype.initialize=function(e){return Object(tu.b)(this,void 0,void 0,function(){var n,r=this;return Object(tu.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof $p?(this.sharedClientState.syncEngine={ui:xg.bind(null,n),ai:Pg.bind(null,n),hi:Rg.bind(null,n),fn:Ag.bind(null,n),ci:Eg.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(tu.b)(r,void 0,void 0,function(){return Object(tu.d)(this,function(e){switch(e.label){case 0:return[4,kg(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=nm();if(!$p.yt(e))throw new ru(nu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=up(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new $p(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Mg),Lg=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(tu.b)(this,void 0,void 0,function(){var n=this;return Object(tu.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return ug(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Cg.bind(null,this.syncEngine),[4,Dm(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new zm},t.prototype.createDatastore=function(t){var e=im(t.databaseInfo.databaseId),n=new em(t.databaseInfo);return function(t,e,n){return new um(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return ug(s.syncEngine,t,0)},o=Zp.yt()?new Zp:new Xp,new hm(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new rg(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(tu.b)(this,void 0,void 0,function(){var e;return Object(tu.d)(this,function(n){switch(n.label){case 0:return e=du(t),su("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,fm(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Vg=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),qg=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Qd,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(tu.b)(this,void 0,void 0,function(){return Object(tu.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(tu.b)(this,void 0,void 0,function(){return Object(tu.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(tu.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(tu.d)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Ym(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(tu.b)(this,void 0,void 0,function(){var t,e;return Object(tu.d)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(tu.b)(this,void 0,void 0,function(){var e;return Object(tu.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(tu.b)(this,void 0,void 0,function(){var t,e;return Object(tu.d)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(tu.b)(this,void 0,void 0,function(){var e,n=this;return Object(tu.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new ru(nu.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(tu.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(tu.d)(this,function(c){switch(c.label){case 0:return n=du(t),r=od(n.R)+"/documents",i={documents:e.map(function(t){return ed(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=c.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){hu(!!e.found);var n=nd(t,e.found.name),r=Zh(e.found.updateTime),i=new Ju({mapValue:{fields:e.found.fields}});return el.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){hu(!!e.missing),hu(!!e.readTime);var n=nd(t,e.missing),r=Zh(e.readTime);return el.newNoDocument(n,r)}(t,e):lu()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());hu(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new yh(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(tu.b)(this,void 0,void 0,function(){var t,e=this;return Object(tu.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Vu.fromPath(n);e.mutations.push(new bh(r,e.precondition(r)))}),[4,function(t,e){return Object(tu.b)(this,void 0,void 0,function(){var n,r,i;return Object(tu.d)(this,function(o){switch(o.label){case 0:return n=du(t),r=od(n.R)+"/documents",i={writes:e.map(function(t){return ud(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw lu();e=_u.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new ru(nu.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?nh.updateTime(e):nh.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(_u.min()))throw new ru(nu.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nh.updateTime(e)}return nh.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Ug=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new om(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(tu.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(tu.d)(this,function(r){return t=new qg(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Mu(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!vh(e)}return!1},t}(),Bg=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=qp.UNAUTHENTICATED,this.clientId=pu.u(),this.credentialListener=function(){},this.receivedInitialUser=new Qd,this.credentials.setChangeListener(function(t){su("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(tu.b)(this,void 0,void 0,function(){return Object(tu.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new ru(nu.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Qd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(tu.b)(t,void 0,void 0,function(){var t,n;return Object(tu.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Lm(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function zg(t,e){return Object(tu.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(tu.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),su("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(tu.b)(i,void 0,void 0,function(){return Object(tu.d)(this,function(t){switch(t.label){case 0:return[4,gp(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Hg(t,e){return Object(tu.b)(this,void 0,void 0,function(){var n,r;return Object(tu.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Kg(t)];case 1:return n=i.sent(),su("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(tu.b)(this,void 0,void 0,function(){var n,r;return Object(tu.d)(this,function(i){switch(i.label){case 0:return(n=du(t)).asyncQueue.verifyOperationInProgress(),su("RemoteStore","RemoteStore received new credentials"),r=vm(n),n.$r.add(3),[4,fm(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,dm(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function Kg(t){return Object(tu.b)(this,void 0,void 0,function(){return Object(tu.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(su("FirestoreClient","Using default OfflineComponentProvider"),[4,zg(t,new Ng)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Wg(t){return Object(tu.b)(this,void 0,void 0,function(){return Object(tu.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(su("FirestoreClient","Using default OnlineComponentProvider"),[4,Hg(t,new Lg)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Gg(t){return Kg(t).then(function(t){return t.persistence})}function Qg(t){return Kg(t).then(function(t){return t.localStore})}function $g(t){return Wg(t).then(function(t){return t.remoteStore})}function Yg(t){return Wg(t).then(function(t){return t.syncEngine})}function Xg(t){return Object(tu.b)(this,void 0,void 0,function(){var e,n;return Object(tu.d)(this,function(r){switch(r.label){case 0:return[4,Wg(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=ig.bind(null,e.syncEngine),n.onUnlisten=sg.bind(null,e.syncEngine),n)]}})})}function Zg(t,e,n){var r=this;void 0===n&&(n={});var i=new Qd;return t.asyncQueue.enqueueAndForget(function(){return Object(tu.b)(r,void 0,void 0,function(){var r;return Object(tu.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Vg({next:function(o){e.enqueueAndForget(function(){return Km(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new ru(nu.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new ru(nu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new $m(Ol(n.path),o,{includeMetadataChanges:!0,so:!0});return Hm(t,s)},[4,Xg(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Jg(t,e,n){var r=this;void 0===n&&(n={});var i=new Qd;return t.asyncQueue.enqueueAndForget(function(){return Object(tu.b)(r,void 0,void 0,function(){var r;return Object(tu.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Vg({next:function(n){e.enqueueAndForget(function(){return Km(t,s)}),n.fromCache&&"server"===r.source?i.reject(new ru(nu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new $m(n,o,{includeMetadataChanges:!0,so:!0});return Hm(t,s)},[4,Xg(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var ty=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},ey=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),ny=new Map,ry=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},iy=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(qp.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),oy=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(this.token.user)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),sy=function(){function t(t){var e=this;this.oc=null,this.currentUser=qp.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(su("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(hu("string"==typeof n.accessToken),new ry(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return hu(null===t||"string"==typeof t),new qp(t)},t}(),ay=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=qp.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),cy=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new ay(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(qp.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function uy(t,e,n){if(!n)throw new ru(nu.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function ly(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ru(nu.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function hy(t,e,n,r){if(!0===e&&!0===r)throw new ru(nu.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function dy(t){if(!Vu.isDocumentKey(t))throw new ru(nu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function fy(t){if(Vu.isDocumentKey(t))throw new ru(nu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function py(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":lu()}function my(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ru(nu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=py(t);throw new ru(nu.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function gy(t,e){if(e<=0)throw new ru(nu.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var yy=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new ru(nu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ru(nu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,hy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),by=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yy({}),this._settingsFrozen=!1,t instanceof ey?(this._databaseId=t,this._credentials=new iy):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ru(nu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ey(t.options.projectId)}(t),this._credentials=new sy(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new ru(nu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new ru(nu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yy(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new iy;switch(t.type){case"gapi":var e=t.client;return hu(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new cy(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ru(nu.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=ny.get(this))&&(su("ComponentProvider","Removing Datastore"),ny.delete(this),t.terminate()),Promise.resolve();var t},t}(),_y=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new wy(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),vy=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),wy=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Ol(r))||this)._path=r,i.type="collection",i}return Object(tu.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new _y(this.firestore,null,new Vu(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(vy);function Cy(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Yi.n)(t),uy("collection","path",e),t instanceof by)return fy(n=Ou.fromString.apply(Ou,Object(tu.f)([e],r))),new wy(t,null,n);if(!(t instanceof _y||t instanceof wy))throw new ru(nu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return fy(n=Ou.fromString.apply(Ou,Object(tu.f)([t.path],r)).child(Ou.fromString(e))),new wy(t.firestore,null,n)}function Sy(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Yi.n)(t),1===arguments.length&&(e=pu.u()),uy("doc","path",e),t instanceof by)return dy(n=Ou.fromString.apply(Ou,Object(tu.f)([e],r))),new _y(t,null,new Vu(n));if(!(t instanceof _y||t instanceof wy))throw new ru(nu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return dy(n=t._path.child(Ou.fromString.apply(Ou,Object(tu.f)([e],r)))),new _y(t.firestore,t instanceof wy?t.converter:null,new Vu(n))}function Oy(t,e){return t=Object(Yi.n)(t),e=Object(Yi.n)(e),(t instanceof _y||t instanceof wy)&&(e instanceof _y||e instanceof wy)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Ey(t,e){return t=Object(Yi.n)(t),e=Object(Yi.n)(e),t instanceof vy&&e instanceof vy&&t.firestore===e.firestore&&jl(t._query,e._query)&&t.converter===e.converter}var xy=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new om(this,"async_queue_retry"),this.Ec=function(){var e=rm();e&&su("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=rm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=rm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return Object(tu.b)(this,void 0,void 0,function(){var t,e=this;return Object(tu.d)(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!tf(t=n.sent()))throw t;return su("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,au("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=Fm.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&lu()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return Object(tu.b)(this,void 0,void 0,function(){var t;return Object(tu.d)(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function ky(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Qd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Ty=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new xy,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(tu.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Ay(this),this._firestoreClient.terminate()},e}(by);function Iy(t){return t._firestoreClient||Ay(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Ay(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new ty(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Bg(t._credentials,t._queue,r)}function Py(t,e,n){var r=this,i=new Qd;return t.asyncQueue.enqueue(function(){return Object(tu.b)(r,void 0,void 0,function(){var r;return Object(tu.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,zg(t,n)];case 1:return o.sent(),[4,Hg(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===nu.FAILED_PRECONDITION||t.code===nu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Ry(t){if(t._initialized||t._terminated)throw new ru(nu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var jy=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new ru(nu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xu(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Dy=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Tu.fromBase64String(e))}catch(e){throw new ru(nu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Tu.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Ny=function(t){this._methodName=t},My=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new ru(nu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ru(nu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return mu(this._lat,t._lat)||mu(this._long,t._long)},t}(),Fy=/^__.*__$/,Ly=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new hh(t,this.data,this.fieldMask,e,this.fieldTransforms):new lh(t,this.data,e,this.fieldTransforms)},t}(),Vy=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new hh(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function qy(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lu()}}var Uy=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return ab(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(qy(this.Dc)&&Fy.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),By=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||im(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new Uy({Dc:t,methodName:e,Lc:n,path:xu.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function zy(t){var e=t._freezeSettings(),n=im(t._databaseId);return new By(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Hy(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);rb("Data must be an object, but it was:",s,r);var a,c,u=eb(r,s);if(o.merge)a=new ku(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=ib(e,d[h],n);if(!s.contains(f))throw new ru(nu.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");cb(l,f)||l.push(f)}a=new ku(l),c=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,c=s.fieldTransforms;return new Ly(new Ju(u),a,c)}var Ky=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(tu.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Ny);function Wy(t,e,n){return new Uy({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Gy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(tu.c)(e,t),e.prototype._toFieldTransform=function(t){return new th(t.path,new Wl)},e.prototype.isEqual=function(t){return t instanceof e},e}(Ny),Qy=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(tu.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Wy(this,t,!0),n=this.qc.map(function(t){return tb(t,e)}),r=new Gl(n);return new th(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ny),$y=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(tu.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Wy(this,t,!0),n=this.qc.map(function(t){return tb(t,e)}),r=new $l(n);return new th(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ny),Yy=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(tu.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new Xl(t.R,Ul(t.R,this.Uc));return new th(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Ny);function Xy(t,e,n,r){var i=t.Bc(1,e,n);rb("Data must be an object, but it was:",i,r);var o=[],s=Ju.empty();wu(r,function(t,r){var a=sb(e,t,n);r=Object(Yi.n)(r);var c=i.kc(a);if(r instanceof Ky)o.push(a);else{var u=tb(r,c);null!=u&&(o.push(a),s.set(a,u))}});var a=new ku(o);return new Vy(s,a,i.fieldTransforms)}function Zy(t,e,n,r,i,o){var s=t.Bc(1,e,n),a=[ib(e,r,n)],c=[i];if(o.length%2!=0)throw new ru(nu.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var u=0;u<o.length;u+=2)a.push(ib(e,o[u])),c.push(o[u+1]);for(var l=[],h=Ju.empty(),d=a.length-1;d>=0;--d)if(!cb(l,a[d])){var f=a[d],p=c[d];p=Object(Yi.n)(p);var m=s.kc(f);if(p instanceof Ky)l.push(f);else{var g=tb(p,m);null!=g&&(l.push(f),h.set(f,g))}}var y=new ku(l);return new Vy(h,y,s.fieldTransforms)}function Jy(t,e,n,r){return void 0===r&&(r=!1),tb(n,t.Bc(r?4:3,e))}function tb(t,e){if(nb(t=Object(Yi.n)(t)))return rb("Unsupported field value:",e,t),eb(t,e);if(t instanceof Ny)return function(t,e){if(!qy(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=tb(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(Yi.n)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ul(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=bu.fromDate(t);return{timestampValue:$h(e.R,n)}}if(t instanceof bu)return n=new bu(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:$h(e.R,n)};if(t instanceof My)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Dy)return{bytesValue:Yh(e.R,t._byteString)};if(t instanceof _y){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Jh(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+py(t))}(t,e)}function eb(t,e){var n={};return Cu(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wu(t,function(t,r){var i=tb(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function nb(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof bu||t instanceof My||t instanceof Dy||t instanceof _y||t instanceof Ny)}function rb(t,e,n){if(!nb(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=py(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function ib(t,e,n){if((e=Object(Yi.n)(e))instanceof jy)return e._internalPath;if("string"==typeof e)return sb(t,e);throw ab("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var ob=new RegExp("[~\\*/\\[\\]]");function sb(t,e,n){if(e.search(ob)>=0)throw ab("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(jy.bind.apply(jy,Object(tu.f)([void 0],e.split(".")))))._internalPath}catch(r){throw ab("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function ab(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var c="";return(o||s)&&(c+=" (found",o&&(c+=" in field "+r),s&&(c+=" in document "+i),c+=")"),new ru(nu.INVALID_ARGUMENT,(a+=". ")+t+c)}function cb(t,e){return t.some(function(t){return t.isEqual(e)})}var ub=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new _y(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new lb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(hb("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),lb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(tu.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(ub);function hb(t,e){return"string"==typeof e?sb(t,e):e instanceof jy?e._internalPath:e._delegate._internalPath}var db=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),fb=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(tu.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new pb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(hb("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(ub),pb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(tu.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(fb),mb=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new db(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new pb(n._firestore,n._userDataWriter,r.key,r,new db(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ru(nu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new pb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new db(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new pb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new db(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:gb(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function gb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lu()}}function yb(t,e){return t instanceof fb&&e instanceof fb?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof mb&&e instanceof mb&&t._firestore===e._firestore&&Ey(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function bb(t){if(xl(t)&&0===t.explicitOrderBy.length)throw new ru(nu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var _b=function(){};function vb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var wb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return Object(tu.c)(e,t),e.prototype._apply=function(t){var e=zy(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new ru(nu.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Tb(s,o);for(var c=[],u=0,l=s;u<l.length;u++)c.push(kb(r,t,l[u]));a={arrayValue:{values:c}}}else a=kb(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Tb(s,o),a=Jy(n,"where",s,"in"===o||"not-in"===o);var h=al.create(i,o,a);return function(t,e){if(e.g()){var n=Tl(t);if(null!==n&&!n.isEqual(e.field))throw new ru(nu.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=kl(t);null!==r&&Ib(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new ru(nu.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new vy(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Cl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(_b),Cb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return Object(tu.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new ru(nu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new ru(nu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new bl(e,n);return function(t,e){if(null===kl(t)){var n=Tl(t);null!==n&&Ib(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new vy(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Cl(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(_b),Sb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return Object(tu.c)(e,t),e.prototype._apply=function(t){return new vy(t.firestore,t.converter,Rl(t._query,this.Gc,this.zc))},e}(_b),Ob=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(tu.c)(e,t),e.prototype._apply=function(t){var e=xb(t,this.type,this.Hc,this.Jc);return new vy(t.firestore,t.converter,function(t,e){return new Cl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(_b),Eb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(tu.c)(e,t),e.prototype._apply=function(t){var e=xb(t,this.type,this.Hc,this.Jc);return new vy(t.firestore,t.converter,function(t,e){return new Cl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(_b);function xb(t,e,n,r){if(n[0]=Object(Yi.n)(n[0]),n[0]instanceof ub)return function(t,e,n,r,i){if(!r)throw new ru(nu.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Al(t);s<a.length;s++){var c=a[s];if(c.field.isKeyField())o.push(Gu(e,r.key));else{var u=r.data.field(c.field);if(ju(u))throw new ru(nu.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===u){var l=c.field.canonicalString();throw new ru(nu.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(u)}}return new gl(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=zy(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new ru(nu.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],c=0;c<i.length;c++){var u=i[c];if(s[c].field.isKeyField()){if("string"!=typeof u)throw new ru(nu.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof u);if(!Il(t)&&-1!==u.indexOf("/"))throw new ru(nu.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+u+"' contains a slash.");var l=t.path.child(Ou.fromString(u));if(!Vu.isDocumentKey(l))throw new ru(nu.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Vu(l);a.push(Gu(e,h))}else{var d=Jy(n,r,u);a.push(d)}}return new gl(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function kb(t,e,n){if("string"==typeof(n=Object(Yi.n)(n))){if(""===n)throw new ru(nu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Il(e)&&-1!==n.indexOf("/"))throw new ru(nu.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Ou.fromString(n));if(!Vu.isDocumentKey(r))throw new ru(nu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Gu(t,new Vu(r))}if(n instanceof _y)return Gu(t,n._key);throw new ru(nu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+py(n)+".")}function Tb(t,e){if(!Array.isArray(t)||0===t.length)throw new ru(nu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new ru(nu.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Ib(t,e,n){if(!n.isEqual(e))throw new ru(nu.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Ab=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),qu(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Pu(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ru(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw lu()}},t.prototype.convertObject=function(t,e){var n=this,r={};return wu(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new My(Pu(t.latitude),Pu(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Du(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Nu(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Au(t);return new bu(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Ou.fromString(t);hu(Od(n));var r=new ey(n.get(1),n.get(3)),i=new Vu(n.popFirst(5));return r.isEqual(e)||au("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Pb(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Rb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(tu.c)(e,t),e.prototype.convertBytes=function(t){return new Dy(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new _y(this.firestore,null,e)},e}(Ab),jb=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=zy(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Db(t,this._firestore),i=Pb(r.converter,e,n),o=Hy(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,nh.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Db(t,this._firestore);return o="string"==typeof(e=Object(Yi.n)(e))||e instanceof jy?Zy(this._dataReader,"WriteBatch.update",s._key,e,n,r):Xy(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,nh.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Db(t,this._firestore);return this._mutations=this._mutations.concat(new yh(e._key,nh.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new ru(nu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Db(t,e){if((t=Object(Yi.n)(t)).firestore!==e)throw new ru(nu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Nb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(tu.c)(e,t),e.prototype.convertBytes=function(t){return new Dy(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new _y(this.firestore,null,e)},e}(Ab);function Mb(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=my(t,_y);var o=my(t.firestore,Ty),s=zy(o);return Lb(o,[("string"==typeof(e=Object(Yi.n)(e))||e instanceof jy?Zy(s,"updateDoc",t._key,e,n,r):Xy(s,"updateDoc",t._key,e)).toMutation(t._key,nh.exists(!0))])}function Fb(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(Yi.n)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||ky(i[a])||(s=i[a],a++);var c,u,l,h={includeMetadataChanges:s.includeMetadataChanges};if(ky(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof _y)u=my(t.firestore,Ty),l=Ol(t._key.path),c={next:function(e){i[a]&&i[a](Vb(u,t,e))},error:i[a+1],complete:i[a+2]};else{var f=my(t,vy);u=my(f.firestore,Ty),l=f._query;var p=new Nb(u);c={next:function(t){i[a]&&i[a](new mb(u,p,f,t))},error:i[a+1],complete:i[a+2]},bb(t._query)}return function(t,e,n,r){var i=this,o=new Vg(r),s=new $m(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(tu.b)(i,void 0,void 0,function(){var e;return Object(tu.d)(this,function(n){switch(n.label){case 0:return e=Hm,[4,Xg(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(tu.b)(i,void 0,void 0,function(){var e;return Object(tu.d)(this,function(n){switch(n.label){case 0:return e=Km,[4,Xg(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(Iy(u),l,h,c)}function Lb(t,e){return function(t,e){var n=this,r=new Qd;return t.asyncQueue.enqueueAndForget(function(){return Object(tu.b)(n,void 0,void 0,function(){var n;return Object(tu.d)(this,function(i){switch(i.label){case 0:return n=ag,[4,Yg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Iy(t),e)}function Vb(t,e,n){var r=n.docs.get(e._key),i=new Nb(t);return new fb(t,i,e._key,r,new db(n.hasPendingWrites,n.fromCache),e.converter)}var qb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(tu.c)(e,t),e.prototype.get=function(e){var n=this,r=Db(e,this._firestore),i=new Nb(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new fb(n._firestore,i,r._key,t._document,new db(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=zy(t)}return t.prototype.get=function(t){var e=this,n=Db(t,this._firestore),r=new Rb(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return lu();var i=t[0];if(i.isFoundDocument())return new ub(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new ub(e._firestore,r,n._key,null,n.converter);throw lu()})},t.prototype.set=function(t,e,n){var r=Db(t,this._firestore),i=Pb(r.converter,e,n),o=Hy(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Db(t,this._firestore);return o="string"==typeof(e=Object(Yi.n)(e))||e instanceof jy?Zy(this._dataReader,"Transaction.update",s._key,e,n,r):Xy(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Db(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Ub(){if("undefined"==typeof Uint8Array)throw new ru(nu.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Bb(){if("undefined"==typeof atob)throw new ru(nu.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var zb=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Bb(),new t(Dy.fromBase64String(e))},t.fromUint8Array=function(e){return Ub(),new t(Dy.fromUint8Array(e))},t.prototype.toBase64=function(){return Bb(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Ub(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Hb=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Ry(t=my(t,Ty));var n=Iy(t),r=t._freezeSettings(),i=new Lg;return Py(n,i,new Mg(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Ry(t=my(t,Ty));var e=Iy(t),n=t._freezeSettings(),r=new Lg;return Py(e,r,new Fg(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new ru(nu.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Qd;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(tu.b)(e,void 0,void 0,function(){var e;return Object(tu.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(tu.b)(this,void 0,void 0,function(){return Object(tu.d)(this,function(e){switch(e.label){case 0:return Xd.yt()?[4,Xd.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(up(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),Kb=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof ey||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=my(t,by))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&cu("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=Object(Yi.i)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new ru(nu.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new oy(new ry(o,new qp(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(tu.b)(e,void 0,void 0,function(){var e,n;return Object(tu.d)(this,function(r){switch(r.label){case 0:return[4,Gg(t)];case 1:return e=r.sent(),[4,$g(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=du(t);return e.$r.delete(0),dm(e)}(n))]}})})})}(Iy(my(this._delegate,Ty)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(tu.b)(e,void 0,void 0,function(){var e,n;return Object(tu.d)(this,function(r){switch(r.label){case 0:return[4,Gg(t)];case 1:return e=r.sent(),[4,$g(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(tu.b)(this,void 0,void 0,function(){var e;return Object(tu.d)(this,function(n){switch(n.label){case 0:return(e=du(t)).$r.add(0),[4,fm(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(Iy(my(this._delegate,Ty)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&hy("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Qd;return t.asyncQueue.enqueueAndForget(function(){return Object(tu.b)(e,void 0,void 0,function(){var e;return Object(tu.d)(this,function(r){switch(r.label){case 0:return e=fg,[4,Yg(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Iy(my(this._delegate,Ty)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Vg(e);return t.asyncQueue.enqueueAndForget(function(){return Object(tu.b)(n,void 0,void 0,function(){var e;return Object(tu.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){du(t).Gr.add(e),e.next()},[4,Xg(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(tu.b)(n,void 0,void 0,function(){var e;return Object(tu.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){du(t).Gr.delete(e)},[4,Xg(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Iy(t=my(t,Ty)),ky(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new ru(nu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new o_(this,Cy(this._delegate,t))}catch(t){throw Xb(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Yb(this,Sy(this._delegate,t))}catch(t){throw Xb(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new n_(this,function(t,e){if(t=my(t,by),uy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ru(nu.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new vy(t,null,function(t){return new Cl(Ou.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Xb(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Qd;return t.asyncQueue.enqueueAndForget(function(){return Object(tu.b)(n,void 0,void 0,function(){var n;return Object(tu.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return Wg(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Ug(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(Iy(t),function(n){return e(new qb(t,n))})}(this._delegate,function(n){return t(new Gb(e,n))})},t.prototype.batch=function(){var t=this;return Iy(this._delegate),new Qb(new jb(this._delegate,function(e){return Lb(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new ru(nu.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new ru(nu.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Wb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(tu.c)(e,t),e.prototype.convertBytes=function(t){return new zb(new Dy(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Yb.Zc(e,this.firestore,null)},e}(Ab),Gb=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Wb(t)}return t.prototype.get=function(t){var e=this,n=s_(t);return this._delegate.get(n).then(function(t){return new t_(e._firestore,new fb(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=s_(t);return n?(ly("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=s_(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(tu.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=s_(t);return this._delegate.delete(e),this},t}(),Qb=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=s_(t);return n?(ly("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=s_(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(tu.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=s_(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),$b=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new pb(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new e_(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Wb(e),n),i.set(n,o)),o},t}();$b.eu=new WeakMap;var Yb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Wb(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new ru(nu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new _y(n._delegate,r,new Vu(e)))},t.Zc=function(e,n,r){return new t(n,new _y(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new o_(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new o_(this.firestore,Cy(this._delegate,t))}catch(t){throw Xb(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(Yi.n)(t))instanceof _y&&Oy(this._delegate,t)},t.prototype.set=function(t,e){e=ly("DocumentReference.set",e);try{return function(t,e,n){t=my(t,_y);var r=my(t.firestore,Ty),i=Pb(t.converter,e,n);return Lb(r,[Hy(zy(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,nh.none())])}(this._delegate,t,e)}catch(t){throw Xb(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Mb(this._delegate,t):Mb.apply(void 0,Object(tu.f)([this._delegate,t,e],n))}catch(t){throw Xb(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Lb(my((t=this._delegate).firestore,Ty),[new yh(t._key,nh.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Zb(e),i=Jb(e,function(e){return new t_(t.firestore,new fb(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return Fb(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=my(t,_y);var e=my(t.firestore,Ty),n=Iy(e),r=new Nb(e);return function(t,e){var n=this,r=new Qd;return t.asyncQueue.enqueueAndForget(function(){return Object(tu.b)(n,void 0,void 0,function(){var n;return Object(tu.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(tu.b)(this,void 0,void 0,function(){var r,i;return Object(tu.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=du(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new ru(nu.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Lm(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Qg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new fb(e,r,t._key,n,new db(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=my(t,_y);var e=my(t.firestore,Ty);return Zg(Iy(e),t._key,{source:"server"}).then(function(n){return Vb(e,t,n)})}(this._delegate):function(t){t=my(t,_y);var e=my(t.firestore,Ty);return Zg(Iy(e),t._key).then(function(n){return Vb(e,t,n)})}(this._delegate)).then(function(t){return new t_(e.firestore,new fb(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?$b.tu(this.firestore,e):null))},t}();function Xb(t,e,n){return t.message=t.message.replace(e,n),t}function Zb(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!ky(r))return r}return{}}function Jb(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=ky(t[0])?t[0]:ky(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var t_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Yb(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return yb(this._delegate,t._delegate)},t}(),e_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(tu.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(t_),n_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Wb(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,vb(this._delegate,function(t,e,n){var r=e,i=hb("where",t);return new wb(i,r,n)}(e,n,r)))}catch(e){throw Xb(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,vb(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=hb("orderBy",t);return new Cb(r,n)}(e,n)))}catch(e){throw Xb(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,vb(this._delegate,function(t){return gy("limit",t),new Sb("limit",t,"F")}(e)))}catch(e){throw Xb(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,vb(this._delegate,function(t){return gy("limitToLast",t),new Sb("limitToLast",t,"L")}(e)))}catch(e){throw Xb(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,vb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ob("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw Xb(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,vb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ob("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw Xb(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,vb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Eb("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw Xb(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,vb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Eb("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw Xb(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Ey(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=my(t,vy);var e=my(t.firestore,Ty),n=Iy(e),r=new Nb(e);return function(t,e){var n=this,r=new Qd;return t.asyncQueue.enqueueAndForget(function(){return Object(tu.b)(n,void 0,void 0,function(){var n;return Object(tu.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(tu.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(tu.d)(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,Op(t,e,!0)];case 1:return a=c.sent(),r=new tg(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=c.sent(),a=Lm(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Qg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new mb(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=my(t,vy);var e=my(t.firestore,Ty),n=Iy(e),r=new Nb(e);return Jg(n,t._query,{source:"server"}).then(function(n){return new mb(e,r,t,n)})}(this._delegate):function(t){t=my(t,vy);var e=my(t.firestore,Ty),n=Iy(e),r=new Nb(e);return bb(t._query),Jg(n,t._query).then(function(n){return new mb(e,r,t,n)})}(this._delegate)).then(function(t){return new i_(e.firestore,new mb(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Zb(e),i=Jb(e,function(e){return new i_(t.firestore,new mb(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return Fb(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?$b.tu(this.firestore,e):null))},t}(),r_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new e_(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),i_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new n_(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new e_(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new r_(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new e_(n._firestore,r))})},t.prototype.isEqual=function(t){return yb(this._delegate,t._delegate)},t}(),o_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(tu.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Yb(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Yb(this.firestore,void 0===t?Sy(this._delegate):Sy(this._delegate,t))}catch(t){throw Xb(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=my(t.firestore,Ty),r=Sy(t),i=Pb(t.converter,e);return Lb(n,[Hy(zy(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,nh.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Yb(e.firestore,t)})},e.prototype.isEqual=function(t){return Oy(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?$b.tu(this.firestore,t):null))},e}(n_);function s_(t){return my(t,_y)}var a_,c_=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(jy.bind.apply(jy,Object(tu.f)([void 0],t)))}return t.documentId=function(){return new t(xu.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(Yi.n)(t))instanceof jy&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),u_=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Gy("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Ky("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qy("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new $y("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Yy("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),l_=n("/6Yf"),h_={Firestore:Kb,GeoPoint:My,Timestamp:bu,Blob:zb,Transaction:Gb,WriteBatch:Qb,DocumentReference:Yb,DocumentSnapshot:t_,Query:n_,QueryDocumentSnapshot:e_,QuerySnapshot:i_,CollectionReference:o_,FieldPath:c_,FieldValue:u_,setLogLevel:function(t){iu.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new l_.a("firestore",function(t){return function(t,e){return new Kb(t,new Ty(t,e),new Hb)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},h_)))})(a_=$i.a),a_.registerVersion("@firebase/firestore","2.3.0");var d_=n("VRyK"),f_=n("qgXg"),p_=n("Ylt2");class m_ extends Lt.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new g_(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new Vt.a;if(this.isStopped||this.hasError?o=Ve.a.EMPTY:(this.observers.push(t),o=new p_.a(this,t)),r&&t.add(t=new Wi.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||f_.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class g_{constructor(t,e){this.time=t,this.value=e}}function y_(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,c=!1;return function(u){let l;s++,!i||a?(a=!1,i=new m_(t,e,r),l=i.subscribe(this),o=u.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){c=!0,o=void 0,i.complete()}}),c&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!c&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function b_(t,e){return e?ae(()=>t,e):ae(()=>t)}var __=n("tf+s");const v_=new r.q("angularfire2.auth.use-emulator"),w_=new r.q("angularfire2.auth.settings"),C_=new r.q("angularfire2.auth.tenant-id"),S_=new r.q("angularfire2.auth.langugage-code"),O_=new r.q("angularfire2.auth.use-device-language"),E_=new r.q("angularfire.auth.persistence");let x_=(()=>{class t{constructor(t,e,r,i,o,s,a,c,u,l){const h=new Gi.d(i),d=Object(Gi.h)(h),f=new Lt.a,p=Object(Ft.a)(void 0).pipe(Object(Wi.b)(h.outsideAngular),ae(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(oe.a)(()=>Object(Gi.g)(t,i,e)),Object(oe.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(Gi.f)(t.name+".auth","AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator("http://"+e.join(":")),a&&(r.tenantId=a),r.languageCode=c,u&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,c,u,n,l])})),y_({bufferSize:1,refCount:!1}));if(et(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(Ft.a)(null);else{p.pipe(Fe()).subscribe();const t=p.pipe(ae(t=>t.getRedirectResult().then(t=>t,()=>null)),d,y_({bufferSize:1,refCount:!1})),e=t=>new Gt.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(ae(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(ae(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(b_(n),Object(__.a)(h.outsideAngular),Object(Wi.b)(h.insideAngular)),this.user=t.pipe(b_(r),Object(__.a)(h.outsideAngular),Object(Wi.b)(h.insideAngular)),this.idToken=this.user.pipe(ae(t=>t?Object(Mt.a)(t.getIdToken()):Object(Ft.a)(null))),this.idTokenResult=this.user.pipe(ae(t=>t?Object(Mt.a)(t.getIdTokenResult()):Object(Ft.a)(null))),this.credential=Object(d_.a)(t,f,this.authState.pipe(be(t=>!t))).pipe(Object(oe.a)(t=>(null==t?void 0:t.user)?t:null),Object(__.a)(h.outsideAngular),Object(Wi.b)(h.insideAngular))}return Object(Gi.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(Gi.c),r.Tb(Gi.b,8),r.Tb(r.B),r.Tb(r.z),r.Tb(v_,8),r.Tb(w_,8),r.Tb(C_,8),r.Tb(S_,8),r.Tb(O_,8),r.Tb(E_,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(Gi.c),Object(r.Tb)(Gi.b,8),Object(r.Tb)(r.B),Object(r.Tb)(r.z),Object(r.Tb)(v_,8),Object(r.Tb)(w_,8),Object(r.Tb)(C_,8),Object(r.Tb)(S_,8),Object(r.Tb)(O_,8),Object(r.Tb)(E_,8))},token:t,providedIn:"any"}),t})();function k_(t,e){return function(t,e=Vi.b){return new Gt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function T_(t,e){return k_(t,e).pipe(Object(oe.a)(t=>({payload:t,type:"query"})))}function I_(t,e){return T_(t,e).pipe(pe(void 0),qi(),Object(oe.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function A_(t,e,n){return I_(t,n).pipe(me((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return P_(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return P_(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return P_(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),zi(),Object(oe.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function P_(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function R_(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}Object(Gi.e)(x_,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class j_{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=I_(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(oe.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(pe(void 0),qi(),be(([t,e])=>e.length>0||!t),Object(oe.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(me((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=R_(t);return A_(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return T_(this.query,this.afs.schedulers.outsideAngular).pipe(Object(oe.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Mt.a)(this.query.get(t)).pipe(Object(Wi.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new D_(this.ref.doc(t),this.afs)}}class D_{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=q_(n,e);return new j_(r,i,this.afs)}snapshotChanges(){return k_(this.ref,this.afs.schedulers.outsideAngular).pipe(pe(void 0),qi(),Object(oe.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(oe.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(Mt.a)(this.ref.get(t)).pipe(Object(Wi.b)(this.afs.schedulers.insideAngular))}}class N_{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?I_(this.query,this.afs.schedulers.outsideAngular).pipe(Object(oe.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),be(t=>t.length>0),this.afs.keepUnstableUntilFirst):I_(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(me((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=R_(t);return A_(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return T_(this.query,this.afs.schedulers.outsideAngular).pipe(Object(oe.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Mt.a)(this.query.get(t)).pipe(Object(Wi.b)(this.afs.schedulers.insideAngular))}}const M_=new r.q("angularfire2.enableFirestorePersistence"),F_=new r.q("angularfire2.firestore.persistenceSettings"),L_=new r.q("angularfire2.firestore.settings"),V_=new r.q("angularfire2.firestore.use-emulator");function q_(t,e=(t=>t)){return{query:e(t),ref:t}}let U_,B_=(()=>{class t{constructor(t,e,n,r,i,o,s,a,c){this.schedulers=new Gi.d(o),this.keepUnstableUntilFirst=Object(Gi.h)(this.schedulers);const u=Object(Gi.g)(t,o,e);!Qi.a.auth&&c&&Object(Gi.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(Gi.f)(u.name+".firestore","AngularFirestore",u,()=>{const t=o.runOutsideAngular(()=>u.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!et(i)){const e=()=>{try{return Object(Mt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(a_){return"undefined"!=typeof console&&console.warn(a_),Object(Ft.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(Ft.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=q_(n,e),o=this.schedulers.ngZone.run(()=>r);return new j_(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new N_(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new D_(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(Gi.c),r.Tb(Gi.b,8),r.Tb(M_,8),r.Tb(L_,8),r.Tb(r.B),r.Tb(r.z),r.Tb(F_,8),r.Tb(V_,8),r.Tb(v_,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(Gi.c),Object(r.Tb)(Gi.b,8),Object(r.Tb)(M_,8),Object(r.Tb)(L_,8),Object(r.Tb)(r.B),Object(r.Tb)(r.z),Object(r.Tb)(F_,8),Object(r.Tb)(V_,8),Object(r.Tb)(v_,8))},token:t,providedIn:"any"}),t})(),z_=(()=>{class t{constructor(t){this.firestore=t,this.roomKey="Loading Room Key",this.isManager=!1,this.sessionDocument={},this.roomState={story:"",users:[],showVotes:!1},this.pokerRoom=new qt({story:"",users:[],showVotes:!1})}joinRoom(t){this.roomKey=t;const e="poker/"+t;return new Gt.a(t=>{this.sessionDocument=this.firestore.doc(e),this.sessionDocument.snapshotChanges().subscribe(e=>{"removed"===e.type&&this.deleteDocAndExit();const n=e.payload.data();n?(this.roomState.showVotes=n.showVotes,this.roomState.story=n.story,this.pokerRoom.next(this.roomState),t.next(!0)):t.next(!1)},t=>(console.log(t),!1)),this.sessionDocument.collection("users",t=>t.where("name","!=","default")).valueChanges().subscribe(t=>{const e=[];t.forEach(t=>{e.push({name:t.name,hasVoted:t.hasVoted,point:t.point,isManager:t.isManager,willNotVote:t.willNotVote})}),this.roomState.users=e,this.pokerRoom.next(this.roomState)})})}createSession(t){return new Gt.a(e=>{this.isManager=!0,this.firestore.collection("poker").add(t).then(t=>{this.sessionDocument=this.firestore.doc("poker/"+t.id),this.roomKey=t.id,this.sessionDocument.collection("users").doc("default").set({name:"default",hasVoted:!1,point:0,isManager:!1}),e.next(t.id)})})}updateRoom(t){this.sessionDocument.update({story:t.story,showVotes:t.showVotes})}deleteDocAndExit(){this.sessionDocument.delete().then(()=>{this.exitRooom()})}exitRooom(){var t=localStorage.getItem("userName");this.removeUser(t),localStorage.removeItem("pokerKey"),localStorage.removeItem("userName"),location.reload()}removeUser(t){this.sessionDocument.collection("users").doc(t).delete()}updateUser(t){this.sessionDocument.collection("users").doc(t.name).set(t)}resetUsers(){this.roomState.users.forEach(t=>{this.sessionDocument.collection("users").doc(t.name).update({hasVoted:!1,point:0})})}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(B_))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function H_(t,...e){return e.length?e.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}function K_(t,e=Vi.a){return n=>n.lift(new W_(t,e))}class W_{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new G_(t,this.dueTime,this.scheduler))}}class G_ extends zt.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Q_,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function Q_(t){t.debouncedNext()}function $_(t){return null!=t&&""+t!="false"}function Y_(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function X_(t){return Array.isArray(t)?t:[t]}function Z_(t){return null==t?"":"string"==typeof t?t:t+"px"}function J_(t){return t instanceof r.l?t.nativeElement:t}try{U_="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(zA){U_=!1}let tv,ev=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!U_)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.B))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(r.B))},token:t,providedIn:"root"}),t})(),nv=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)}}),t})();const rv=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function iv(){if(tv)return tv;if("object"!=typeof document||!document)return tv=new Set(rv),tv;let t=document.createElement("input");return tv=new Set(rv.filter(e=>(t.setAttribute("type",e),t.type===e))),tv}let ov,sv,av;function cv(t){return function(){if(null==ov&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ov=!0}))}finally{ov=ov||!1}return ov}()?t:!!t.capture}function uv(){if(null==sv){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return sv=!1,sv;if("scrollBehavior"in document.documentElement.style)sv=!0;else{const t=Element.prototype.scrollTo;sv=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return sv}let lv=(()=>{class t{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:function(){return new t},token:t,providedIn:"root"}),t})(),hv=(()=>{class t{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,e)=>this._cleanupObserver(e))}observe(t){const e=J_(t);return new Gt.a(t=>{const n=this._observeElement(e).subscribe(t);return()=>{n.unsubscribe(),this._unobserveElement(e)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const e=new Lt.a,n=this._mutationObserverFactory.create(t=>e.next(t));n&&n.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:n,stream:e,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:e,stream:n}=this._observedElements.get(t);e&&e.disconnect(),n.complete(),this._observedElements.delete(t)}}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(lv))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(lv))},token:t,providedIn:"root"}),t})(),dv=(()=>{class t{constructor(t,e,n){this._contentObserver=t,this._elementRef=e,this._ngZone=n,this.event=new r.n,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=$_(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Y_(t),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(K_(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(hv),r.Kb(r.l),r.Kb(r.z))},t.\u0275dir=r.Fb({type:t,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),t})(),fv=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[lv]}),t})();function pv(t,e){return(t.getAttribute(e)||"").match(/\S+/g)||[]}const mv="cdk-describedby-message-container",gv="cdk-describedby-host";let yv=0;const bv=new Map;let _v=null,vv=(()=>{class t{constructor(t){this._document=t}describe(t,e,n){if(!this._canBeDescribed(t,e))return;const r=wv(e,n);"string"!=typeof e?(Cv(e),bv.set(r,{messageElement:e,referenceCount:0})):bv.has(r)||this._createMessageElement(e,n),this._isElementDescribedByMessage(t,r)||this._addMessageReference(t,r)}removeDescription(t,e,n){if(!e||!this._isElementNode(t))return;const r=wv(e,n);if(this._isElementDescribedByMessage(t,r)&&this._removeMessageReference(t,r),"string"==typeof e){const t=bv.get(r);t&&0===t.referenceCount&&this._deleteMessageElement(r)}_v&&0===_v.childNodes.length&&this._deleteMessagesContainer()}ngOnDestroy(){const t=this._document.querySelectorAll("[cdk-describedby-host]");for(let e=0;e<t.length;e++)this._removeCdkDescribedByReferenceIds(t[e]),t[e].removeAttribute(gv);_v&&this._deleteMessagesContainer(),bv.clear()}_createMessageElement(t,e){const n=this._document.createElement("div");Cv(n),n.textContent=t,e&&n.setAttribute("role",e),this._createMessagesContainer(),_v.appendChild(n),bv.set(wv(t,e),{messageElement:n,referenceCount:0})}_deleteMessageElement(t){const e=bv.get(t),n=e&&e.messageElement;_v&&n&&_v.removeChild(n),bv.delete(t)}_createMessagesContainer(){if(!_v){const t=this._document.getElementById(mv);t&&t.parentNode&&t.parentNode.removeChild(t),_v=this._document.createElement("div"),_v.id=mv,_v.style.visibility="hidden",_v.classList.add("cdk-visually-hidden"),this._document.body.appendChild(_v)}}_deleteMessagesContainer(){_v&&_v.parentNode&&(_v.parentNode.removeChild(_v),_v=null)}_removeCdkDescribedByReferenceIds(t){const e=pv(t,"aria-describedby").filter(t=>0!=t.indexOf("cdk-describedby-message"));t.setAttribute("aria-describedby",e.join(" "))}_addMessageReference(t,e){const n=bv.get(e);!function(t,e,n){const r=pv(t,e);r.some(t=>t.trim()==n.trim())||(r.push(n.trim()),t.setAttribute(e,r.join(" ")))}(t,"aria-describedby",n.messageElement.id),t.setAttribute(gv,""),n.referenceCount++}_removeMessageReference(t,e){const n=bv.get(e);n.referenceCount--,function(t,e,n){const r=pv(t,e).filter(t=>t!=n.trim());r.length?t.setAttribute(e,r.join(" ")):t.removeAttribute(e)}(t,"aria-describedby",n.messageElement.id),t.removeAttribute(gv)}_isElementDescribedByMessage(t,e){const n=pv(t,"aria-describedby"),r=bv.get(e),i=r&&r.messageElement.id;return!!i&&-1!=n.indexOf(i)}_canBeDescribed(t,e){if(!this._isElementNode(t))return!1;if(e&&"object"==typeof e)return!0;const n=null==e?"":(""+e).trim(),r=t.getAttribute("aria-label");return!(!n||r&&r.trim()===n)}_isElementNode(t){return t.nodeType===this._document.ELEMENT_NODE}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(a))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(a))},token:t,providedIn:"root"}),t})();function wv(t,e){return"string"==typeof t?`${e||""}/${t}`:t}function Cv(t){t.id||(t.id="cdk-describedby-message-"+yv++)}class Sv extends class{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Lt.a,this._typeaheadSubscription=Ve.a.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new Lt.a,this.change=new Lt.a,t instanceof r.D&&t.changes.subscribe(t=>{if(this._activeItem){const e=t.toArray().indexOf(this._activeItem);e>-1&&e!==this._activeItemIndex&&(this._activeItemIndex=e)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Object(Le.a)(t=>this._pressedLetters.push(t)),K_(t),be(()=>this._pressedLetters.length>0),Object(oe.a)(()=>this._pressedLetters.join(""))).subscribe(t=>{const e=this._getItemsArray();for(let n=1;n<e.length+1;n++){const r=(this._activeItemIndex+n)%e.length,i=e[r];if(!this._skipPredicateFn(i)&&0===i.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(r);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,n=["altKey","ctrlKey","metaKey","shiftKey"].every(e=>!t[e]||this._allowedModifierKeys.indexOf(e)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&n){this.setNextItemActive();break}return;case 38:if(this._vertical&&n){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&n){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&n){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&n){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&n){this.setLastItemActive();break}return;default:return void((n||H_(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),n="number"==typeof t?t:e.indexOf(t),r=e[n];this._activeItem=null==r?null:r,this._activeItemIndex=n}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let n=1;n<=e.length;n++){const r=(this._activeItemIndex+t*n+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(!n[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof r.D?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let Ov=(()=>{class t{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const e=function(t){try{return t.frameElement}catch(zA){return null}}((n=t).ownerDocument&&n.ownerDocument.defaultView||window);var n;if(e){if(-1===xv(e))return!1;if(!this.isVisible(e))return!1}let r=t.nodeName.toLowerCase(),i=xv(t);return t.hasAttribute("contenteditable")?-1!==i:"iframe"!==r&&"object"!==r&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==i:"video"===r?-1!==i&&(null!==i||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,e){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||Ev(t))}(t)&&!this.isDisabled(t)&&((null==e?void 0:e.ignoreVisibility)||this.isVisible(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(ev))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(ev))},token:t,providedIn:"root"}),t})();function Ev(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function xv(t){if(!Ev(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class kv{constructor(t,e,n,r,i=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,i||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement()))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);for(let n=0;n<e.length;n++)e[n].hasAttribute("cdk-focus-"+t)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]):e[n].hasAttribute("cdk-focus-region-"+t)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),!this._checker.isFocusable(t)){const e=this._getFirstTabbableElement(t);return null==e||e.focus(),!!e}return t.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){const t=this._getRegionBoundary("start");return t&&t.focus(),!!t}focusLastTabbableElement(){const t=this._getRegionBoundary("end");return t&&t.focus(),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=0;n<e.length;n++){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(t)return t}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=e.length-1;n>=0;n--){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(t)return t}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(he(1)).subscribe(t)}}let Tv=(()=>{class t{constructor(t,e,n){this._checker=t,this._ngZone=e,this._document=n}create(t,e=!1){return new kv(t,this._checker,this._ngZone,this._document,e)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(Ov),r.Tb(r.z),r.Tb(a))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(Ov),Object(r.Tb)(r.z),Object(r.Tb)(a))},token:t,providedIn:"root"}),t})();"undefined"!=typeof Element&&Element;const Iv=new r.q("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),Av=new r.q("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let Pv=(()=>{class t{constructor(t,e,n,r){this._ngZone=e,this._defaultOptions=r,this._document=n,this._liveElement=t||this._createLiveElement()}announce(t,...e){const n=this._defaultOptions;let r,i;return 1===e.length&&"number"==typeof e[0]?i=e[0]:[r,i]=e,this.clear(),clearTimeout(this._previousTimeout),r||(r=n&&n.politeness?n.politeness:"polite"),null==i&&n&&(i=n.duration),this._liveElement.setAttribute("aria-live",r),this._ngZone.runOutsideAngular(()=>new Promise(e=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,e(),"number"==typeof i&&(this._previousTimeout=setTimeout(()=>this.clear(),i))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const t="cdk-live-announcer-element",e=this._document.getElementsByClassName(t),n=this._document.createElement("div");for(let r=0;r<e.length;r++)e[r].parentNode.removeChild(e[r]);return n.classList.add(t),n.classList.add("cdk-visually-hidden"),n.setAttribute("aria-atomic","true"),n.setAttribute("aria-live","polite"),this._document.body.appendChild(n),n}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(Iv,8),r.Tb(r.z),r.Tb(a),r.Tb(Av,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(Iv,8),Object(r.Tb)(r.z),Object(r.Tb)(a),Object(r.Tb)(Av,8))},token:t,providedIn:"root"}),t})();function Rv(t){return 0===t.buttons}function jv(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Dv=new r.q("cdk-focus-monitor-default-options"),Nv=cv({passive:!0,capture:!0});let Mv=(()=>{class t{constructor(t,e,n,r){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=t=>{if(!this._lastTouchTarget){const e=Rv(t)?"keyboard":"mouse";this._setOriginForCurrentEventQueue(e)}},this._documentTouchstartListener=t=>{jv(t)?this._lastTouchTarget||this._setOriginForCurrentEventQueue("keyboard"):(null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=Fv(t),this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650))},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._rootNodeFocusAndBlurListener=t=>{const e=Fv(t),n="focus"===t.type?this._onFocus:this._onBlur;for(let r=e;r;r=r.parentElement)n.call(this,t,r)},this._document=n,this._detectionMode=(null==r?void 0:r.detectionMode)||0}monitor(t,e=!1){const n=J_(t);if(!this._platform.isBrowser||1!==n.nodeType)return Object(Ft.a)(null);const r=function(t){if(function(){if(null==av){const t="undefined"!=typeof document?document.head:null;av=!(!t||!t.createShadowRoot&&!t.attachShadow)}return av}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(n)||this._getDocument(),i=this._elementInfo.get(n);if(i)return e&&(i.checkChildren=!0),i.subject;const o={checkChildren:e,subject:new Lt.a,rootNode:r};return this._elementInfo.set(n,o),this._registerGlobalListeners(o),o.subject}stopMonitoring(t){const e=J_(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}focusVia(t,e,n){const r=J_(t);r===this._getDocument().activeElement?this._getClosestElementsInfo(r).forEach(([t,n])=>this._originChanged(t,e,n)):(this._setOriginForCurrentEventQueue(e),"function"==typeof r.focus&&r.focus(n))}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_getFocusOrigin(t){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"}_setClasses(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}_setOriginForCurrentEventQueue(t){this._ngZone.runOutsideAngular(()=>{this._origin=t,0===this._detectionMode&&(this._originTimeoutId=setTimeout(()=>this._origin=null,1))})}_wasCausedByTouch(t){const e=Fv(t);return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}_onFocus(t,e){const n=this._elementInfo.get(e);n&&(n.checkChildren||e===Fv(t))&&this._originChanged(e,this._getFocusOrigin(t),n)}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const e=t.rootNode,n=this._rootNodeFocusListenerCount.get(e)||0;n||this._ngZone.runOutsideAngular(()=>{e.addEventListener("focus",this._rootNodeFocusAndBlurListener,Nv),e.addEventListener("blur",this._rootNodeFocusAndBlurListener,Nv)}),this._rootNodeFocusListenerCount.set(e,n+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(()=>{const t=this._getDocument(),e=this._getWindow();t.addEventListener("keydown",this._documentKeydownListener,Nv),t.addEventListener("mousedown",this._documentMousedownListener,Nv),t.addEventListener("touchstart",this._documentTouchstartListener,Nv),e.addEventListener("focus",this._windowFocusListener)})}_removeGlobalListeners(t){const e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){const t=this._rootNodeFocusListenerCount.get(e);t>1?this._rootNodeFocusListenerCount.set(e,t-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Nv),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Nv),this._rootNodeFocusListenerCount.delete(e))}if(!--this._monitoredElementCount){const t=this._getDocument(),e=this._getWindow();t.removeEventListener("keydown",this._documentKeydownListener,Nv),t.removeEventListener("mousedown",this._documentMousedownListener,Nv),t.removeEventListener("touchstart",this._documentTouchstartListener,Nv),e.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}_originChanged(t,e,n){this._setClasses(t,e),this._emitOrigin(n.subject,e),this._lastFocusOrigin=e}_getClosestElementsInfo(t){const e=[];return this._elementInfo.forEach((n,r)=>{(r===t||n.checkChildren&&r.contains(t))&&e.push([r,n])}),e}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.z),r.Tb(ev),r.Tb(a,8),r.Tb(Dv,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(r.z),Object(r.Tb)(ev),Object(r.Tb)(a,8),Object(r.Tb)(Dv,8))},token:t,providedIn:"root"}),t})();function Fv(t){return t.composedPath?t.composedPath()[0]:t.target}const Lv="cdk-high-contrast-black-on-white",Vv="cdk-high-contrast-white-on-black",qv="cdk-high-contrast-active";let Uv=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(qv),t.remove(Lv),t.remove(Vv);const e=this.getHighContrastMode();1===e?(t.add(qv),t.add(Lv)):2===e&&(t.add(qv),t.add(Vv))}}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(ev),r.Tb(a))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(ev),Object(r.Tb)(a))},token:t,providedIn:"root"}),t})(),Bv=(()=>{class t{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)(r.Tb(Uv))},imports:[[nv,fv]]}),t})();const zv=new r.q("cdk-dir-doc",{providedIn:"root",factory:function(){return Object(r.V)(a)}});let Hv=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new r.n,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(zv,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(zv,8))},token:t,providedIn:"root"}),t})(),Kv=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)}}),t})();const Wv=new r.P("11.2.13");class Gv{}const Qv="*";function $v(t,e){return{type:7,name:t,definitions:e,options:{}}}function Yv(t,e=null){return{type:4,styles:e,timings:t}}function Xv(t,e=null){return{type:2,steps:t,options:e}}function Zv(t){return{type:6,styles:t,offset:null}}function Jv(t,e,n){return{type:0,name:t,styles:e,options:n}}function tw(t){return{type:5,steps:t}}function ew(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function nw(t){Promise.resolve(null).then(t)}class rw{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){nw(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class iw{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?nw(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function ow(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function sw(t){switch(t.length){case 0:return new rw;case 1:return t[0];default:return new iw(t)}}function aw(t,e,n,r,i={},o={}){const s=[],a=[];let c=-1,u=null;if(r.forEach(t=>{const n=t.offset,r=n==c,l=r&&u||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case Qv:a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a}),r||a.push(l),u=l,c=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function cw(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&uw(n,"start",t)));break;case"done":t.onDone(()=>r(n&&uw(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&uw(n,"destroy",t)))}}function uw(t,e,n){const r=n.totalTime,i=lw(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function lw(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function hw(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function dw(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let fw=(t,e)=>!1,pw=(t,e)=>!1,mw=(t,e,n)=>[];const gw=ow();(gw||"undefined"!=typeof Element)&&(fw=(t,e)=>t.contains(e),pw=(()=>{if(gw||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):pw}})(),mw=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let yw=null,bw=!1;function _w(t){yw||(yw=("undefined"!=typeof document?document.body:null)||{},bw=!!yw.style&&"WebkitAppearance"in yw.style);let e=!0;return yw.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in yw.style,!e&&bw)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in yw.style),e}const vw=pw,ww=fw,Cw=mw;function Sw(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let Ow=(()=>{class t{validateStyleProperty(t){return _w(t)}matchesElement(t,e){return vw(t,e)}containsElement(t,e){return ww(t,e)}query(t,e,n){return Cw(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new rw(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Ew=(()=>{class t{}return t.NOOP=new Ow,t})();const xw="ng-enter",kw="ng-leave",Tw="ng-trigger",Iw=".ng-trigger",Aw="ng-animating",Pw=".ng-animating";function Rw(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:jw(parseFloat(e[1]),e[2])}function jw(t,e){switch(e){case"s":return 1e3*t;default:return t}}function Dw(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=jw(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=jw(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function Nw(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function Mw(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else Nw(t,n);return n}function Fw(t,e,n){return n?e+":"+n+";":""}function Lw(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=Fw(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=Fw(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function Vw(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=Gw(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),ow()&&Lw(t))}function qw(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=Gw(e);t.style[n]=""}),ow()&&Lw(t))}function Uw(t){return Array.isArray(t)?1==t.length?t[0]:Xv(t):t}const Bw=new RegExp("{{\\s*(.+?)\\s*}}","g");function zw(t){let e=[];if("string"==typeof t){let n;for(;n=Bw.exec(t);)e.push(n[1]);Bw.lastIndex=0}return e}function Hw(t,e,n){const r=t.toString(),i=r.replace(Bw,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),i=""),i.toString()});return i==r?t:i}function Kw(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Ww=/-+([a-z0-9])/g;function Gw(t){return t.replace(Ww,(...t)=>t[1].toUpperCase())}function Qw(t,e){return 0===t||0===e}function $w(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach(function(e){n[e]=Xw(t,e)})}}return e}function Yw(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}function Xw(t,e){return window.getComputedStyle(t)[e]}const Zw="*";function Jw(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(nC(i,s)),"<"!=o[0]||i==Zw&&s==Zw||e.push(nC(s,i))}(t,n,e)):n.push(t),n}const tC=new Set(["true","1"]),eC=new Set(["false","0"]);function nC(t,e){const n=tC.has(t)||eC.has(t),r=tC.has(e)||eC.has(e);return(i,o)=>{let s=t==Zw||t==i,a=e==Zw||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?tC.has(t):eC.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?tC.has(e):eC.has(e)),s&&a}}const rC=new RegExp("s*:selfs*,?","g");function iC(t,e,n){return new oC(t).build(e,n)}class oC{constructor(t){this._driver=t}build(t,e){const n=new sC(e);return this._resetContextStyleTimingState(n),Yw(this,Uw(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(aC(t)){const e=t;Object.keys(e).forEach(t=>{zw(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=Kw(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Yw(this,Uw(t.animation),e);return{type:1,matchers:Jw(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:cC(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>Yw(this,t,e)),options:cC(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=Yw(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:cC(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return uC(Dw(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=uC(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||Dw(r,e),uC(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:Zv({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=Zv(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==Qv?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(aC(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=zw(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const c=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let c=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(aC(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(aC(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),u=0;return null!=c&&(r++,u=n.offset=c),s=s||u<0||u>1,o=o||u<a,a=u,i.push(u),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const u=t.steps.length;let l=0;r>0&&r<u?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(u-1));const h=u-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return c.forEach((t,r)=>{const o=l>0?r==h?1:l*r:i[r],s=o*p;e.currentTime=d+f.delay+s,f.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:Yw(this,Uw(t.animation),e),options:cC(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:cC(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:cC(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(rC,"")),[t=t.replace(/@\*/g,Iw).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,Pw),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,hw(e.collectedStyles,e.currentQuerySelector,{});const s=Yw(this,Uw(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:cC(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Dw(t.timings,e.errors,!0);return{type:12,animation:Yw(this,Uw(t.animation),e),timings:n,options:null}}}class sC{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function aC(t){return!Array.isArray(t)&&"object"==typeof t}function cC(t){var e;return t?(t=Nw(t)).params&&(t.params=(e=t.params)?Nw(e):null):t={},t}function uC(t,e,n){return{duration:t,delay:e,easing:n}}function lC(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class hC{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const dC=new RegExp(":enter","g"),fC=new RegExp(":leave","g");function pC(t,e,n,r,i,o={},s={},a,c,u=[]){return(new mC).buildKeyframes(t,e,n,r,i,o,s,a,c,u)}class mC{buildKeyframes(t,e,n,r,i,o,s,a,c,u=[]){c=c||new hC;const l=new yC(t,e,c,r,i,u,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),Yw(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[lC(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?Rw(n.duration):null,o=null!=n.delay?Rw(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),Yw(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=gC);const t=Rw(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>Yw(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?Rw(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),Yw(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return Dw(e.params?Hw(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?Rw(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=gC);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),Yw(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const c=e.currentTimeline;a&&c.delayNextStep(a);const u=c.currentTime;Yw(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-u+(r.startTime-n.currentTimeline.startTime)}}const gC={};class yC{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=gC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new bC(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Rw(n.duration)),null!=n.delay&&(r.delay=Rw(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=Hw(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new yC(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=gC,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new _C(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(dC,"."+this._enterClassName)).replace(fC,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class bC{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new bC(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Qv,this._currentKeyframe[t]=Qv}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=Qv})):Mw(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=Hw(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:Qv),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=Mw(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):r==Qv&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?Kw(t.values()):[],o=e.size?Kw(e.values()):[];if(n){const t=r[0],e=Nw(t);t.offset=0,e.offset=1,r=[t,e]}return lC(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class _C extends bC{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=Mw(t[0],!1);a.offset=0,i.push(a);const c=Mw(t[0],!1);c.offset=vC(s),i.push(c);const u=t.length-1;for(let r=1;r<=u;r++){let s=Mw(t[r],!1);s.offset=vC((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return lC(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function vC(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class wC{}class CC extends wC{normalizePropertyName(t,e){return Gw(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(SC[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const SC=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function OC(t,e,n,r,i,o,s,a,c,u,l,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:c,preStyleProps:u,postStyleProps:l,totalTime:h,errors:d}}const EC={};class xC{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,c,u){const l=[],h=this.ast.options&&this.ast.options.params||EC,d=this.buildStyles(n,s&&s.params||EC,l),f=a&&a.params||EC,p=this.buildStyles(r,f,l),m=new Set,g=new Map,y=new Map,b="void"===r,_={params:Object.assign(Object.assign({},h),f)},v=u?[]:pC(t,e,this.ast.animation,i,o,d,p,_,c,l);let w=0;if(v.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return OC(e,this._triggerName,n,r,b,d,p,[],[],g,y,w,l);v.forEach(t=>{const n=t.element,r=hw(g,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=hw(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&m.add(n)});const C=Kw(m.values());return OC(e,this._triggerName,n,r,b,d,p,v,C,g,y,w)}}class kC{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=Nw(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=Hw(o,r,e)),n[t]=o})}}),n}}class TC{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new kC(t.style,t.options&&t.options.params||{})}),IC(this.states,"true","1"),IC(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new xC(t,e,this.states))}),this.fallbackTransition=new xC(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function IC(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const AC=new hC;class PC{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=iC(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=aw(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=pC(this._driver,e,i,xw,kw,{},{},n,AC,r),o.forEach(t=>{const e=hw(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error("Unable to create the animation due to the following errors: "+r.join("\n"));s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,Qv)})});const a=sw(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e}listen(t,e,n,r){const i=lw(e,"","","");return cw(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const RC="ng-animate-queued",jC="ng-animate-disabled",DC=".ng-animate-disabled",NC=[],MC={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},FC={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class LC{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=Nw(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const VC="void",qC=new LC(VC);class UC{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,QC(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=hw(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=hw(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(QC(t,Tw),QC(t,"ng-trigger-"+e),a[e]=qC),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new zC(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(QC(t,Tw),QC(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const c=new LC(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&c.absorbOptions(a.options),s[e]=c,a||(a=qC),c.value!==VC&&a.value===c.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,c.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(c.value,c.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{qw(t,n),Vw(t,r)})}return}const u=hw(this._engine.playersByElement,t,[]);u.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,c.value,t,c.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:c,player:o,isFallbackTransition:h}),h||(QC(t,RC),o.onStart(()=>{$C(t,RC)})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),u.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,Iw,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,VC,r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&sw(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const r=e.name;if(n.has(r))return;n.add(r);const i=this._triggers[r].fallbackTransition,o=this._engine.statesByElement.get(t)[r]||qC,s=new LC(VC),a=new zC(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:i,fromState:o,toState:s,player:a,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==MC||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){QC(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=lw(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,cw(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class BC{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new UC(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(HC(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!HC(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),QC(t,jC)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),$C(t,jC))}removeNode(t,e,n,r){if(HC(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return HC(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,Iw,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Pw,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return sw(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=MC,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,DC)&&this.markElementAsDisabled(t,!1),this.driver.query(t,DC,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)QC(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?sw(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))}_flushAnimations(t,e){const n=new hC,r=[],i=new Map,o=[],s=new Map,a=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(t=>{u.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)u.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=GC(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n=xw+p++;f.set(e,n),t.forEach(t=>QC(t,n))});const m=[],g=new Set,y=new Set;for(let A=0;A<this.collectedLeaveElements.length;A++){const t=this.collectedLeaveElements[A],e=t.__ng_removed;e&&e.setForRemoval&&(m.push(t),g.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>g.add(t)):y.add(t))}const b=new Map,_=GC(h,Array.from(g));_.forEach((t,e)=>{const n=kw+p++;b.set(e,n),t.forEach(t=>QC(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>$C(t,n))}),_.forEach((t,e)=>{const n=b.get(e);t.forEach(t=>$C(t,n))}),m.forEach(t=>{this.processLeaveNode(t)})});const v=[],w=[];for(let A=this._namespaceList.length-1;A>=0;A--)this._namespaceList[A].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(v.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const u=!l||!this.driver.containsElement(l,i),h=b.get(i),d=f.get(i),p=this._buildInstruction(t,n,d,h,u);if(p.errors&&p.errors.length)w.push(p);else{if(u)return e.onStart(()=>qw(i,p.fromStyles)),e.onDestroy(()=>Vw(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>qw(i,p.fromStyles)),e.onDestroy(()=>Vw(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>hw(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=c.get(e);r||c.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),v.forEach(t=>t.destroy()),this.reportError(t)}const C=new Map,S=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(S.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,C))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{hw(C,e,[]).push(t),t.destroy()})});const O=m.filter(t=>ZC(t,a,c)),E=new Map;WC(E,this.driver,y,c,Qv).forEach(t=>{ZC(t,a,c)&&O.push(t)});const x=new Map;d.forEach((t,e)=>{WC(x,this.driver,new Set(t),a,"!")}),O.forEach(t=>{const e=E.get(t),n=x.get(t);E.set(t,Object.assign(Object.assign({},e),n))});const k=[],T=[],I={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(u.has(e))return o.onDestroy(()=>Vw(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=I;if(S.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=S.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>S.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,C,i,x,E);if(o.setRealPlayer(n),t===I)k.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=sw(e)),r.push(o)}}else qw(e,s.fromStyles),o.onDestroy(()=>Vw(e,s.toStyles)),T.push(o),u.has(e)&&r.push(o)}),T.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=sw(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let A=0;A<m.length;A++){const t=m[A],e=t.__ng_removed;if($C(t,kw),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,Pw,!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?YC(this,t,r):this.processLeaveNode(t)}return m.length=0,k.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),k}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==VC;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,c=hw(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),c.push(t)})}qw(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,c=[],u=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;u.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new rw(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return XC(t,e),e}((n.get(h)||NC).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),m=i.get(h),g=o.get(h),y=aw(0,this._normalizer,0,e.keyframes,m,g),b=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),f){const e=new zC(t,s,h);e.setRealPlayer(b),c.push(e)}return b});c.forEach(t=>{hw(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),u.forEach(t=>QC(t,Aw));const d=sw(h);return d.onDestroy(()=>{u.forEach(t=>$C(t,Aw)),Vw(a,e.toStyles)}),l.forEach(t=>{hw(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new rw(t.duration,t.delay)}}class zC{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new rw,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>cw(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){hw(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function HC(t){return t&&1===t.nodeType}function KC(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function WC(t,e,n,r,i){const o=[];n.forEach(t=>o.push(KC(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=FC,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>KC(t,o[a++])),s}function GC(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function o(t){if(!t)return 1;let e=i.get(t);if(e)return e;const s=t.parentNode;return e=n.has(s)?s:r.has(s)?1:o(s),i.set(t,e),e}return e.forEach(t=>{const e=o(t);1!==e&&n.get(e).push(t)}),n}function QC(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function $C(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function YC(t,e,n){sw(n).onDone(()=>t.processLeaveNode(e))}function XC(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof iw?XC(r.players,e):e.push(r)}}function ZC(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class JC{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new BC(t,e,n),this._timelineEngine=new PC(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=iC(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new TC(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=dw(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=dw(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function tS(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=nS(e[0]),e.length>1&&(r=nS(e[e.length-1]))):e&&(n=nS(e)),n||r?new eS(t,n,r):null}let eS=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Vw(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Vw(this._element,this._initialStyles),this._endStyles&&(Vw(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(qw(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(qw(this._element,this._endStyles),this._endStyles=null),Vw(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function nS(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];rS(i)&&(e=e||{},e[i]=t[i])}return e}function rS(t){return"display"===t||"position"===t}const iS="animation",oS="animationend";class sS{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=dS(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),hS(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),lS(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){aS(this._element,this._name,"paused")}resume(){aS(this._element,this._name,"running")}setPosition(t){const e=cS(this._element,this._name);this._position=t*this._duration,hS(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),lS(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=dS(t,"").split(","),r=uS(n,e);r>=0&&(n.splice(r,1),hS(t,"",n.join(",")))}(this._element,this._name))}}function aS(t,e,n){hS(t,"PlayState",n,cS(t,e))}function cS(t,e){const n=dS(t,"");return n.indexOf(",")>0?uS(n.split(","),e):uS([n],e)}function uS(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function lS(t,e,n){n?t.removeEventListener(oS,e):t.addEventListener(oS,e)}function hS(t,e,n,r){const i=iS+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function dS(t,e){return t.style[iS+e]||""}class fS{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new sS(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:Xw(this.element,n))})}this.currentSnapshot=t}}class pS extends rw{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=Sw(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class mS{constructor(){this._count=0,this._head=document.querySelector("head")}validateStyleProperty(t){return _w(t)}matchesElement(t,e){return vw(t,e)}containsElement(t,e){return ww(t,e)}query(t,e,n){return Cw(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>Sw(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=i+"}\n"}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(t,e,n,r,i,o=[],s){const a=o.filter(t=>t instanceof fS),c={};Qw(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>c[t]=e[t])});const u=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=$w(t,e,c));if(0==n)return new pS(t,u);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);const d=tS(t,e),f=new fS(t,e,l,n,r,i,u,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}}class gS{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:Xw(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class yS{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(bS().toString()),this._cssKeyframesDriver=new mS}validateStyleProperty(t){return _w(t)}matchesElement(t,e){return vw(t,e)}containsElement(t,e){return ww(t,e)}query(t,e,n){return Cw(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const c={},u=o.filter(t=>t instanceof gS);Qw(n,r)&&u.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>c[t]=e[t])});const l=tS(t,e=$w(t,e=e.map(t=>Mw(t,!1)),c));return new gS(t,e,a,l)}}function bS(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let _S=(()=>{class t extends Gv{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.R.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Xv(t):t;return CS(this._renderer,null,e,"register",[n]),new vS(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.F),r.Tb(a))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class vS extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new wS(this._id,t,e||{},this._renderer)}}class wS{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return CS(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function CS(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const SS="@",OS="@.disabled";let ES=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new xS("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new kS(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.F),r.Tb(JC),r.Tb(r.z))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class xS{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==SS&&e==OS?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class kS extends xS{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==SS?"."==e.charAt(1)&&e==OS?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==SS){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return i.charAt(0)!=SS&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let TS=(()=>{class t extends JC{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(a),r.Tb(Ew),r.Tb(wC))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const IS=new r.q("AnimationModuleType"),AS=[{provide:Ew,useFactory:function(){return"function"==typeof bS()?new yS:new mS}},{provide:IS,useValue:"BrowserAnimations"},{provide:Gv,useClass:_S},{provide:wC,useFactory:function(){return new CC}},{provide:JC,useClass:TS},{provide:r.F,useFactory:function(t,e,n){return new ES(t,e,n)},deps:[vt,JC,r.z]}];let PS=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:AS,imports:[Nt]}),t})(),RS=(()=>{class t{}return t.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",t.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",t.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",t.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)",t})(),jS=(()=>{class t{}return t.COMPLEX="375ms",t.ENTERING="225ms",t.EXITING="195ms",t})();const DS=new r.P("11.2.13"),NS=new r.q("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let MS,FS=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return Object(r.W)()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&DS.full!==Wv.full&&console.warn("The Angular Material version ("+DS.full+") does not match the Angular CDK version ("+Wv.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)(r.Tb(Uv),r.Tb(NS,8),r.Tb(a))},imports:[[Kv],Kv]}),t})();function LS(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=$_(t)}}}function VS(t,e){return class extends t{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const e=t||this.defaultColor;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-"+this._color),e&&this._elementRef.nativeElement.classList.add("mat-"+e),this._color=e)}}}function qS(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=$_(t)}}}function US(t,e=0){return class extends t{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Y_(t):this.defaultTabIndex}}}function BS(t){return class extends t{constructor(...t){super(...t),this.errorState=!1,this.stateChanges=new Lt.a}updateErrorState(){const t=this.errorState,e=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);e!==t&&(this.errorState=e,this.stateChanges.next())}}}try{MS="undefined"!=typeof Intl}catch(zA){MS=!1}let zS=(()=>{class t{isErrorState(t,e){return!!(t&&t.invalid&&(t.touched||e&&e.submitted))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:function(){return new t},token:t,providedIn:"root"}),t})();class HS{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const KS={enterDuration:450,exitDuration:400},WS=cv({passive:!0}),GS=["mousedown","touchstart"],QS=["mouseup","mouseleave","touchend","touchcancel"];class $S{constructor(t,e,n,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=J_(n))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),i=Object.assign(Object.assign({},KS),n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const o=n.radius||function(t,e,n){const r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}(t,e,r),s=t-r.left,a=e-r.top,c=i.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=s-o+"px",u.style.top=a-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=n.color&&(u.style.backgroundColor=n.color),u.style.transitionDuration=c+"ms",this._containerElement.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)";const l=new HS(this,u,n);return l.state=0,this._activeRipples.add(l),n.persistent||(this._mostRecentTransientRipple=l),this._runTimeoutOutsideZone(()=>{const t=l===this._mostRecentTransientRipple;l.state=1,n.persistent||t&&this._isPointerDown||l.fadeOut()},c),l}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,r=Object.assign(Object.assign({},KS),t.config.animation);n.style.transitionDuration=r.exitDuration+"ms",n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.parentNode.removeChild(n)},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=J_(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(GS))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(QS),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=Rv(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||e||n||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!jv(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(t=>{this._triggerElement.addEventListener(t,this,WS)})})}_removeTriggerEvents(){this._triggerElement&&(GS.forEach(t=>{this._triggerElement.removeEventListener(t,this,WS)}),this._pointerUpEventsRegistered&&QS.forEach(t=>{this._triggerElement.removeEventListener(t,this,WS)}))}}const YS=new r.q("mat-ripple-global-options");let XS=(()=>{class t{constructor(t,e,n,r,i){this._elementRef=t,this._animationMode=i,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new $S(this,e,t,n)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,e=0,n){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(r.z),r.Kb(ev),r.Kb(YS,8),r.Kb(IS,8))},t.\u0275dir=r.Fb({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,e){2&t&&r.Cb("mat-ripple-unbounded",e.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),t})(),ZS=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},imports:[[FS,nv],FS]}),t})();var JS=n("n6bG");function tO(t,e,n,r){return Object(JS.a)(n)&&(r=n,n=void 0),r?tO(t,e,n).pipe(Object(oe.a)(t=>Object(Bt.a)(t)?r(...t):r(t))):new Gt.a(r=>{eO(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function eO(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),o=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),o=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),o=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)eO(t[o],e,n,r,i)}r.add(o)}const nO=["primaryValueBar"];class rO{constructor(t){this._elementRef=t}}const iO=VS(rO,"primary"),oO=new r.q("mat-progress-bar-location",{providedIn:"root",factory:function(){const t=Object(r.V)(a),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}});let sO=0,aO=(()=>{class t extends iO{constructor(t,e,n,i){super(t),this._elementRef=t,this._ngZone=e,this._animationMode=n,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new r.n,this._animationEndSubscription=Ve.a.EMPTY,this.mode="determinate",this.progressbarId="mat-progress-bar-"+sO++;const o=i?i.getPathname().split("#")[0]:"";this._rectangleFillValue=`url('${o}#${this.progressbarId}')`,this._isNoopAnimation="NoopAnimations"===n}get value(){return this._value}set value(t){this._value=cO(Y_(t)||0)}get bufferValue(){return this._bufferValue}set bufferValue(t){this._bufferValue=cO(t||0)}_primaryTransform(){return{transform:`scale3d(${this.value/100}, 1, 1)`}}_bufferTransform(){return"buffer"===this.mode?{transform:`scale3d(${this.bufferValue/100}, 1, 1)`}:null}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const t=this._primaryValueBar.nativeElement;this._animationEndSubscription=tO(t,"transitionend").pipe(be(e=>e.target===t)).subscribe(()=>{"determinate"!==this.mode&&"buffer"!==this.mode||this._ngZone.run(()=>this.animationEnd.next({value:this.value}))})})}ngOnDestroy(){this._animationEndSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(r.z),r.Kb(IS,8),r.Kb(oO,8))},t.\u0275cmp=r.Eb({type:t,selectors:[["mat-progress-bar"]],viewQuery:function(t,e){if(1&t&&r.yc(nO,!0),2&t){let t;r.ic(t=r.Xb())&&(e._primaryValueBar=t.first)}},hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-progress-bar"],hostVars:4,hostBindings:function(t,e){2&t&&(r.Bb("aria-valuenow","indeterminate"===e.mode||"query"===e.mode?null:e.value)("mode",e.mode),r.Cb("_mat-animation-noopable",e._isNoopAnimation))},inputs:{color:"color",mode:"mode",value:"value",bufferValue:"bufferValue"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[r.xb],decls:10,vars:4,consts:[["aria-hidden","true"],["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],["cx","2","cy","2","r","2"],["width","100%","height","100%"],[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],["primaryValueBar",""],[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"]],template:function(t,e){1&t&&(r.Pb(0,"div",0),r.Zb(),r.Pb(1,"svg",1),r.Pb(2,"defs"),r.Pb(3,"pattern",2),r.Lb(4,"circle",3),r.Ob(),r.Ob(),r.Lb(5,"rect",4),r.Ob(),r.Yb(),r.Lb(6,"div",5),r.Lb(7,"div",6,7),r.Lb(9,"div",8),r.Ob()),2&t&&(r.Ab(3),r.gc("id",e.progressbarId),r.Ab(2),r.Bb("fill",e._rectangleFillValue),r.Ab(1),r.gc("ngStyle",e._bufferTransform()),r.Ab(1),r.gc("ngStyle",e._primaryTransform()))},directives:[W],styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}\n'],encapsulation:2,changeDetection:0}),t})();function cO(t,e=0,n=100){return Math.max(e,Math.min(n,t))}let uO=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},imports:[[tt,FS],FS]}),t})(),lO=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-snack"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Pb(0,"p"),r.vc(1,"Copied To Clipboard..!"),r.Ob())},styles:["p[_ngcontent-%COMP%]{text-align:center;color:#000}"]}),t})();n("3N8a"),n("IjjT");var hO=n("7Hc7");class dO{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new fO(t,this.durationSelector))}}class fO extends se.b{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:e}=this;n=e(t)}catch(e){return this.destination.error(e)}const r=Object(se.c)(n,new se.a(this));!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var pO=n("Y7HM");function mO(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function gO(t,e=Vi.a){return n=()=>function(t=0,e,n){let r=-1;return Object(pO.a)(e)?r=Number(e)<1?1:Number(e):Object(Ut.a)(e)&&(n=e),Object(Ut.a)(n)||(n=Vi.a),new Gt.a(e=>{const i=Object(pO.a)(t)?t:+t-n.now();return n.schedule(mO,i,{index:0,period:r,subscriber:e})})}(t,e),function(t){return t.lift(new dO(n))};var n}function yO(t){return e=>e.lift(new bO(t))}class bO{constructor(t){this.notifier=t}call(t,e){const n=new _O(t),r=Object(se.c)(this.notifier,new se.a(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class _O extends se.b{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}class vO{constructor(t=!1,e,n=!0){this._multiple=t,this._emitChanges=n,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Lt.a,e&&e.length&&(t?e.forEach(t=>this._markSelected(t)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(t=>this._markSelected(t)),this._emitChangeEvent()}deselect(...t){this._verifyValueAssignment(t),t.forEach(t=>this._unmarkSelected(t)),this._emitChangeEvent()}toggle(t){this.isSelected(t)?this.deselect(t):this.select(t)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(t){return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}}let wO=(()=>{class t{constructor(t,e,n){this._ngZone=t,this._platform=e,this._scrolled=new Lt.a,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Gt.a(e=>{this._globalSubscription||this._addGlobalListener();const n=t>0?this._scrolled.pipe(gO(t)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Object(Ft.a)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(t,e){const n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(be(t=>!t||n.indexOf(t)>-1))}getAncestorScrollContainers(t){const e=[];return this.scrollContainers.forEach((n,r)=>{this._scrollableContainsElement(r,t)&&e.push(r)}),e}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,e){let n=J_(e),r=t.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>tO(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.z),r.Tb(ev),r.Tb(a,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(r.z),Object(r.Tb)(ev),Object(r.Tb)(a,8))},token:t,providedIn:"root"}),t})(),CO=(()=>{class t{constructor(t,e,n){this._platform=t,this._change=new Lt.a,this._changeListener=t=>{this._change.next(t)},this._document=n,e.runOutsideAngular(()=>{if(t.isBrowser){const t=this._getWindow();t.addEventListener("resize",this._changeListener),t.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:e,height:n}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+e,height:n,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,e=this._getWindow(),n=t.documentElement,r=n.getBoundingClientRect();return{top:-r.top||t.body.scrollTop||e.scrollY||n.scrollTop||0,left:-r.left||t.body.scrollLeft||e.scrollX||n.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(gO(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(ev),r.Tb(r.z),r.Tb(a,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(ev),Object(r.Tb)(r.z),Object(r.Tb)(a,8))},token:t,providedIn:"root"}),t})(),SO=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)}}),t})(),OO=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},imports:[[Kv,nv,SO],Kv,SO]}),t})();class EO{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class xO extends EO{constructor(t,e,n,r){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r}}class kO extends EO{constructor(t,e,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class TO extends EO{constructor(t){super(),this.element=t instanceof r.l?t.nativeElement:t}}class IO{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof xO?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof kO?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof TO?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class AO extends IO{constructor(t,e,n,r,i){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=t=>{const e=t.element,n=this._document.createComment("dom-portal");e.parentNode.insertBefore(n,e),this.outletElement.appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=i}attachComponentPortal(t){const e=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let n;return t.viewContainerRef?(n=t.viewContainerRef.createComponent(e,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=e.create(t.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=t,n}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context);return n.rootNodes.forEach(t=>this.outletElement.appendChild(t)),n.detectChanges(),this.setDisposeFn(()=>{let t=e.indexOf(n);-1!==t&&e.remove(t)}),this._attachedPortal=t,n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let PO=(()=>{class t extends IO{constructor(t,e,n){super(),this._componentFactoryResolver=t,this._viewContainerRef=e,this._isInitialized=!1,this.attached=new r.n,this.attachDomPortal=t=>{const e=t.element,n=this._document.createComment("dom-portal");t.setAttachedHost(this),e.parentNode.insertBefore(n,e),this._getRootNode().appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=n}get portal(){return this._attachedPortal}set portal(t){(!this.hasAttached()||t||this._isInitialized)&&(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const e=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r=e.createComponent(n,e.length,t.injector||e.injector);return e!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),super.setDisposeFn(()=>r.destroy()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(t){t.setAttachedHost(this);const e=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=e,this.attached.emit(e),e}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.j),r.Kb(r.Q),r.Kb(a))},t.\u0275dir=r.Fb({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[r.xb]}),t})(),RO=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)}}),t})();const jO=uv();class DO{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Z_(-this._previousScrollPosition.left),t.style.top=Z_(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,e=t.style,n=this._document.body.style,r=e.scrollBehavior||"",i=n.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),jO&&(e.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),jO&&(e.scrollBehavior=r,n.scrollBehavior=i)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}}class NO{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class MO{enable(){}disable(){}attach(){}}function FO(t,e){return e.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function LO(t,e){return e.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class VO{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:e,height:n}=this._viewportRuler.getViewportSize();FO(t,[{width:e,height:n,bottom:n,right:e,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let qO=(()=>{class t{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this.noop=()=>new MO,this.close=t=>new NO(this._scrollDispatcher,this._ngZone,this._viewportRuler,t),this.block=()=>new DO(this._viewportRuler,this._document),this.reposition=t=>new VO(this._scrollDispatcher,this._viewportRuler,this._ngZone,t),this._document=r}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(wO),r.Tb(CO),r.Tb(r.z),r.Tb(a))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(wO),Object(r.Tb)(CO),Object(r.Tb)(r.z),Object(r.Tb)(a))},token:t,providedIn:"root"}),t})();class UO{constructor(t){if(this.scrollStrategy=new MO,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class BO{constructor(t,e,n,r,i){this.offsetX=n,this.offsetY=r,this.panelClass=i,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class zO{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let HO=(()=>{class t{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this.detach()}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(a))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(a))},token:t,providedIn:"root"}),t})(),KO=(()=>{class t extends HO{constructor(t){super(t),this._keydownListener=t=>{const e=this._attachedOverlays;for(let n=e.length-1;n>-1;n--)if(e[n]._keydownEvents.observers.length>0){e[n]._keydownEvents.next(t);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(a))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(a))},token:t,providedIn:"root"}),t})(),WO=(()=>{class t extends HO{constructor(t,e){super(t),this._platform=e,this._cursorStyleIsSet=!1,this._clickListener=t=>{const e=t.composedPath?t.composedPath()[0]:t.target,n=this._attachedOverlays.slice();for(let r=n.length-1;r>-1;r--){const i=n[r];if(!(i._outsidePointerEvents.observers.length<1)&&i.hasAttached()){if(i.overlayElement.contains(e))break;i._outsidePointerEvents.next(t)}}}}add(t){if(super.add(t),!this._isAttached){const t=this._document.body;t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=t.style.cursor,t.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(a),r.Tb(ev))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(a),Object(r.Tb)(ev))},token:t,providedIn:"root"}),t})();const GO=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine);let QO=(()=>{class t{constructor(t,e){this._platform=e,this._document=t}ngOnDestroy(){const t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||GO){const e=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])}const e=this._document.createElement("div");e.classList.add(t),GO?e.setAttribute("platform","test"):this._platform.isBrowser||e.setAttribute("platform","server"),this._document.body.appendChild(e),this._containerElement=e}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(a),r.Tb(ev))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(a),Object(r.Tb)(ev))},token:t,providedIn:"root"}),t})();class $O{constructor(t,e,n,r,i,o,s,a,c){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=i,this._keyboardDispatcher=o,this._document=s,this._location=a,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new Lt.a,this._attachments=new Lt.a,this._detachments=new Lt.a,this._locationChanges=Ve.a.EMPTY,this._backdropClickHandler=t=>this._backdropClick.next(t),this._keydownEvents=new Lt.a,this._outsidePointerEvents=new Lt.a,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(he(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Z_(this._config.width),t.height=Z_(this._config.height),t.minWidth=Z_(this._config.minWidth),t.minHeight=Z_(this._config.minHeight),t.maxWidth=Z_(this._config.maxWidth),t.maxHeight=Z_(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t,e=this._backdropElement;if(!e)return;let n=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",n),e.parentNode&&e.parentNode.removeChild(e)),this._backdropElement==e&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",n)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(t,e,n){const r=t.classList;X_(e).forEach(t=>{t&&(n?r.add(t):r.remove(t))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(yO(Object(d_.a)(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}}const YO="cdk-overlay-connected-position-bounding-box",XO=/([A-Za-z%]+)$/;class ZO{constructor(t,e,n,r,i){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=i,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Lt.a,this._resizeSubscription=Ve.a.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(YO),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=[];let i;for(let o of this._preferredPositions){let s=this._getOriginPoint(t,o),a=this._getOverlayPoint(s,e,o),c=this._getOverlayFit(a,e,n,o);if(c.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(o,s);this._canFitWithFlexibleDimensions(c,a,n)?r.push({position:o,origin:s,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(s,o)}):(!i||i.overlayFit.visibleArea<c.visibleArea)&&(i={overlayFit:c,overlayPoint:a,originPoint:s,position:o,overlayRect:e})}if(r.length){let t=null,e=-1;for(const n of r){const r=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);r>e&&(e=r,t=n)}return this._isPushed=!1,void this._applyPosition(t.position,t.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(i.position,i.originPoint);this._applyPosition(i.position,i.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&JO(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(YO),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let n,r;if("center"==e.originX)n=t.left+t.width/2;else{const r=this._isRtl()?t.right:t.left,i=this._isRtl()?t.left:t.right;n="start"==e.originX?r:i}return r="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:n,y:r}}_getOverlayPoint(t,e,n){let r,i;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,i="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+r,y:t.y+i}}_getOverlayFit(t,e,n,r){const i=eE(e);let{x:o,y:s}=t,a=this._getOffset(r,"x"),c=this._getOffset(r,"y");a&&(o+=a),c&&(s+=c);let u=0-s,l=s+i.height-n.height,h=this._subtractOverflows(i.width,0-o,o+i.width-n.width),d=this._subtractOverflows(i.height,u,l),f=h*d;return{visibleArea:f,isCompletelyWithinViewport:i.width*i.height===f,fitsInViewportVertically:d===i.height,fitsInViewportHorizontally:h==i.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const r=n.bottom-e.y,i=n.right-e.x,o=tE(this._overlayRef.getConfig().minHeight),s=tE(this._overlayRef.getConfig().minWidth),a=t.fitsInViewportHorizontally||null!=s&&s<=i;return(t.fitsInViewportVertically||null!=o&&o<=r)&&a}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=eE(e),i=this._viewportRect,o=Math.max(t.x+r.width-i.width,0),s=Math.max(t.y+r.height-i.height,0),a=Math.max(i.top-n.top-t.y,0),c=Math.max(i.left-n.left-t.x,0);let u=0,l=0;return u=r.width<=i.width?c||-o:t.x<this._viewportMargin?i.left-n.left-t.x:0,l=r.height<=i.height?a||-s:t.y<this._viewportMargin?i.top-n.top-t.y:0,this._previousPushAmount={x:u,y:l},{x:t.x+u,y:t.y+l}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const e=this._getScrollVisibility(),n=new zO(t,e);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let i=0;i<e.length;i++)e[i].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,r=this._isRtl();let i,o,s,a,c,u;if("top"===e.overlayY)o=t.y,i=n.height-o+this._viewportMargin;else if("bottom"===e.overlayY)s=n.height-t.y+2*this._viewportMargin,i=n.height-s+this._viewportMargin;else{const e=Math.min(n.bottom-t.y+n.top,t.y),r=this._lastBoundingBoxSize.height;i=2*e,o=t.y-e,i>r&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-r/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)u=n.width-t.x+this._viewportMargin,a=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)c=t.x,a=n.right-t.x;else{const e=Math.min(n.right-t.x+n.left,t.x),r=this._lastBoundingBoxSize.width;a=2*e,c=t.x-e,a>r&&!this._isInitialRender&&!this._growAfterOpen&&(c=t.x-r/2)}return{top:o,left:c,bottom:s,right:u,width:a,height:i}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const t=this._overlayRef.getConfig().maxHeight,i=this._overlayRef.getConfig().maxWidth;r.height=Z_(n.height),r.top=Z_(n.top),r.bottom=Z_(n.bottom),r.width=Z_(n.width),r.left=Z_(n.left),r.right=Z_(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",t&&(r.maxHeight=Z_(t)),i&&(r.maxWidth=Z_(i))}this._lastBoundingBoxSize=n,JO(this._boundingBox.style,r)}_resetBoundingBoxStyles(){JO(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){JO(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},r=this._hasExactPosition(),i=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const r=this._viewportRuler.getViewportScrollPosition();JO(n,this._getExactOverlayY(e,t,r)),JO(n,this._getExactOverlayX(e,t,r))}else n.position="static";let s="",a=this._getOffset(e,"x"),c=this._getOffset(e,"y");a&&(s+=`translateX(${a}px) `),c&&(s+=`translateY(${c}px)`),n.transform=s.trim(),o.maxHeight&&(r?n.maxHeight=Z_(o.maxHeight):i&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=Z_(o.maxWidth):i&&(n.maxWidth="")),JO(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},i=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n));let o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return i.y-=o,"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(i.y+this._overlayRect.height)+"px":r.top=Z_(i.y),r}_getExactOverlayX(t,e,n){let r,i={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),r=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===r?i.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":i.left=Z_(o.x),i}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(t=>t.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:LO(t,n),isOriginOutsideView:FO(t,n),isOverlayClipped:LO(e,n),isOverlayOutsideView:FO(e,n)}}_subtractOverflows(t,...e){return e.reduce((t,e)=>t-Math.max(e,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&X_(t).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof r.l)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function JO(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function tE(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(XO);return n&&"px"!==n?null:parseFloat(e)}return t||null}function eE(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}class nE{constructor(t,e,n,r,i,o,s){this._preferredPositions=[],this._positionStrategy=new ZO(n,r,i,o,s).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,n,r){const i=new BO(t,e,n,r);return this._preferredPositions.push(i),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}const rE="cdk-global-overlay-wrapper";class iE{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(rE),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:i,maxWidth:o,maxHeight:s}=n,a=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==i&&"100vh"!==i||s&&"100%"!==s&&"100vh"!==s);t.position=this._cssPosition,t.marginLeft=a?"0":this._leftOffset,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,a?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(rE),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let oE=(()=>{class t{constructor(t,e,n,r){this._viewportRuler=t,this._document=e,this._platform=n,this._overlayContainer=r}global(){return new iE}connectedTo(t,e,n){return new nE(e,n,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new ZO(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(CO),r.Tb(a),r.Tb(ev),r.Tb(QO))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(CO),Object(r.Tb)(a),Object(r.Tb)(ev),Object(r.Tb)(QO))},token:t,providedIn:"root"}),t})(),sE=0,aE=(()=>{class t{constructor(t,e,n,r,i,o,s,a,c,u,l){this.scrollStrategies=t,this._overlayContainer=e,this._componentFactoryResolver=n,this._positionBuilder=r,this._keyboardDispatcher=i,this._injector=o,this._ngZone=s,this._document=a,this._directionality=c,this._location=u,this._outsideClickDispatcher=l}create(t){const e=this._createHostElement(),n=this._createPaneElement(e),r=this._createPortalOutlet(n),i=new UO(t);return i.direction=i.direction||this._directionality.value,new $O(r,e,n,i,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const e=this._document.createElement("div");return e.id="cdk-overlay-"+sE++,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(r.g)),new AO(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(qO),r.Tb(QO),r.Tb(r.j),r.Tb(oE),r.Tb(KO),r.Tb(r.r),r.Tb(r.z),r.Tb(a),r.Tb(Hv),r.Tb(C),r.Tb(WO))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const cE={provide:new r.q("cdk-connected-overlay-scroll-strategy"),deps:[aE],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let uE=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[aE,cE],imports:[[Kv,RO,OO],OO]}),t})();class lE{constructor(t){this.total=t}call(t,e){return e.subscribe(new hE(t,this.total))}}class hE extends zt.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}const dE=new Set;let fE,pE=(()=>{class t{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):mE}matchMedia(t){return this._platform.WEBKIT&&function(t){if(!dE.has(t))try{fE||(fE=document.createElement("style"),fE.setAttribute("type","text/css"),document.head.appendChild(fE)),fE.sheet&&(fE.sheet.insertRule(`@media ${t} {.fx-query-test{ }}`,0),dE.add(t))}catch(a_){console.error(a_)}}(t),this._matchMedia(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(ev))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(ev))},token:t,providedIn:"root"}),t})();function mE(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let gE=(()=>{class t{constructor(t,e){this._mediaMatcher=t,this._zone=e,this._queries=new Map,this._destroySubject=new Lt.a}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return yE(X_(t)).some(t=>this._registerQuery(t).mql.matches)}observe(t){let e=Xt(yE(X_(t)).map(t=>this._registerQuery(t).observable));return e=ne(e.pipe(he(1)),e.pipe(t=>t.lift(new lE(1)),K_(0))),e.pipe(Object(oe.a)(t=>{const e={matches:!1,breakpoints:{}};return t.forEach(({matches:t,query:n})=>{e.matches=e.matches||t,e.breakpoints[n]=t}),e}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const e=this._mediaMatcher.matchMedia(t),n={observable:new Gt.a(t=>{const n=e=>this._zone.run(()=>t.next(e));return e.addListener(n),()=>{e.removeListener(n)}}).pipe(pe(e),Object(oe.a)(({matches:e})=>({query:t,matches:e})),yO(this._destroySubject)),mql:e};return this._queries.set(t,n),n}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(pE),r.Tb(r.z))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(pE),Object(r.Tb)(r.z))},token:t,providedIn:"root"}),t})();function yE(t){return t.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}const bE="(min-width: 960px) and (max-width: 1279.98px)",_E="(min-width: 1280px) and (max-width: 1919.98px)",vE="(min-width: 1920px)";function wE(t,e){}const CE=new r.q("MatBottomSheetData");class SE{constructor(){this.data=null,this.hasBackdrop=!0,this.disableClose=!1,this.ariaLabel=null,this.closeOnNavigation=!0,this.autoFocus=!1,this.restoreFocus=!0}}const OE={bottomSheetState:$v("state",[Jv("void, hidden",Zv({transform:"translateY(100%)"})),Jv("visible",Zv({transform:"translateY(0%)"})),ew("visible => void, visible => hidden",Yv(`${jS.COMPLEX} ${RS.ACCELERATION_CURVE}`)),ew("void => visible",Yv(`${jS.EXITING} ${RS.DECELERATION_CURVE}`))])};let EE=(()=>{class t extends IO{constructor(t,e,n,i,o,s){super(),this._elementRef=t,this._changeDetectorRef=e,this._focusTrapFactory=n,this.bottomSheetConfig=s,this._animationState="void",this._animationStateChanged=new r.n,this._elementFocusedBeforeOpened=null,this.attachDomPortal=t=>(this._validatePortalAttached(),this._setPanelClass(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachDomPortal(t)),this._document=o,this._breakpointSubscription=i.observe([bE,_E,vE]).subscribe(()=>{this._toggleClass("mat-bottom-sheet-container-medium",i.isMatched(bE)),this._toggleClass("mat-bottom-sheet-container-large",i.isMatched(_E)),this._toggleClass("mat-bottom-sheet-container-xlarge",i.isMatched(vE))})}attachComponentPortal(t){return this._validatePortalAttached(),this._setPanelClass(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._validatePortalAttached(),this._setPanelClass(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachTemplatePortal(t)}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges())}exit(){this._destroyed||(this._animationState="hidden",this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._breakpointSubscription.unsubscribe(),this._destroyed=!0}_onAnimationDone(t){"hidden"===t.toState?this._restoreFocus():"visible"===t.toState&&this._trapFocus(),this._animationStateChanged.emit(t)}_onAnimationStart(t){this._animationStateChanged.emit(t)}_toggleClass(t,e){const n=this._elementRef.nativeElement.classList;e?n.add(t):n.remove(t)}_validatePortalAttached(){this._portalOutlet.hasAttached()}_setPanelClass(){const t=this._elementRef.nativeElement,e=this.bottomSheetConfig.panelClass;Array.isArray(e)?e.forEach(e=>t.classList.add(e)):e&&t.classList.add(e)}_trapFocus(){const t=this._elementRef.nativeElement;if(this._focusTrap||(this._focusTrap=this._focusTrapFactory.create(t)),this.bottomSheetConfig.autoFocus)this._focusTrap.focusInitialElementWhenReady();else{const e=this._getActiveElement();e===t||t.contains(e)||t.focus()}}_restoreFocus(){const t=this._elementFocusedBeforeOpened;if(this.bottomSheetConfig.restoreFocus&&t&&"function"==typeof t.focus){const e=this._getActiveElement(),n=this._elementRef.nativeElement;e&&e!==this._document.body&&e!==n&&!n.contains(e)||t.focus()}this._focusTrap&&this._focusTrap.destroy()}_savePreviouslyFocusedElement(){this._elementFocusedBeforeOpened=this._getActiveElement(),this._elementRef.nativeElement.focus&&Promise.resolve().then(()=>this._elementRef.nativeElement.focus())}_getActiveElement(){var t;const e=this._document.activeElement;return(null===(t=null==e?void 0:e.shadowRoot)||void 0===t?void 0:t.activeElement)||e}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(r.h),r.Kb(Tv),r.Kb(gE),r.Kb(a,8),r.Kb(SE))},t.\u0275cmp=r.Eb({type:t,selectors:[["mat-bottom-sheet-container"]],viewQuery:function(t,e){if(1&t&&r.qc(PO,!0),2&t){let t;r.ic(t=r.Xb())&&(e._portalOutlet=t.first)}},hostAttrs:["tabindex","-1","role","dialog","aria-modal","true",1,"mat-bottom-sheet-container"],hostVars:2,hostBindings:function(t,e){1&t&&r.sc("@state.start",function(t){return e._onAnimationStart(t)})("@state.done",function(t){return e._onAnimationDone(t)}),2&t&&(r.Bb("aria-label",null==e.bottomSheetConfig?null:e.bottomSheetConfig.ariaLabel),r.tc("@state",e._animationState))},features:[r.xb],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,e){1&t&&r.uc(0,wE,0,0,"ng-template",0)},directives:[PO],styles:[".mat-bottom-sheet-container{padding:8px 16px;min-width:100vw;box-sizing:border-box;display:block;outline:0;max-height:80vh;overflow:auto}.cdk-high-contrast-active .mat-bottom-sheet-container{outline:1px solid}.mat-bottom-sheet-container-xlarge,.mat-bottom-sheet-container-large,.mat-bottom-sheet-container-medium{border-top-left-radius:4px;border-top-right-radius:4px}.mat-bottom-sheet-container-medium{min-width:384px;max-width:calc(100vw - 128px)}.mat-bottom-sheet-container-large{min-width:512px;max-width:calc(100vw - 256px)}.mat-bottom-sheet-container-xlarge{min-width:576px;max-width:calc(100vw - 384px)}\n"],encapsulation:2,data:{animation:[OE.bottomSheetState]}}),t})(),xE=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},imports:[[uE,FS,RO],FS]}),t})();class kE{constructor(t,e){this._overlayRef=e,this._afterDismissed=new Lt.a,this._afterOpened=new Lt.a,this.containerInstance=t,this.disableClose=t.bottomSheetConfig.disableClose,t._animationStateChanged.pipe(be(t=>"done"===t.phaseName&&"visible"===t.toState),he(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(be(t=>"done"===t.phaseName&&"hidden"===t.toState),he(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),e.dispose()}),e.detachments().pipe(he(1)).subscribe(()=>{this._afterDismissed.next(this._result),this._afterDismissed.complete()}),Object(d_.a)(e.backdropClick(),e.keydownEvents().pipe(be(t=>27===t.keyCode))).subscribe(t=>{this.disableClose||"keydown"===t.type&&H_(t)||(t.preventDefault(),this.dismiss())})}dismiss(t){this._afterDismissed.closed||(this.containerInstance._animationStateChanged.pipe(be(t=>"start"===t.phaseName),he(1)).subscribe(t=>{this._closeFallbackTimeout=setTimeout(()=>{this._overlayRef.dispose()},t.totalTime+100),this._overlayRef.detachBackdrop()}),this._result=t,this.containerInstance.exit())}afterDismissed(){return this._afterDismissed}afterOpened(){return this._afterOpened}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}}const TE=new r.q("mat-bottom-sheet-default-options");let IE=(()=>{class t{constructor(t,e,n,r){this._overlay=t,this._injector=e,this._parentBottomSheet=n,this._defaultOptions=r,this._bottomSheetRefAtThisLevel=null}get _openedBottomSheetRef(){const t=this._parentBottomSheet;return t?t._openedBottomSheetRef:this._bottomSheetRefAtThisLevel}set _openedBottomSheetRef(t){this._parentBottomSheet?this._parentBottomSheet._openedBottomSheetRef=t:this._bottomSheetRefAtThisLevel=t}open(t,e){const n=function(t,e){return Object.assign(Object.assign({},t),e)}(this._defaultOptions||new SE,e),i=this._createOverlay(n),o=this._attachContainer(i,n),s=new kE(o,i);if(t instanceof r.L)o.attachTemplatePortal(new kO(t,null,{$implicit:n.data,bottomSheetRef:s}));else{const e=new xO(t,void 0,this._createInjector(n,s)),r=o.attachComponentPortal(e);s.instance=r.instance}return s.afterDismissed().subscribe(()=>{this._openedBottomSheetRef==s&&(this._openedBottomSheetRef=null)}),this._openedBottomSheetRef?(this._openedBottomSheetRef.afterDismissed().subscribe(()=>s.containerInstance.enter()),this._openedBottomSheetRef.dismiss()):s.containerInstance.enter(),this._openedBottomSheetRef=s,s}dismiss(t){this._openedBottomSheetRef&&this._openedBottomSheetRef.dismiss(t)}ngOnDestroy(){this._bottomSheetRefAtThisLevel&&this._bottomSheetRefAtThisLevel.dismiss()}_attachContainer(t,e){const n=r.r.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:SE,useValue:e}]}),i=new xO(EE,e.viewContainerRef,n);return t.attach(i).instance}_createOverlay(t){const e=new UO({direction:t.direction,hasBackdrop:t.hasBackdrop,disposeOnNavigation:t.closeOnNavigation,maxWidth:"100%",scrollStrategy:t.scrollStrategy||this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().global().centerHorizontally().bottom("0")});return t.backdropClass&&(e.backdropClass=t.backdropClass),this._overlay.create(e)}_createInjector(t,e){const n=t&&t.viewContainerRef&&t.viewContainerRef.injector,i=[{provide:kE,useValue:e},{provide:CE,useValue:t.data}];return!t.direction||n&&n.get(Hv,null)||i.push({provide:Hv,useValue:{value:t.direction,change:Object(Ft.a)()}}),r.r.create({parent:n||this._injector,providers:i})}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(aE),r.Tb(r.r),r.Tb(t,12),r.Tb(TE,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(aE),Object(r.Tb)(r.o),Object(r.Tb)(t,12),Object(r.Tb)(TE,8))},token:t,providedIn:xE}),t})();const AE=["mat-button",""],PE=["*"],RE=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"];class jE{constructor(t){this._elementRef=t}}const DE=VS(LS(qS(jE)));let NE=(()=>{class t extends DE{constructor(t,e,n){super(t),this._focusMonitor=e,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const r of RE)this._hasHostAttributes(r)&&this._getHostElement().classList.add(r);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,e){t?this._focusMonitor.focusVia(this._getHostElement(),t,e):this._getHostElement().focus(e)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(t=>this._getHostElement().hasAttribute(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(Mv),r.Kb(IS,8))},t.\u0275cmp=r.Eb({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,e){if(1&t&&r.yc(XS,!0),2&t){let t;r.ic(t=r.Xb())&&(e.ripple=t.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,e){2&t&&(r.Bb("disabled",e.disabled||null),r.Cb("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-button-disabled",e.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[r.xb],attrs:AE,ngContentSelectors:PE,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,e){1&t&&(r.fc(),r.Pb(0,"span",0),r.ec(1),r.Ob(),r.Lb(2,"span",1),r.Lb(3,"span",2)),2&t&&(r.Ab(2),r.Cb("mat-button-ripple-round",e.isRoundButton||e.isIconButton),r.gc("matRippleDisabled",e._isRippleDisabled())("matRippleCentered",e.isIconButton)("matRippleTrigger",e._getHostElement()))},directives:[XS],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),t})(),ME=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},imports:[[ZS,FS],FS]}),t})();function FE(t,e){if(1&t){const t=r.Qb();r.Pb(0,"div",1),r.Pb(1,"button",2),r.Wb("click",function(){return r.mc(t),r.ac().action()}),r.vc(2),r.Ob(),r.Ob()}if(2&t){const t=r.ac();r.Ab(2),r.wc(t.data.action)}}function LE(t,e){}const VE=new r.q("MatSnackBarData");class qE{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const UE=Math.pow(2,31)-1;class BE{constructor(t,e){this._overlayRef=e,this._afterDismissed=new Lt.a,this._afterOpened=new Lt.a,this._onAction=new Lt.a,this._dismissedByAction=!1,this.containerInstance=t,this.onAction().subscribe(()=>this.dismiss()),t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,UE))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let zE=(()=>{class t{constructor(t,e){this.snackBarRef=t,this.data=e}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(BE),r.Kb(VE))},t.\u0275cmp=r.Eb({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,e){1&t&&(r.Pb(0,"span"),r.vc(1),r.Ob(),r.uc(2,FE,3,1,"div",0)),2&t&&(r.Ab(1),r.wc(e.data.message),r.Ab(1),r.gc("ngIf",e.hasAction))},directives:[q,NE],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),t})();const HE={snackBarState:$v("state",[Jv("void, hidden",Zv({transform:"scale(0.8)",opacity:0})),Jv("visible",Zv({transform:"scale(1)",opacity:1})),ew("* => visible",Yv("150ms cubic-bezier(0, 0, 0.2, 1)")),ew("* => void, * => hidden",Yv("75ms cubic-bezier(0.4, 0.0, 1, 1)",Zv({opacity:0})))])};let KE=(()=>{class t extends IO{constructor(t,e,n,r,i){super(),this._ngZone=t,this._elementRef=e,this._changeDetectorRef=n,this._platform=r,this.snackBarConfig=i,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Lt.a,this._onExit=new Lt.a,this._onEnter=new Lt.a,this._animationState="void",this.attachDomPortal=t=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(t)),this._live="assertive"!==i.politeness||i.announcementMessage?"off"===i.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(t)}onAnimationEnd(t){const{fromState:e,toState:n}=t;if(("void"===n&&"void"!==e||"hidden"===n)&&this._completeExit(),"visible"===n){const t=this._onEnter;this._ngZone.run(()=>{t.next(),t.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(he(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const t=this._elementRef.nativeElement,e=this.snackBarConfig.panelClass;e&&(Array.isArray(e)?e.forEach(e=>t.classList.add(e)):t.classList.add(e)),"center"===this.snackBarConfig.horizontalPosition&&t.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&t.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),e=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&e){let n=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(n=document.activeElement),t.removeAttribute("aria-hidden"),e.appendChild(t),null==n||n.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.z),r.Kb(r.l),r.Kb(r.h),r.Kb(ev),r.Kb(qE))},t.\u0275cmp=r.Eb({type:t,selectors:[["snack-bar-container"]],viewQuery:function(t,e){if(1&t&&r.qc(PO,!0),2&t){let t;r.ic(t=r.Xb())&&(e._portalOutlet=t.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(t,e){1&t&&r.sc("@state.done",function(t){return e.onAnimationEnd(t)}),2&t&&r.tc("@state",e._animationState)},features:[r.xb],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,e){1&t&&(r.Pb(0,"div",0),r.uc(1,LE,0,0,"ng-template",1),r.Ob(),r.Lb(2,"div")),2&t&&(r.Ab(2),r.Bb("aria-live",e._live)("role",e._role))},directives:[PO],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[HE.snackBarState]}}),t})(),WE=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},imports:[[uE,RO,tt,ME,FS],FS]}),t})();const GE=new r.q("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new qE}});let QE=(()=>{class t{constructor(t,e,n,r,i,o){this._overlay=t,this._live=e,this._injector=n,this._breakpointObserver=r,this._parentSnackBar=i,this._defaultConfig=o,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=zE,this.snackBarContainerComponent=KE,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,e){return this._attach(t,e)}openFromTemplate(t,e){return this._attach(t,e)}open(t,e="",n){const r=Object.assign(Object.assign({},this._defaultConfig),n);return r.data={message:t,action:e},r.announcementMessage===t&&(r.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,r)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,e){const n=r.r.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:qE,useValue:e}]}),i=new xO(this.snackBarContainerComponent,e.viewContainerRef,n),o=t.attach(i);return o.instance.snackBarConfig=e,o.instance}_attach(t,e){const n=Object.assign(Object.assign(Object.assign({},new qE),this._defaultConfig),e),i=this._createOverlay(n),o=this._attachSnackBarContainer(i,n),s=new BE(o,i);if(t instanceof r.L){const e=new kO(t,null,{$implicit:n.data,snackBarRef:s});s.instance=o.attachTemplatePortal(e)}else{const e=this._createInjector(n,s),r=new xO(t,void 0,e),i=o.attachComponentPortal(r);s.instance=i.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(yO(i.detachments())).subscribe(t=>{const e=i.overlayElement.classList;t.matches?e.add(this.handsetCssClass):e.remove(this.handsetCssClass)}),n.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(n.announcementMessage,n.politeness)}),this._animateSnackBar(s,n),this._openedSnackBarRef=s,this._openedSnackBarRef}_animateSnackBar(t,e){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),e.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),e.duration&&e.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(e.duration))}_createOverlay(t){const e=new UO;e.direction=t.direction;let n=this._overlay.position().global();const r="rtl"===t.direction,i="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!r||"end"===t.horizontalPosition&&r,o=!i&&"center"!==t.horizontalPosition;return i?n.left("0"):o?n.right("0"):n.centerHorizontally(),"top"===t.verticalPosition?n.top("0"):n.bottom("0"),e.positionStrategy=n,this._overlay.create(e)}_createInjector(t,e){return r.r.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:BE,useValue:e},{provide:VE,useValue:t.data}]})}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(aE),r.Tb(Pv),r.Tb(r.r),r.Tb(gE),r.Tb(t,12),r.Tb(GE))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(aE),Object(r.Tb)(Pv),Object(r.Tb)(r.o),Object(r.Tb)(gE),Object(r.Tb)(t,12),Object(r.Tb)(GE))},token:t,providedIn:WE}),t})();class $E{constructor(t,e){this._document=e;const n=this._textarea=this._document.createElement("textarea"),r=n.style;r.position="fixed",r.top=r.opacity="0",r.left="-999em",n.setAttribute("aria-hidden","true"),n.value=t,this._document.body.appendChild(n)}copy(){const t=this._textarea;let e=!1;try{if(t){const n=this._document.activeElement;t.select(),t.setSelectionRange(0,t.value.length),e=this._document.execCommand("copy"),n&&n.focus()}}catch(zA){}return e}destroy(){const t=this._textarea;t&&(t.parentNode&&t.parentNode.removeChild(t),this._textarea=void 0)}}let YE=(()=>{class t{constructor(t){this._document=t}copy(t){const e=this.beginCopy(t),n=e.copy();return e.destroy(),n}beginCopy(t){return new $E(t,this._document)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(a))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(a))},token:t,providedIn:"root"}),t})();const XE=new r.q("CDK_COPY_TO_CLIPBOARD_CONFIG");let ZE=(()=>{class t{constructor(t,e,n){this._clipboard=t,this._ngZone=e,this.text="",this.attempts=1,this.copied=new r.n,this._pending=new Set,n&&null!=n.attempts&&(this.attempts=n.attempts)}copy(t=this.attempts){if(t>1){let e=t;const n=this._clipboard.beginCopy(this.text);this._pending.add(n);const r=()=>{const t=n.copy();t||!--e||this._destroyed?(this._currentTimeout=null,this._pending.delete(n),n.destroy(),this.copied.emit(t)):this._currentTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(r,1))};r()}else this.copied.emit(this._clipboard.copy(this.text))}ngOnDestroy(){this._currentTimeout&&clearTimeout(this._currentTimeout),this._pending.forEach(t=>t.destroy()),this._pending.clear(),this._destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(YE),r.Kb(r.z),r.Kb(XE,8))},t.\u0275dir=r.Fb({type:t,selectors:[["","cdkCopyToClipboard",""]],hostBindings:function(t,e){1&t&&r.Wb("click",function(){return e.copy()})},inputs:{text:["cdkCopyToClipboard","text"],attempts:["cdkCopyToClipboardAttempts","attempts"]},outputs:{copied:"cdkCopyToClipboardCopied"}}),t})(),JE=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)}}),t})();const tx={tooltipState:$v("state",[Jv("initial, void, hidden",Zv({opacity:0,transform:"scale(0)"})),Jv("visible",Zv({transform:"scale(1)"})),ew("* => visible",Yv("200ms cubic-bezier(0, 0, 0.2, 1)",tw([Zv({opacity:0,transform:"scale(0)",offset:0}),Zv({opacity:.5,transform:"scale(0.99)",offset:.5}),Zv({opacity:1,transform:"scale(1)",offset:1})]))),ew("* => hidden",Yv("100ms cubic-bezier(0, 0, 0.2, 1)",Zv({opacity:0})))])},ex=cv({passive:!0}),nx=new r.q("mat-tooltip-scroll-strategy"),rx={provide:nx,deps:[aE],useFactory:function(t){return()=>t.scrollStrategies.reposition({scrollThrottle:20})}},ix=new r.q("mat-tooltip-default-options",{providedIn:"root",factory:function(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let ox=(()=>{class t{constructor(t,e,n,r,i,o,s,a,c,u,l,h){this._overlay=t,this._elementRef=e,this._scrollDispatcher=n,this._viewContainerRef=r,this._ngZone=i,this._platform=o,this._ariaDescriber=s,this._focusMonitor=a,this._dir=u,this._defaultOptions=l,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this.showDelay=this._defaultOptions.showDelay,this.hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new Lt.a,this._handleKeydown=t=>{this._isTooltipVisible()&&27===t.keyCode&&!H_(t)&&(t.preventDefault(),t.stopPropagation(),this._ngZone.run(()=>this.hide(0)))},this._scrollStrategy=c,l&&(l.position&&(this.position=l.position),l.touchGestures&&(this.touchGestures=l.touchGestures)),i.runOutsideAngular(()=>{e.nativeElement.addEventListener("keydown",this._handleKeydown)})}get position(){return this._position}set position(t){t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(),this._tooltipInstance&&this._tooltipInstance.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(t){this._disabled=$_(t),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get message(){return this._message}set message(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=t?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(yO(this._destroyed)).subscribe(t=>{t?"keyboard"===t&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const t=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),t.removeEventListener("keydown",this._handleKeydown),this._passiveListeners.forEach(([e,n])=>{t.removeEventListener(e,n,ex)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const e=this._createOverlay();this._detach(),this._portal=this._portal||new xO(sx,this._viewContainerRef),this._tooltipInstance=e.attach(this._portal).instance,this._tooltipInstance.afterHidden().pipe(yO(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),this._tooltipInstance.show(t)}hide(t=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(t)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const t=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),e=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(".mat-tooltip").withFlexibleDimensions(!1).withViewportMargin(8).withScrollableContainers(t);return e.positionChanges.pipe(yO(this._destroyed)).subscribe(t=>{this._tooltipInstance&&t.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:e,panelClass:"mat-tooltip-panel",scrollStrategy:this._scrollStrategy()}),this._updatePosition(),this._overlayRef.detachments().pipe(yO(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(){const t=this._overlayRef.getConfig().positionStrategy,e=this._getOrigin(),n=this._getOverlayPosition();t.withPositions([Object.assign(Object.assign({},e.main),n.main),Object.assign(Object.assign({},e.fallback),n.fallback)])}_getOrigin(){const t=!this._dir||"ltr"==this._dir.value,e=this.position;let n;"above"==e||"below"==e?n={originX:"center",originY:"above"==e?"top":"bottom"}:"before"==e||"left"==e&&t||"right"==e&&!t?n={originX:"start",originY:"center"}:("after"==e||"right"==e&&t||"left"==e&&!t)&&(n={originX:"end",originY:"center"});const{x:r,y:i}=this._invertPosition(n.originX,n.originY);return{main:n,fallback:{originX:r,originY:i}}}_getOverlayPosition(){const t=!this._dir||"ltr"==this._dir.value,e=this.position;let n;"above"==e?n={overlayX:"center",overlayY:"bottom"}:"below"==e?n={overlayX:"center",overlayY:"top"}:"before"==e||"left"==e&&t||"right"==e&&!t?n={overlayX:"end",overlayY:"center"}:("after"==e||"right"==e&&t||"left"==e&&!t)&&(n={overlayX:"start",overlayY:"center"});const{x:r,y:i}=this._invertPosition(n.overlayX,n.overlayY);return{main:n,fallback:{overlayX:r,overlayY:i}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(he(1),yO(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,e){return"above"===this.position||"below"===this.position?"top"===e?e="bottom":"bottom"===e&&(e="top"):"end"===t?t="start":"start"===t&&(t="end"),{x:t,y:e}}_setupPointerEnterEventsIfNeeded(){!this._disabled&&this.message&&this._viewInitialized&&!this._passiveListeners.length&&(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",()=>this.hide()],["wheel",t=>this._wheelListener(t)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const e=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",e],["touchcancel",e])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([t,e])=>{this._elementRef.nativeElement.addEventListener(t,e,ex)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){const e=(this._document||document).elementFromPoint(t.clientX,t.clientY),n=this._elementRef.nativeElement;e===n||n.contains(e)||this.hide()}}_disableNativeGesturesIfNecessary(){const t=this.touchGestures;if("off"!==t){const e=this._elementRef.nativeElement,n=e.style;("on"===t||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName)&&(n.userSelect=n.msUserSelect=n.webkitUserSelect=n.MozUserSelect="none"),"on"!==t&&e.draggable||(n.webkitUserDrag="none"),n.touchAction="none",n.webkitTapHighlightColor="transparent"}}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(aE),r.Kb(r.l),r.Kb(wO),r.Kb(r.Q),r.Kb(r.z),r.Kb(ev),r.Kb(vv),r.Kb(Mv),r.Kb(nx),r.Kb(Hv,8),r.Kb(ix,8),r.Kb(a))},t.\u0275dir=r.Fb({type:t,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],inputs:{showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]},exportAs:["matTooltip"]}),t})(),sx=(()=>{class t{constructor(t,e){this._changeDetectorRef=t,this._breakpointObserver=e,this._visibility="initial",this._closeOnInteraction=!1,this._onHide=new Lt.a,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)")}show(t){this._hideTimeoutId&&(clearTimeout(this._hideTimeoutId),this._hideTimeoutId=null),this._closeOnInteraction=!0,this._showTimeoutId=setTimeout(()=>{this._visibility="visible",this._showTimeoutId=null,this._markForCheck()},t)}hide(t){this._showTimeoutId&&(clearTimeout(this._showTimeoutId),this._showTimeoutId=null),this._hideTimeoutId=setTimeout(()=>{this._visibility="hidden",this._hideTimeoutId=null,this._markForCheck()},t)}afterHidden(){return this._onHide}isVisible(){return"visible"===this._visibility}ngOnDestroy(){this._onHide.complete()}_animationStart(){this._closeOnInteraction=!1}_animationDone(t){const e=t.toState;"hidden"!==e||this.isVisible()||this._onHide.next(),"visible"!==e&&"hidden"!==e||(this._closeOnInteraction=!0)}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.h),r.Kb(gE))},t.\u0275cmp=r.Eb({type:t,selectors:[["mat-tooltip-component"]],hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(t,e){1&t&&r.Wb("click",function(){return e._handleBodyInteraction()},!1,r.kc)("auxclick",function(){return e._handleBodyInteraction()},!1,r.kc),2&t&&r.rc("zoom","visible"===e._visibility?1:null)},decls:3,vars:7,consts:[[1,"mat-tooltip",3,"ngClass"]],template:function(t,e){if(1&t&&(r.Pb(0,"div",0),r.Wb("@state.start",function(){return e._animationStart()})("@state.done",function(t){return e._animationDone(t)}),r.bc(1,"async"),r.vc(2),r.Ob()),2&t){let t=null;r.Cb("mat-tooltip-handset",null==(t=r.cc(1,5,e._isHandset))?null:t.matches),r.gc("ngClass",e.tooltipClass)("@state",e._visibility),r.Ab(2),r.wc(e.message)}},directives:[M],pipes:[Z],styles:[".mat-tooltip-panel{pointer-events:none !important}.mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}\n"],encapsulation:2,data:{animation:[tx.tooltipState]},changeDetection:0}),t})(),ax=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[rx],imports:[[Bv,tt,uE,FS],FS,SO]}),t})();const cx=["underline"],ux=["connectionContainer"],lx=["inputContainer"],hx=["label"];function dx(t,e){1&t&&(r.Nb(0),r.Pb(1,"div",14),r.Lb(2,"div",15),r.Lb(3,"div",16),r.Lb(4,"div",17),r.Ob(),r.Pb(5,"div",18),r.Lb(6,"div",15),r.Lb(7,"div",16),r.Lb(8,"div",17),r.Ob(),r.Mb())}function fx(t,e){1&t&&(r.Pb(0,"div",19),r.ec(1,1),r.Ob())}function px(t,e){if(1&t&&(r.Nb(0),r.ec(1,2),r.Pb(2,"span"),r.vc(3),r.Ob(),r.Mb()),2&t){const t=r.ac(2);r.Ab(3),r.wc(t._control.placeholder)}}function mx(t,e){1&t&&r.ec(0,3,["*ngSwitchCase","true"])}function gx(t,e){1&t&&(r.Pb(0,"span",23),r.vc(1," *"),r.Ob())}function yx(t,e){if(1&t){const t=r.Qb();r.Pb(0,"label",20,21),r.Wb("cdkObserveContent",function(){return r.mc(t),r.ac().updateOutlineGap()}),r.uc(2,px,4,1,"ng-container",12),r.uc(3,mx,1,0,"ng-content",12),r.uc(4,gx,2,0,"span",22),r.Ob()}if(2&t){const t=r.ac();r.Cb("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),r.gc("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),r.Bb("for",t._control.id)("aria-owns",t._control.id),r.Ab(2),r.gc("ngSwitchCase",!1),r.Ab(1),r.gc("ngSwitchCase",!0),r.Ab(1),r.gc("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function bx(t,e){1&t&&(r.Pb(0,"div",24),r.ec(1,4),r.Ob())}function _x(t,e){if(1&t&&(r.Pb(0,"div",25,26),r.Lb(2,"span",27),r.Ob()),2&t){const t=r.ac();r.Ab(2),r.Cb("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function vx(t,e){if(1&t&&(r.Pb(0,"div"),r.ec(1,5),r.Ob()),2&t){const t=r.ac();r.gc("@transitionMessages",t._subscriptAnimationState)}}function wx(t,e){if(1&t&&(r.Pb(0,"div",31),r.vc(1),r.Ob()),2&t){const t=r.ac(2);r.gc("id",t._hintLabelId),r.Ab(1),r.wc(t.hintLabel)}}function Cx(t,e){if(1&t&&(r.Pb(0,"div",28),r.uc(1,wx,2,2,"div",29),r.ec(2,6),r.Lb(3,"div",30),r.ec(4,7),r.Ob()),2&t){const t=r.ac();r.gc("@transitionMessages",t._subscriptAnimationState),r.Ab(1),r.gc("ngIf",t.hintLabel)}}const Sx=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Ox=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],Ex=new r.q("MatError"),xx={transitionMessages:$v("transitionMessages",[Jv("enter",Zv({opacity:1,transform:"translateY(0%)"})),ew("void => enter",[Zv({opacity:0,transform:"translateY(-5px)"}),Yv("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let kx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t}),t})();const Tx=new r.q("MatHint");let Ix=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t,selectors:[["mat-label"]]}),t})(),Ax=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t,selectors:[["mat-placeholder"]]}),t})();const Px=new r.q("MatPrefix"),Rx=new r.q("MatSuffix");let jx=0;class Dx{constructor(t){this._elementRef=t}}const Nx=VS(Dx,"primary"),Mx=new r.q("MAT_FORM_FIELD_DEFAULT_OPTIONS"),Fx=new r.q("MatFormField");let Lx=(()=>{class t extends Nx{constructor(t,e,n,r,i,o,s,a){super(t),this._elementRef=t,this._changeDetectorRef=e,this._dir=r,this._defaults=i,this._platform=o,this._ngZone=s,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Lt.a,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+jx++,this._labelId="mat-form-field-label-"+jx++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==a,this.appearance=i&&i.appearance?i.appearance:"legacy",this._hideRequiredMarker=!(!i||null==i.hideRequiredMarker)&&i.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const e=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&e!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=$_(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add("mat-form-field-type-"+t.controlType),t.stateChanges.pipe(pe(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(yO(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(yO(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),Object(d_.a)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(pe(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(pe(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(yO(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const e=this._control?this._control.ngControl:null;return e&&e[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,tO(this._label.nativeElement,"transitionend").pipe(he(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const e=this._hintChildren?this._hintChildren.find(t=>"start"===t.align):null,n=this._hintChildren?this._hintChildren.find(t=>"end"===t.align):null;e?t.push(e.id):this._hintLabel&&t.push(this._hintLabelId),n&&t.push(n.id)}else this._errorChildren&&t.push(...this._errorChildren.map(t=>t.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null;if("outline"!==this.appearance||!t||!t.children.length||!t.textContent.trim())return;if(!this._platform.isBrowser)return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let e=0,n=0;const r=this._connectionContainerRef.nativeElement,i=r.querySelectorAll(".mat-form-field-outline-start"),o=r.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const i=r.getBoundingClientRect();if(0===i.width&&0===i.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const o=this._getStartEnd(i),s=t.children,a=this._getStartEnd(s[0].getBoundingClientRect());let c=0;for(let t=0;t<s.length;t++)c+=s[t].offsetWidth;e=Math.abs(a-o)-5,n=c>0?.75*c+10:0}for(let s=0;s<i.length;s++)i[s].style.width=e+"px";for(let s=0;s<o.length;s++)o[s].style.width=n+"px";this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const e=t.getRootNode();return e&&e!==t}return document.documentElement.contains(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(r.h),r.Kb(r.l),r.Kb(Hv,8),r.Kb(Mx,8),r.Kb(ev),r.Kb(r.z),r.Kb(IS,8))},t.\u0275cmp=r.Eb({type:t,selectors:[["mat-form-field"]],contentQueries:function(t,e,n){if(1&t&&(r.Db(n,kx,!0),r.pc(n,kx,!0),r.Db(n,Ix,!0),r.pc(n,Ix,!0),r.Db(n,Ax,!0),r.Db(n,Ex,!0),r.Db(n,Tx,!0),r.Db(n,Px,!0),r.Db(n,Rx,!0)),2&t){let t;r.ic(t=r.Xb())&&(e._controlNonStatic=t.first),r.ic(t=r.Xb())&&(e._controlStatic=t.first),r.ic(t=r.Xb())&&(e._labelChildNonStatic=t.first),r.ic(t=r.Xb())&&(e._labelChildStatic=t.first),r.ic(t=r.Xb())&&(e._placeholderChild=t.first),r.ic(t=r.Xb())&&(e._errorChildren=t),r.ic(t=r.Xb())&&(e._hintChildren=t),r.ic(t=r.Xb())&&(e._prefixChildren=t),r.ic(t=r.Xb())&&(e._suffixChildren=t)}},viewQuery:function(t,e){if(1&t&&(r.yc(cx,!0),r.qc(ux,!0),r.yc(lx,!0),r.yc(hx,!0)),2&t){let t;r.ic(t=r.Xb())&&(e.underlineRef=t.first),r.ic(t=r.Xb())&&(e._connectionContainerRef=t.first),r.ic(t=r.Xb())&&(e._inputContainerRef=t.first),r.ic(t=r.Xb())&&(e._label=t.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,e){2&t&&r.Cb("mat-form-field-appearance-standard","standard"==e.appearance)("mat-form-field-appearance-fill","fill"==e.appearance)("mat-form-field-appearance-outline","outline"==e.appearance)("mat-form-field-appearance-legacy","legacy"==e.appearance)("mat-form-field-invalid",e._control.errorState)("mat-form-field-can-float",e._canLabelFloat())("mat-form-field-should-float",e._shouldLabelFloat())("mat-form-field-has-label",e._hasFloatingLabel())("mat-form-field-hide-placeholder",e._hideControlPlaceholder())("mat-form-field-disabled",e._control.disabled)("mat-form-field-autofilled",e._control.autofilled)("mat-focused",e._control.focused)("ng-untouched",e._shouldForward("untouched"))("ng-touched",e._shouldForward("touched"))("ng-pristine",e._shouldForward("pristine"))("ng-dirty",e._shouldForward("dirty"))("ng-valid",e._shouldForward("valid"))("ng-invalid",e._shouldForward("invalid"))("ng-pending",e._shouldForward("pending"))("_mat-animation-noopable",!e._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[r.zb([{provide:Fx,useExisting:t}]),r.xb],ngContentSelectors:Ox,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,e){1&t&&(r.fc(Sx),r.Pb(0,"div",0),r.Pb(1,"div",1,2),r.Wb("click",function(t){return e._control.onContainerClick&&e._control.onContainerClick(t)}),r.uc(3,dx,9,0,"ng-container",3),r.uc(4,fx,2,0,"div",4),r.Pb(5,"div",5,6),r.ec(7),r.Pb(8,"span",7),r.uc(9,yx,5,16,"label",8),r.Ob(),r.Ob(),r.uc(10,bx,2,0,"div",9),r.Ob(),r.uc(11,_x,3,4,"div",10),r.Pb(12,"div",11),r.uc(13,vx,2,1,"div",12),r.uc(14,Cx,5,2,"div",13),r.Ob(),r.Ob()),2&t&&(r.Ab(3),r.gc("ngIf","outline"==e.appearance),r.Ab(1),r.gc("ngIf",e._prefixChildren.length),r.Ab(5),r.gc("ngIf",e._hasFloatingLabel()),r.Ab(1),r.gc("ngIf",e._suffixChildren.length),r.Ab(1),r.gc("ngIf","outline"!=e.appearance),r.Ab(1),r.gc("ngSwitch",e._getDisplayedMessages()),r.Ab(1),r.gc("ngSwitchCase","error"),r.Ab(1),r.gc("ngSwitchCase","hint"))},directives:[q,H,K,dv],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[xx.transitionMessages]},changeDetection:0}),t})(),Vx=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},imports:[[tt,FS,fv],FS]}),t})();var qx=n("XoHu");function Ux(...t){if(1===t.length){const e=t[0];if(Object(Bt.a)(e))return Bx(e,null);if(Object(qx.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Bx(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Bx(t=1===t.length&&Object(Bt.a)(t[0])?t[0]:t,null).pipe(Object(oe.a)(t=>e(...t)))}return Bx(t,null)}function Bx(t,e){return new Gt.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const c=Object(Mt.a)(t[a]);let u=!1;n.add(c.subscribe({next:t=>{u||(u=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&u||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const zx=new r.q("NgValueAccessor"),Hx={provide:zx,useExisting:Object(r.U)(()=>Kx),multi:!0};let Kx=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.Wb("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[r.zb([Hx])]}),t})();const Wx={provide:zx,useExisting:Object(r.U)(()=>Qx),multi:!0},Gx=new r.q("CompositionEventMode");let Qx=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=s()?s().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l),r.Kb(Gx,8))},t.\u0275dir=r.Fb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Wb("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.zb([Wx])]}),t})();function $x(t){return null==t||0===t.length}function Yx(t){return null!=t&&"number"==typeof t.length}const Xx=new r.q("NgValidators"),Zx=new r.q("NgAsyncValidators"),Jx=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class tk{static min(t){return e=>{if($x(e.value)||$x(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if($x(e.value)||$x(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return $x(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return $x(t.value)||Jx.test(t.value)?null:{email:!0}}static minLength(t){return e=>$x(e.value)||!Yx(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>Yx(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return tk.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if($x(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(ek);return 0==e.length?null:function(t){return rk(ik(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(ek);return 0==e.length?null:function(t){return Ux(ik(t,e).map(nk)).pipe(Object(oe.a)(rk))}}}function ek(t){return null!=t}function nk(t){const e=Object(r.sb)(t)?Object(Mt.a)(t):t;return Object(r.rb)(e),e}function rk(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function ik(t,e){return e.map(e=>e(t))}function ok(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function sk(t){return null!=t?tk.compose(ok(t)):null}function ak(t){return null!=t?tk.composeAsync(ok(t)):null}function ck(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function uk(t){return t._rawValidators}function lk(t){return t._rawAsyncValidators}let hk=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=sk(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=ak(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t}),t})(),dk=(()=>{class t extends hk{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return fk(e||t)},t.\u0275dir=r.Fb({type:t,features:[r.xb]}),t})();const fk=r.Rb(dk);class pk extends hk{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let mk=(()=>{class t extends class{constructor(t){this._cd=t}get ngClassUntouched(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.untouched)&&void 0!==n&&n}get ngClassTouched(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.touched)&&void 0!==n&&n}get ngClassPristine(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.pristine)&&void 0!==n&&n}get ngClassDirty(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.dirty)&&void 0!==n&&n}get ngClassValid(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.valid)&&void 0!==n&&n}get ngClassInvalid(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.invalid)&&void 0!==n&&n}get ngClassPending(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.pending)&&void 0!==n&&n}}{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(pk,2))},t.\u0275dir=r.Fb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Cb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.xb]}),t})();const gk={provide:zx,useExisting:Object(r.U)(()=>yk),multi:!0};let yk=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Wb("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.zb([gk])]}),t})();const bk={provide:zx,useExisting:Object(r.U)(()=>vk),multi:!0};let _k=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),vk=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(pk),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l),r.Kb(_k),r.Kb(r.r))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.Wb("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.zb([bk])]}),t})();const wk={provide:zx,useExisting:Object(r.U)(()=>Ck),multi:!0};let Ck=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.Wb("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.zb([wk])]}),t})();const Sk={provide:zx,useExisting:Object(r.U)(()=>Ok),multi:!0};let Ok=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.Wb("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.zb([Sk])]}),t})();const Ek={provide:zx,useExisting:Object(r.U)(()=>xk),multi:!0};let xk=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.Wb("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.zb([Ek])]}),t})();function kk(t,e){Ik(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Pk(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Pk(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Tk(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ik(t,e,n){const r=uk(t);null!==e.validator?t.setValidators(ck(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=lk(t);if(null!==e.asyncValidator?t.setAsyncValidators(ck(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();Tk(e._rawValidators,n),Tk(e._rawAsyncValidators,n)}}function Ak(t,e,n){if(null!==t){if(null!==e.validator){const n=uk(t);Array.isArray(n)&&n.length>0&&t.setValidators(n.filter(t=>t!==e.validator))}if(null!==e.asyncValidator){const n=lk(t);Array.isArray(n)&&n.length>0&&t.setAsyncValidators(n.filter(t=>t!==e.asyncValidator))}}if(n){const t=()=>{};Tk(e._rawValidators,t),Tk(e._rawAsyncValidators,t)}}function Pk(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Rk(t,e){Ik(t,e,!1)}const jk=[Kx,Ck,yk,Ok,xk,vk];function Dk(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function Nk(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Mk="VALID",Fk="INVALID",Lk="PENDING",Vk="DISABLED";function qk(t){return(Hk(t)?t.validators:t)||null}function Uk(t){return Array.isArray(t)?sk(t):t||null}function Bk(t,e){return(Hk(e)?e.asyncValidators:t)||null}function zk(t){return Array.isArray(t)?ak(t):t||null}function Hk(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Kk{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Uk(this._rawValidators),this._composedAsyncValidatorFn=zk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Mk}get invalid(){return this.status===Fk}get pending(){return this.status==Lk}get disabled(){return this.status===Vk}get enabled(){return this.status!==Vk}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Uk(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=zk(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Lk,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Vk,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Mk,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Mk&&this.status!==Lk||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vk:Mk}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Lk,this._hasOwnPendingAsyncValidator=!0;const e=nk(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Gk?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Qk&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?Vk:this.errors?Fk:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Lk)?Lk:this._anyControlsHaveStatus(Fk)?Fk:Mk}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Hk(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Wk extends Kk{constructor(t=null,e,n){super(qk(e),Bk(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Nk(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Nk(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Gk extends Kk{constructor(t,e,n){super(qk(e),Bk(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Wk?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Qk extends Kk{constructor(t,e,n){super(qk(e),Bk(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Wk?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const $k={provide:dk,useExisting:Object(r.U)(()=>Xk)},Yk=(()=>Promise.resolve(null))();let Xk=(()=>{class t extends dk{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.n,this.form=new Gk({},sk(t),ak(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Yk.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),kk(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Yk.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),Nk(this._directives,t)})}addFormGroup(t){Yk.then(()=>{const e=this._findContainer(t.path),n=new Gk({});Rk(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Yk.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){Yk.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Dk(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Xx,10),r.Kb(Zx,10))},t.\u0275dir=r.Fb({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.Wb("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.zb([$k]),r.xb]}),t})();const Zk={provide:pk,useExisting:Object(r.U)(()=>tT)},Jk=(()=>Promise.resolve(null))();let tT=(()=>{class t extends pk{constructor(t,e,n,i){super(),this.control=new Wk,this._registered=!1,this.update=new r.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e);let n=void 0,r=void 0,i=void 0;return e.forEach(t=>{var e;t.constructor===Qx?n=t:(e=t,jk.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){kk(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Jk.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;Jk.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(dk,9),r.Kb(Xx,10),r.Kb(Zx,10),r.Kb(zx,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.zb([Zk]),r.xb,r.yb]}),t})();const eT={provide:dk,useExisting:Object(r.U)(()=>nT)};let nT=(()=>{class t extends dk{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new r.n,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return kk(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){Nk(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);Rk(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);Rk(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,Dk(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){const n=()=>{};e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n),Ak(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}(t.control||null,t),e&&kk(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ik(this.form,this,!1),this._oldForm&&Ak(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Xx,10),r.Kb(Zx,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.Wb("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.zb([eT]),r.xb,r.yb]}),t})(),rT=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)}}),t})(),iT=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[_k],imports:[rT]}),t})();const oT=["*"],sT=new r.q("MatChipRemove"),aT=new r.q("MatChipAvatar"),cT=new r.q("MatChipTrailingIcon");class uT{constructor(t){this._elementRef=t}}const lT=US(VS(qS(uT),"primary"),-1);let hT=(()=>{class t extends lT{constructor(t,e,n,i,o,s,a,c){super(t),this._elementRef=t,this._ngZone=e,this._changeDetectorRef=o,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new Lt.a,this._onBlur=new Lt.a,this.selectionChange=new r.n,this.destroyed=new r.n,this.removed=new r.n,this._addHostClassName(),this._chipRippleTarget=s.createElement("div"),this._chipRippleTarget.classList.add("mat-chip-ripple"),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new $S(this,e,this._chipRippleTarget,n),this._chipRipple.setupTriggerEvents(t),this.rippleConfig=i||{},this._animationsDisabled="NoopAnimations"===a,this.tabIndex=null!=c&&parseInt(c)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(t){const e=$_(t);e!==this._selected&&(this._selected=e,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(t){this._value=t}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(t){this._selectable=$_(t)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(t){this._disabled=$_(t)}get removable(){return this._removable}set removable(t){this._removable=$_(t)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const t="mat-basic-chip",e=this._elementRef.nativeElement;e.hasAttribute(t)||e.tagName.toLowerCase()===t?e.classList.add(t):e.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(t=!1){return this._selected=!this.selected,this._dispatchSelectionChange(t),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(t){this.disabled?t.preventDefault():t.stopPropagation()}_handleKeydown(t){if(!this.disabled)switch(t.keyCode){case 46:case 8:this.remove(),t.preventDefault();break;case 32:this.selectable&&this.toggleSelected(!0),t.preventDefault()}}_blur(){this._ngZone.onStable.pipe(he(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(t=!1){this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(r.z),r.Kb(ev),r.Kb(YS,8),r.Kb(r.h),r.Kb(a),r.Kb(IS,8),r.Ub("tabindex"))},t.\u0275dir=r.Fb({type:t,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(t,e,n){if(1&t&&(r.Db(n,aT,!0),r.Db(n,cT,!0),r.Db(n,sT,!0)),2&t){let t;r.ic(t=r.Xb())&&(e.avatar=t.first),r.ic(t=r.Xb())&&(e.trailingIcon=t.first),r.ic(t=r.Xb())&&(e.removeIcon=t.first)}},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(t,e){1&t&&r.Wb("click",function(t){return e._handleClick(t)})("keydown",function(t){return e._handleKeydown(t)})("focus",function(){return e.focus()})("blur",function(){return e._blur()}),2&t&&(r.Bb("tabindex",e.disabled?null:e.tabIndex)("disabled",e.disabled||null)("aria-disabled",e.disabled.toString())("aria-selected",e.ariaSelected),r.Cb("mat-chip-selected",e.selected)("mat-chip-with-avatar",e.avatar)("mat-chip-with-trailing-icon",e.trailingIcon||e.removeIcon)("mat-chip-disabled",e.disabled)("_mat-animation-noopable",e._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[r.xb]}),t})();const dT=new r.q("mat-chips-default-options");class fT{constructor(t,e,n,r){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=r}}const pT=BS(fT);let mT=0;class gT{constructor(t,e){this.source=t,this.value=e}}let yT=(()=>{class t extends pT{constructor(t,e,n,i,o,s,a){super(s,i,o,a),this._elementRef=t,this._changeDetectorRef=e,this._dir=n,this.ngControl=a,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new Lt.a,this._uid="mat-chip-list-"+mT++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(t,e)=>t===e,this._required=!1,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new r.n,this.valueChange=new r.n,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get role(){return this.empty?null:"listbox"}get multiple(){return this._multiple}set multiple(t){this._multiple=$_(t),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this.writeValue(t),this._value=t}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){return this._required}set required(t){this._required=$_(t),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=$_(t),this._syncChipsState()}get selectable(){return this._selectable}set selectable(t){this._selectable=$_(t),this.chips&&this.chips.forEach(t=>t.chipListSelectable=this._selectable)}set tabIndex(t){this._userTabIndex=t,this._tabIndex=t}get chipSelectionChanges(){return Object(d_.a)(...this.chips.map(t=>t.selectionChange))}get chipFocusChanges(){return Object(d_.a)(...this.chips.map(t=>t._onFocus))}get chipBlurChanges(){return Object(d_.a)(...this.chips.map(t=>t._onBlur))}get chipRemoveChanges(){return Object(d_.a)(...this.chips.map(t=>t.destroyed))}ngAfterContentInit(){this._keyManager=new Sv(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(yO(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.tabOut.pipe(yO(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe(pe(null),yO(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new vO(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(t){this._chipInput=t,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",t.id)}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}writeValue(t){this.chips&&this._setSelectionByValue(t,!1)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this.stateChanges.next()}onContainerClick(t){this._originatesFromChip(t)||this.focus()}focus(t){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(t),this.stateChanges.next()))}_focusInput(t){this._chipInput&&this._chipInput.focus(t)}_keydown(t){const e=t.target;8===t.keyCode&&this._isInputEmpty(e)?(this._keyManager.setLastItemActive(),t.preventDefault()):e&&e.classList.contains("mat-chip")&&(this._keyManager.onKeydown(t),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const t=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(t)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(t){return t>=0&&t<this.chips.length}_isInputEmpty(t){return!(!t||"input"!==t.nodeName.toLowerCase()||t.value)}_setSelectionByValue(t,e=!0){if(this._clearSelection(),this.chips.forEach(t=>t.deselect()),Array.isArray(t))t.forEach(t=>this._selectValue(t,e)),this._sortValues();else{const n=this._selectValue(t,e);n&&e&&this._keyManager.setActiveItem(n)}}_selectValue(t,e=!0){const n=this.chips.find(e=>null!=e.value&&this._compareWith(e.value,t));return n&&(e?n.selectViaInteraction():n.select(),this._selectionModel.select(n)),n}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(t){this._selectionModel.clear(),this.chips.forEach(e=>{e!==t&&e.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(t=>{t.selected&&this._selectionModel.select(t)}),this.stateChanges.next())}_propagateChanges(t){let e=null;e=Array.isArray(this.selected)?this.selected.map(t=>t.value):this.selected?this.selected.value:t,this._value=e,this.change.emit(new gT(this,e)),this.valueChange.emit(e),this._onChange(e),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(t=>{t.source.selected?this._selectionModel.select(t.source):this._selectionModel.deselect(t.source),this.multiple||this.chips.forEach(t=>{!this._selectionModel.isSelected(t)&&t.selected&&t.deselect()}),t.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(t=>{let e=this.chips.toArray().indexOf(t.chip);this._isValidIndex(e)&&this._keyManager.updateActiveItem(e),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(t=>{const e=t.chip,n=this.chips.toArray().indexOf(t.chip);this._isValidIndex(n)&&e._hasFocus&&(this._lastDestroyedChipIndex=n)})}_originatesFromChip(t){let e=t.target;for(;e&&e!==this._elementRef.nativeElement;){if(e.classList.contains("mat-chip"))return!0;e=e.parentElement}return!1}_hasFocusedChip(){return this.chips&&this.chips.some(t=>t._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(t=>{t._chipListDisabled=this._disabled,t._chipListMultiple=this.multiple})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(r.h),r.Kb(Hv,8),r.Kb(Xk,8),r.Kb(nT,8),r.Kb(zS),r.Kb(pk,10))},t.\u0275cmp=r.Eb({type:t,selectors:[["mat-chip-list"]],contentQueries:function(t,e,n){if(1&t&&r.Db(n,hT,!0),2&t){let t;r.ic(t=r.Xb())&&(e.chips=t)}},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(t,e){1&t&&r.Wb("focus",function(){return e.focus()})("blur",function(){return e._blur()})("keydown",function(t){return e._keydown(t)}),2&t&&(r.Sb("id",e._uid),r.Bb("tabindex",e.disabled?null:e._tabIndex)("aria-describedby",e._ariaDescribedby||null)("aria-required",e.role?e.required:null)("aria-disabled",e.disabled.toString())("aria-invalid",e.errorState)("aria-multiselectable",e.multiple)("role",e.role)("aria-orientation",e.ariaOrientation),r.Cb("mat-chip-list-disabled",e.disabled)("mat-chip-list-invalid",e.errorState)("mat-chip-list-required",e.required))},inputs:{ariaOrientation:["aria-orientation","ariaOrientation"],multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",selectable:"selectable",tabIndex:"tabIndex",errorStateMatcher:"errorStateMatcher"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[r.zb([{provide:kx,useExisting:t}]),r.xb],ngContentSelectors:oT,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(t,e){1&t&&(r.fc(),r.Pb(0,"div",0),r.ec(1),r.Ob())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;transform:translateZ(0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove.mat-icon{width:18px;height:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),t})();const bT={separatorKeyCodes:[13]};let _T=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[zS,{provide:dT,useValue:bT}],imports:[[FS]]}),t})();var vT=n("WMd4");function wT(t,e=Vi.a){var n;const r=(n=t)instanceof Date&&!isNaN(+n)?+t-e.now():Math.abs(t);return t=>t.lift(new CT(r,e))}class CT{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new ST(t,this.delay,this.scheduler))}}class ST extends zt.a{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,r=t.scheduler,i=t.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const e=Math.max(0,n[0].time-r.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(ST.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new OT(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(vT.a.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(vT.a.createComplete()),this.unsubscribe()}}class OT{constructor(t,e){this.time=t,this.notification=e}}const ET=["mat-menu-item",""],xT=["*"];function kT(t,e){if(1&t){const t=r.Qb();r.Pb(0,"div",0),r.Wb("keydown",function(e){return r.mc(t),r.ac()._handleKeydown(e)})("click",function(){return r.mc(t),r.ac().closed.emit("click")})("@transformMenu.start",function(e){return r.mc(t),r.ac()._onAnimationStart(e)})("@transformMenu.done",function(e){return r.mc(t),r.ac()._onAnimationDone(e)}),r.Pb(1,"div",1),r.ec(2),r.Ob(),r.Ob()}if(2&t){const t=r.ac();r.gc("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),r.Bb("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const TT={transformMenu:$v("transformMenu",[Jv("void",Zv({opacity:0,transform:"scale(0.8)"})),ew("void => enter",Yv("120ms cubic-bezier(0, 0, 0.2, 1)",Zv({opacity:1,transform:"scale(1)"}))),ew("* => void",Yv("100ms 25ms linear",Zv({opacity:0})))]),fadeInItems:$v("fadeInItems",[Jv("showing",Zv({opacity:1})),ew("void => *",[Zv({opacity:0}),Yv("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},IT=new r.q("MatMenuContent"),AT=new r.q("MAT_MENU_PANEL");class PT{}const RT=qS(LS(PT));let jT=(()=>{class t extends RT{constructor(t,e,n,r){super(),this._elementRef=t,this._focusMonitor=n,this._parentMenu=r,this.role="menuitem",this._hovered=new Lt.a,this._focused=new Lt.a,this._highlighted=!1,this._triggersSubmenu=!1,r&&r.addItem&&r.addItem(this)}focus(t,e){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,e):this._getHostElement().focus(e),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var t,e;const n=this._elementRef.nativeElement.cloneNode(!0),r=n.querySelectorAll("mat-icon, .material-icons");for(let i=0;i<r.length;i++){const e=r[i];null===(t=e.parentNode)||void 0===t||t.removeChild(e)}return(null===(e=n.textContent)||void 0===e?void 0:e.trim())||""}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(a),r.Kb(Mv),r.Kb(AT,8))},t.\u0275cmp=r.Eb({type:t,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,e){1&t&&r.Wb("click",function(t){return e._checkDisabled(t)})("mouseenter",function(){return e._handleMouseEnter()}),2&t&&(r.Bb("role",e.role)("tabindex",e._getTabIndex())("aria-disabled",e.disabled.toString())("disabled",e.disabled||null),r.Cb("mat-menu-item",!0)("mat-menu-item-highlighted",e._highlighted)("mat-menu-item-submenu-trigger",e._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[r.xb],attrs:ET,ngContentSelectors:xT,decls:2,vars:2,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"]],template:function(t,e){1&t&&(r.fc(),r.ec(0),r.Lb(1,"div",0)),2&t&&(r.Ab(1),r.gc("matRippleDisabled",e.disableRipple||e.disabled)("matRippleTrigger",e._getHostElement()))},directives:[XS],encapsulation:2,changeDetection:0}),t})();const DT=new r.q("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let NT=0,MT=(()=>{class t{constructor(t,e,n){this._elementRef=t,this._ngZone=e,this._defaultOptions=n,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new r.D,this._tabSubscription=Ve.a.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new Lt.a,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new r.n,this.close=this.closed,this.panelId="mat-menu-panel-"+NT++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=$_(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=$_(t)}set panelClass(t){const e=this._previousPanelClass;e&&e.length&&e.split(" ").forEach(t=>{this._classList[t]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(t=>{this._classList[t]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new Sv(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(pe(this._directDescendantItems),ae(t=>Object(d_.a)(...t.map(t=>t._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(pe(this._directDescendantItems),ae(t=>Object(d_.a)(...t.map(t=>t._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const e=t.keyCode,n=this._keyManager;switch(e){case 27:H_(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:38!==e&&40!==e||n.setFocusOrigin("keyboard"),n.onKeydown(t)}}focusFirstItem(t="program"){this.lazyContent?this._ngZone.onStable.pipe(he(1)).subscribe(()=>this._focusFirstItem(t)):this._focusFirstItem(t)}_focusFirstItem(t){const e=this._keyManager;if(e.setFocusOrigin(t).setFirstItemActive(),!e.activeItem&&this._directDescendantItems.length){let t=this._directDescendantItems.first._getHostElement().parentElement;for(;t;){if("menu"===t.getAttribute("role")){t.focus();break}t=t.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const e="mat-elevation-z"+Math.min(4+t,24),n=Object.keys(this._classList).find(t=>t.startsWith("mat-elevation-z"));n&&n!==this._previousElevation||(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[e]=!0,this._previousElevation=e)}setPositionClasses(t=this.xPosition,e=this.yPosition){const n=this._classList;n["mat-menu-before"]="before"===t,n["mat-menu-after"]="after"===t,n["mat-menu-above"]="above"===e,n["mat-menu-below"]="below"===e}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(pe(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(t=>t._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(r.z),r.Kb(DT))},t.\u0275dir=r.Fb({type:t,contentQueries:function(t,e,n){if(1&t&&(r.Db(n,IT,!0),r.Db(n,jT,!0),r.Db(n,jT,!1)),2&t){let t;r.ic(t=r.Xb())&&(e.lazyContent=t.first),r.ic(t=r.Xb())&&(e._allItems=t),r.ic(t=r.Xb())&&(e.items=t)}},viewQuery:function(t,e){if(1&t&&r.yc(r.L,!0),2&t){let t;r.ic(t=r.Xb())&&(e.templateRef=t.first)}},inputs:{backdropClass:"backdropClass",xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{closed:"closed",close:"close"}}),t})(),FT=(()=>{class t extends MT{constructor(t,e,n){super(t,e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(r.z),r.Kb(DT))},t.\u0275cmp=r.Eb({type:t,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,e){2&t&&r.Bb("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[r.zb([{provide:AT,useExisting:t}]),r.xb],ngContentSelectors:xT,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,e){1&t&&(r.fc(),r.uc(0,kT,3,6,"ng-template"))},directives:[M],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}.mat-menu-item-submenu-trigger::after{width:0;height:0;border-style:solid;border-width:5px 0 5px 5px;border-color:transparent transparent transparent currentColor;content:"";display:inline-block;position:absolute;top:50%;right:16px;transform:translateY(-50%)}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}[dir=rtl] .mat-menu-item-submenu-trigger::after{right:auto;left:16px;transform:rotateY(180deg) translateY(-50%)}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n'],encapsulation:2,data:{animation:[TT.transformMenu,TT.fadeInItems]},changeDetection:0}),t})();const LT=new r.q("mat-menu-scroll-strategy"),VT={provide:LT,deps:[aE],useFactory:function(t){return()=>t.scrollStrategies.reposition()}},qT=cv({passive:!0});let UT=(()=>{class t{constructor(t,e,n,i,o,s,a,c){this._overlay=t,this._element=e,this._viewContainerRef=n,this._menuItemInstance=s,this._dir=a,this._focusMonitor=c,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Ve.a.EMPTY,this._hoverSubscription=Ve.a.EMPTY,this._menuCloseSubscription=Ve.a.EMPTY,this._handleTouchStart=t=>{jv(t)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new r.n,this.onMenuOpen=this.menuOpened,this.menuClosed=new r.n,this.onMenuClose=this.menuClosed,this._scrollStrategy=i,this._parentMaterialMenu=o instanceof MT?o:void 0,e.nativeElement.addEventListener("touchstart",this._handleTouchStart,qT),s&&(s._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(t=>{this._destroyMenu(t),"click"!==t&&"tab"!==t||!this._parentMaterialMenu||this._parentMaterialMenu.closed.emit(t)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,qT),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const t=this._createOverlay(),e=t.getConfig();this._setPosition(e.positionStrategy),e.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,t.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof MT&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(t,e){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,e):this._element.nativeElement.focus(e)}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const e=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),!this.restoreFocus||"keydown"!==t&&this._openedBy&&this.triggersSubmenu()||this.focus(this._openedBy),this._openedBy=void 0,e instanceof MT?(e._resetAnimation(),e.lazyContent?e._animationDone.pipe(be(t=>"void"===t.toState),he(1),yO(e.lazyContent._attached)).subscribe({next:()=>e.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),e.lazyContent&&e.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let t=0,e=this.menu.parentMenu;for(;e;)t++,e=e.parentMenu;this.menu.setElevation(t)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&(this._menuItemInstance._highlighted=t)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const t=this._getOverlayConfig();this._subscribeToPositions(t.positionStrategy),this._overlayRef=this._overlay.create(t),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new UO({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t){this.menu.setPositionClasses&&t.positionChanges.subscribe(t=>{this.menu.setPositionClasses("start"===t.connectionPair.overlayX?"after":"before","top"===t.connectionPair.overlayY?"below":"above")})}_setPosition(t){let[e,n]="before"===this.menu.xPosition?["end","start"]:["start","end"],[r,i]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[o,s]=[r,i],[a,c]=[e,n],u=0;this.triggersSubmenu()?(c=e="before"===this.menu.xPosition?"start":"end",n=a="end"===e?"start":"end",u="bottom"===r?8:-8):this.menu.overlapTrigger||(o="top"===r?"bottom":"top",s="top"===i?"bottom":"top"),t.withPositions([{originX:e,originY:o,overlayX:a,overlayY:r,offsetY:u},{originX:n,originY:o,overlayX:c,overlayY:r,offsetY:u},{originX:e,originY:s,overlayX:a,overlayY:i,offsetY:-u},{originX:n,originY:s,overlayX:c,overlayY:i,offsetY:-u}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),e=this._overlayRef.detachments(),n=this._parentMaterialMenu?this._parentMaterialMenu.closed:Object(Ft.a)(),r=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(be(t=>t!==this._menuItemInstance),be(()=>this._menuOpen)):Object(Ft.a)();return Object(d_.a)(t,n,r,e)}_handleMousedown(t){Rv(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const e=t.keyCode;13!==e&&32!==e||(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===e&&"ltr"===this.dir||37===e&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(be(t=>t===this._menuItemInstance&&!t.disabled),wT(0,hO.b)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof MT&&this.menu._isAnimating?this.menu._animationDone.pipe(he(1),wT(0,hO.b),yO(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return this._portal&&this._portal.templateRef===this.menu.templateRef||(this._portal=new kO(this.menu.templateRef,this._viewContainerRef)),this._portal}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(aE),r.Kb(r.l),r.Kb(r.Q),r.Kb(LT),r.Kb(AT,8),r.Kb(jT,10),r.Kb(Hv,8),r.Kb(Mv))},t.\u0275dir=r.Fb({type:t,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:["aria-haspopup","true",1,"mat-menu-trigger"],hostVars:2,hostBindings:function(t,e){1&t&&r.Wb("mousedown",function(t){return e._handleMousedown(t)})("keydown",function(t){return e._handleKeydown(t)})("click",function(t){return e._handleClick(t)}),2&t&&r.Bb("aria-expanded",e.menuOpen||null)("aria-controls",e.menuOpen?e.menu.panelId:null)},inputs:{restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"],_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"]}),t})(),BT=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[VT],imports:[FS]}),t})(),zT=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[VT],imports:[[tt,FS,ZS,uE,BT],SO,FS,BT]}),t})();var HT=n("z6cu"),KT=n("w1tV");class WT{}class GT{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof GT?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new GT;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof GT?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class QT{encodeKey(t){return $T(t)}encodeValue(t){return $T(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function $T(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class YT{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new QT,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new YT({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function XT(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function ZT(t){return"undefined"!=typeof Blob&&t instanceof Blob}function JT(t){return"undefined"!=typeof FormData&&t instanceof FormData}class tI{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new GT),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new YT,this.urlWithParams=e}serializeBody(){return null===this.body?null:XT(this.body)||ZT(this.body)||JT(this.body)||"string"==typeof this.body?this.body:this.body instanceof YT?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||JT(this.body)?null:ZT(this.body)?this.body.type||null:XT(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof YT?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,c=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(c=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),c)),new tI(e,n,i,{params:c,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var eI=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class nI extends class{constructor(t,e=200,n="OK"){this.headers=t.headers||new GT,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(t={}){super(t),this.type=eI.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new nI({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}function rI(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let iI=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof tI)r=t;else{let i=void 0;i=n.headers instanceof GT?n.headers:new GT(n.headers);let o=void 0;n.params&&(o=n.params instanceof YT?n.params:new YT({fromObject:n.params})),r=new tI(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(Ft.a)(r).pipe(Ee(t=>this.handler.handle(t)));if(t instanceof tI||"events"===n.observe)return i;const o=i.pipe(be(t=>t instanceof nI));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(oe.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(oe.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(oe.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(oe.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new YT).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,rI(n,e))}post(t,e,n={}){return this.request("POST",t,rI(n,e))}put(t,e,n={}){return this.request("PUT",t,rI(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(WT))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const oI=["*"];function sI(t){return Error(`Unable to find icon with the name "${t}"`)}function aI(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function cI(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class uI{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}}let lI=(()=>{class t{constructor(t,e,n,r){this._httpClient=t,this._sanitizer=e,this._errorHandler=r,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=n}addSvgIcon(t,e,n){return this.addSvgIconInNamespace("",t,e,n)}addSvgIconLiteral(t,e,n){return this.addSvgIconLiteralInNamespace("",t,e,n)}addSvgIconInNamespace(t,e,n,r){return this._addSvgIconConfig(t,e,new uI(n,null,r))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,e,n,i){const o=this._sanitizer.sanitize(r.I.HTML,n);if(!o)throw cI(n);return this._addSvgIconConfig(t,e,new uI("",o,i))}addSvgIconSet(t,e){return this.addSvgIconSetInNamespace("",t,e)}addSvgIconSetLiteral(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}addSvgIconSetInNamespace(t,e,n){return this._addSvgIconSetConfig(t,new uI(e,null,n))}addSvgIconSetLiteralInNamespace(t,e,n){const i=this._sanitizer.sanitize(r.I.HTML,e);if(!i)throw cI(e);return this._addSvgIconSetConfig(t,new uI("",i,n))}registerFontClassAlias(t,e=t){return this._fontCssClassesByAlias.set(t,e),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const e=this._sanitizer.sanitize(r.I.RESOURCE_URL,t);if(!e)throw aI(t);const n=this._cachedIconsByUrl.get(e);return n?Object(Ft.a)(hI(n)):this._loadSvgIconFromConfig(new uI(t,null)).pipe(Object(Le.a)(t=>this._cachedIconsByUrl.set(e,t)),Object(oe.a)(t=>hI(t)))}getNamedSvgIcon(t,e=""){const n=dI(e,t);let r=this._svgIconConfigs.get(n);if(r)return this._getSvgFromConfig(r);if(r=this._getIconConfigFromResolvers(e,t),r)return this._svgIconConfigs.set(n,r),this._getSvgFromConfig(r);const i=this._iconSetConfigs.get(e);return i?this._getSvgFromIconSetConfigs(t,i):Object(HT.a)(sI(n))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Object(Ft.a)(hI(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Object(oe.a)(t=>hI(t)))}_getSvgFromIconSetConfigs(t,e){const n=this._extractIconWithNameFromAnySet(t,e);return n?Object(Ft.a)(n):Ux(e.filter(t=>!t.svgText).map(t=>this._loadSvgIconSetFromConfig(t).pipe(we(e=>{const n=this._sanitizer.sanitize(r.I.RESOURCE_URL,t.url);return this._errorHandler.handleError(new Error(`Loading icon set URL: ${n} failed: ${e.message}`)),Object(Ft.a)(null)})))).pipe(Object(oe.a)(()=>{const n=this._extractIconWithNameFromAnySet(t,e);if(!n)throw sI(t);return n}))}_extractIconWithNameFromAnySet(t,e){for(let n=e.length-1;n>=0;n--){const r=e[n];if(r.svgText&&r.svgText.indexOf(t)>-1){const e=this._svgElementFromConfig(r),n=this._extractSvgIconFromSet(e,t,r.options);if(n)return n}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Object(Le.a)(e=>t.svgText=e),Object(oe.a)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Object(Ft.a)(null):this._fetchIcon(t).pipe(Object(Le.a)(e=>t.svgText=e))}_extractSvgIconFromSet(t,e,n){const r=t.querySelector(`[id="${e}"]`);if(!r)return null;const i=r.cloneNode(!0);if(i.removeAttribute("id"),"svg"===i.nodeName.toLowerCase())return this._setSvgAttributes(i,n);if("symbol"===i.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(i),n);const o=this._svgElementFromString("<svg></svg>");return o.appendChild(i),this._setSvgAttributes(o,n)}_svgElementFromString(t){const e=this._document.createElement("DIV");e.innerHTML=t;const n=e.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(t){const e=this._svgElementFromString("<svg></svg>"),n=t.attributes;for(let r=0;r<n.length;r++){const{name:t,value:i}=n[r];"id"!==t&&e.setAttribute(t,i)}for(let r=0;r<t.childNodes.length;r++)t.childNodes[r].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[r].cloneNode(!0));return e}_setSvgAttributes(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}_fetchIcon(t){var e;const{url:n,options:i}=t,o=null!==(e=null==i?void 0:i.withCredentials)&&void 0!==e&&e;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const s=this._sanitizer.sanitize(r.I.RESOURCE_URL,n);if(!s)throw aI(n);const a=this._inProgressUrlFetches.get(s);if(a)return a;const c=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(qe(()=>this._inProgressUrlFetches.delete(s)),Object(KT.a)());return this._inProgressUrlFetches.set(s,c),c}_addSvgIconConfig(t,e,n){return this._svgIconConfigs.set(dI(t,e),n),this}_addSvgIconSetConfig(t,e){const n=this._iconSetConfigs.get(t);return n?n.push(e):this._iconSetConfigs.set(t,[e]),this}_svgElementFromConfig(t){if(!t.svgElement){const e=this._svgElementFromString(t.svgText);this._setSvgAttributes(e,t.options),t.svgElement=e}return t.svgElement}_getIconConfigFromResolvers(t,e){for(let r=0;r<this._resolvers.length;r++){const i=this._resolvers[r](e,t);if(i)return(n=i).url&&n.options?new uI(i.url,null,i.options):new uI(i,null)}var n}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(iI,8),r.Tb(At),r.Tb(a,8),r.Tb(r.m))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(iI,8),Object(r.Tb)(At),Object(r.Tb)(a,8),Object(r.Tb)(r.m))},token:t,providedIn:"root"}),t})();function hI(t){return t.cloneNode(!0)}function dI(t,e){return t+":"+e}class fI{constructor(t){this._elementRef=t}}const pI=VS(fI),mI=new r.q("mat-icon-location",{providedIn:"root",factory:function(){const t=Object(r.V)(a),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),gI=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],yI=gI.map(t=>`[${t}]`).join(", "),bI=/^url\(['"]?#(.*?)['"]?\)$/;let _I=(()=>{class t extends pI{constructor(t,e,n,r,i){super(t),this._iconRegistry=e,this._location=r,this._errorHandler=i,this._inline=!1,this._currentIconFetch=Ve.a.EMPTY,n||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=$_(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const e=this._cleanupFontValue(t);e!==this._fontSet&&(this._fontSet=e,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const e=this._cleanupFontValue(t);e!==this._fontIcon&&(this._fontIcon=e,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const e=t.querySelectorAll("style");for(let r=0;r<e.length;r++)e[r].textContent+=" ";const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){const n=t.childNodes[e];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||t.removeChild(n)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();e!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),e&&t.classList.add(e),this._previousFontSetClass=e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const e=this._elementsWithExternalReferences;e&&e.forEach((e,n)=>{e.forEach(e=>{n.setAttribute(e.name,`url('${t}#${e.value}')`)})})}_cacheChildrenWithExternalReferences(t){const e=t.querySelectorAll(yI),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let r=0;r<e.length;r++)gI.forEach(t=>{const i=e[r],o=i.getAttribute(t),s=o?o.match(bI):null;if(s){let e=n.get(i);e||(e=[],n.set(i,e)),e.push({name:t,value:s[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[e,n]=this._splitIconName(t);e&&(this._svgNamespace=e),n&&(this._svgName=n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(n,e).pipe(he(1)).subscribe(t=>this._setSvgElement(t),t=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${e}:${n}! ${t.message}`))})}}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(lI),r.Ub("aria-hidden"),r.Kb(mI),r.Kb(r.m))},t.\u0275cmp=r.Eb({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,e){2&t&&(r.Bb("data-mat-icon-type",e._usingFontIcon()?"font":"svg")("data-mat-icon-name",e._svgName||e.fontIcon)("data-mat-icon-namespace",e._svgNamespace||e.fontSet),r.Cb("mat-icon-inline",e.inline)("mat-icon-no-color","primary"!==e.color&&"accent"!==e.color&&"warn"!==e.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[r.xb],ngContentSelectors:oI,decls:1,vars:0,template:function(t,e){1&t&&(r.fc(),r.ec(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),t})(),vI=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},imports:[[FS],FS]}),t})();function wI(t,e){if(1&t){const t=r.Qb();r.Pb(0,"button",5),r.Wb("click",function(){return r.mc(t),r.ac().deleteRoom()}),r.vc(1," Delete Room "),r.Ob()}}function CI(t,e){if(1&t){const t=r.Qb();r.Pb(0,"button",6),r.Wb("click",function(){return r.mc(t),r.ac().exitRooom()}),r.vc(1," Exit Room "),r.Ob()}}function SI(t,e){if(1&t&&(r.Pb(0,"button",14),r.Pb(1,"mat-icon",13),r.vc(2,"more_vert"),r.Ob(),r.Ob()),2&t){r.ac();const t=r.jc(4);r.gc("matMenuTriggerFor",t)}}function OI(t,e){if(1&t){const t=r.Qb();r.Pb(0,"mat-chip"),r.vc(1),r.uc(2,SI,3,1,"button",10),r.Pb(3,"mat-menu",null,11),r.Pb(5,"button",12),r.Wb("click",function(){r.mc(t);const n=e.$implicit;return r.ac(2).makeManager(n.name)}),r.Pb(6,"mat-icon",13),r.vc(7,"gavel"),r.Ob(),r.Pb(8,"span"),r.vc(9,"Make Manager"),r.Ob(),r.Ob(),r.Pb(10,"button",12),r.Wb("click",function(){r.mc(t);const n=e.$implicit;return r.ac(2).removeUser(n.name)}),r.Pb(11,"mat-icon",13),r.vc(12,"delete_forever"),r.Ob(),r.Pb(13,"span"),r.vc(14,"Remove User"),r.Ob(),r.Ob(),r.Ob(),r.Ob()}if(2&t){const t=e.$implicit,n=r.ac(2);r.Ab(1),r.xc(" ",t.name," "),r.Ab(1),r.gc("ngIf",n.isManager),r.Ab(3),r.gc("disabled",t.isManager),r.Ab(5),r.gc("disabled",t.isManager)}}function EI(t,e){if(1&t&&(r.Pb(0,"div",7),r.Pb(1,"div"),r.vc(2,"Observers:"),r.Ob(),r.Pb(3,"mat-chip-list",8),r.uc(4,OI,15,4,"mat-chip",9),r.Ob(),r.Ob()),2&t){const t=r.ac();r.Ab(4),r.gc("ngForOf",t.users)}}let xI=(()=>{class t{constructor(t,e,n){this._bottomSheetRef=t,this.pokerService=e,this._snackBar=n,this.roomKey="Loading Room Details...",this.isManager=!1,this.users=[],this.horizontalPosition="center",this.verticalPosition="top"}ngOnInit(){this.roomKey=this.pokerService.roomKey,this.isManager=this.pokerService.isManager,this.pokerService.pokerRoom.subscribe(t=>{this.users=t.users.filter(t=>t.willNotVote)})}deleteRoom(){this.pokerService.deleteDocAndExit()}exitRooom(){this.pokerService.exitRooom()}makeManager(t){const e=this.users.find(e=>e.name===t);e&&(e.isManager=!0,this.pokerService.updateUser(e))}removeUser(t){this.pokerService.removeUser(t)}openSnackBar(){this._snackBar.openFromComponent(lO,{duration:1e3,panelClass:"toast-class",horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(kE),r.Kb(z_),r.Kb(QE))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-room-data"]],decls:9,vars:5,consts:[[1,"sheet"],["mat-raised-button","",1,"copy-key",3,"cdkCopyToClipboard","click"],["mat-raised-button","","color","warn","matTooltip","Delete the Room and exit","class","delete",3,"click",4,"ngIf"],["mat-raised-button","","color","warn","class","delete",3,"click",4,"ngIf"],["class","observers",4,"ngIf"],["mat-raised-button","","color","warn","matTooltip","Delete the Room and exit",1,"delete",3,"click"],["mat-raised-button","","color","warn",1,"delete",3,"click"],[1,"observers"],["aria-label","list of observers"],[4,"ngFor","ngForOf"],["mat-icon-button","","aria-label","More options Menu",3,"matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click"],[1,"icon-class"],["mat-icon-button","","aria-label","More options Menu",3,"matMenuTriggerFor"]],template:function(t,e){1&t&&(r.Pb(0,"div"),r.Pb(1,"div",0),r.Pb(2,"h1"),r.vc(3),r.Ob(),r.Pb(4,"button",1),r.Wb("click",function(){return e.openSnackBar()}),r.vc(5," Copy Key "),r.Ob(),r.uc(6,wI,2,0,"button",2),r.uc(7,CI,2,0,"button",3),r.Ob(),r.uc(8,EI,5,1,"div",4),r.Ob()),2&t&&(r.Ab(3),r.xc("Room Key: ",e.roomKey,""),r.Ab(1),r.gc("cdkCopyToClipboard",e.roomKey),r.Ab(2),r.gc("ngIf",e.isManager),r.Ab(1),r.gc("ngIf",!e.isManager),r.Ab(1),r.gc("ngIf",e.users.length>0))},directives:[NE,ZE,q,ox,yT,L,hT,FT,jT,_I,UT],styles:[".sheet[_ngcontent-%COMP%]{display:flex}.sheet[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{flex:3;align-self:center;margin-right:5%}.sheet[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:2;align-self:flex-end;max-width:100px;left:18%;display:flex;align-self:baseline}.observers[_ngcontent-%COMP%]{width:50%}.icon-class[_ngcontent-%COMP%]{font-size:18px}.copy-key[_ngcontent-%COMP%]{background-color:rgba(63,63,100,.315)}.copy-key[_ngcontent-%COMP%], .delete[_ngcontent-%COMP%]{margin-left:32px;float:left;position:inherit}"]}),t})();const kI=cv({passive:!0});let TI=(()=>{class t{constructor(t,e){this._platform=t,this._ngZone=e,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return re.a;const e=J_(t),n=this._monitoredElements.get(e);if(n)return n.subject;const r=new Lt.a,i="cdk-text-field-autofilled",o=t=>{"cdk-text-field-autofill-start"!==t.animationName||e.classList.contains(i)?"cdk-text-field-autofill-end"===t.animationName&&e.classList.contains(i)&&(e.classList.remove(i),this._ngZone.run(()=>r.next({target:t.target,isAutofilled:!1}))):(e.classList.add(i),this._ngZone.run(()=>r.next({target:t.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{e.addEventListener("animationstart",o,kI),e.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(e,{subject:r,unlisten:()=>{e.removeEventListener("animationstart",o,kI)}}),r}stopMonitoring(t){const e=J_(t),n=this._monitoredElements.get(e);n&&(n.unlisten(),n.subject.complete(),e.classList.remove("cdk-text-field-autofill-monitored"),e.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(e))}ngOnDestroy(){this._monitoredElements.forEach((t,e)=>this.stopMonitoring(e))}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(ev),r.Tb(r.z))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(ev),Object(r.Tb)(r.z))},token:t,providedIn:"root"}),t})(),II=(()=>{class t{constructor(t,e,n,r){this._elementRef=t,this._platform=e,this._ngZone=n,this._destroyed=new Lt.a,this._enabled=!0,this._previousMinRows=-1,this._document=r,this._textareaElement=this._elementRef.nativeElement,this._measuringClass=e.FIREFOX?"cdk-textarea-autosize-measuring-firefox":"cdk-textarea-autosize-measuring"}get minRows(){return this._minRows}set minRows(t){this._minRows=Y_(t),this._setMinHeight()}get maxRows(){return this._maxRows}set maxRows(t){this._maxRows=Y_(t),this._setMaxHeight()}get enabled(){return this._enabled}set enabled(t){t=$_(t),this._enabled!==t&&((this._enabled=t)?this.resizeToFitContent(!0):this.reset())}_setMinHeight(){const t=this.minRows&&this._cachedLineHeight?this.minRows*this._cachedLineHeight+"px":null;t&&(this._textareaElement.style.minHeight=t)}_setMaxHeight(){const t=this.maxRows&&this._cachedLineHeight?this.maxRows*this._cachedLineHeight+"px":null;t&&(this._textareaElement.style.maxHeight=t)}ngAfterViewInit(){this._platform.isBrowser&&(this._initialHeight=this._textareaElement.style.height,this.resizeToFitContent(),this._ngZone.runOutsideAngular(()=>{tO(this._getWindow(),"resize").pipe(gO(16),yO(this._destroyed)).subscribe(()=>this.resizeToFitContent(!0))}))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_cacheTextareaLineHeight(){if(this._cachedLineHeight)return;let t=this._textareaElement.cloneNode(!1);t.rows=1,t.style.position="absolute",t.style.visibility="hidden",t.style.border="none",t.style.padding="0",t.style.height="",t.style.minHeight="",t.style.maxHeight="",t.style.overflow="hidden",this._textareaElement.parentNode.appendChild(t),this._cachedLineHeight=t.clientHeight,this._textareaElement.parentNode.removeChild(t),this._setMinHeight(),this._setMaxHeight()}ngDoCheck(){this._platform.isBrowser&&this.resizeToFitContent()}resizeToFitContent(t=!1){if(!this._enabled)return;if(this._cacheTextareaLineHeight(),!this._cachedLineHeight)return;const e=this._elementRef.nativeElement,n=e.value;if(!t&&this._minRows===this._previousMinRows&&n===this._previousValue)return;const r=e.placeholder;e.classList.add(this._measuringClass),e.placeholder="",e.style.height=e.scrollHeight-4+"px",e.classList.remove(this._measuringClass),e.placeholder=r,this._ngZone.runOutsideAngular(()=>{"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(()=>this._scrollToCaretPosition(e)):setTimeout(()=>this._scrollToCaretPosition(e))}),this._previousValue=n,this._previousMinRows=this._minRows}reset(){void 0!==this._initialHeight&&(this._textareaElement.style.height=this._initialHeight)}_noopInputHandler(){}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_scrollToCaretPosition(t){const{selectionStart:e,selectionEnd:n}=t,r=this._getDocument();this._destroyed.isStopped||r.activeElement!==t||t.setSelectionRange(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(ev),r.Kb(r.z),r.Kb(a,8))},t.\u0275dir=r.Fb({type:t,selectors:[["textarea","cdkTextareaAutosize",""]],hostAttrs:["rows","1",1,"cdk-textarea-autosize"],hostBindings:function(t,e){1&t&&r.Wb("input",function(){return e._noopInputHandler()})},inputs:{minRows:["cdkAutosizeMinRows","minRows"],maxRows:["cdkAutosizeMaxRows","maxRows"],enabled:["cdkTextareaAutosize","enabled"]},exportAs:["cdkTextareaAutosize"]}),t})(),AI=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},imports:[[nv]]}),t})();const PI=new r.q("MAT_INPUT_VALUE_ACCESSOR"),RI=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let jI=0;class DI{constructor(t,e,n,r){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=r}}const NI=BS(DI);let MI=(()=>{class t extends NI{constructor(t,e,n,r,i,o,s,a,c,u){super(o,r,i,n),this._elementRef=t,this._platform=e,this.ngControl=n,this._autofillMonitor=a,this._formField=u,this._uid="mat-input-"+jI++,this.focused=!1,this.stateChanges=new Lt.a,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(t=>iv().has(t));const l=this._elementRef.nativeElement,h=l.nodeName.toLowerCase();this._inputValueAccessor=s||l,this._previousNativeValue=this.value,this.id=this.id,e.IOS&&c.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",t=>{let e=t.target;e.value||e.selectionStart||e.selectionEnd||(e.setSelectionRange(1,1),e.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===h,this._isTextarea="textarea"===h,this._isNativeSelect&&(this.controlType=l.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=$_(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required}set required(t){this._required=$_(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&iv().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=$_(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t===this.focused||this.readonly&&t||(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t,e;const n=(null===(e=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===e?void 0:e.call(t))?null:this.placeholder;if(n!==this._previousPlaceholder){const t=this._elementRef.nativeElement;this._previousPlaceholder=n,n?t.setAttribute("placeholder",n):t.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){RI.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,e=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&e&&e.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(ev),r.Kb(pk,10),r.Kb(Xk,8),r.Kb(nT,8),r.Kb(zS),r.Kb(PI,10),r.Kb(TI),r.Kb(r.z),r.Kb(Fx,8))},t.\u0275dir=r.Fb({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:9,hostBindings:function(t,e){1&t&&r.Wb("focus",function(){return e._focusChanged(!0)})("blur",function(){return e._focusChanged(!1)})("input",function(){return e._onInput()}),2&t&&(r.Sb("disabled",e.disabled)("required",e.required),r.Bb("id",e.id)("data-placeholder",e.placeholder)("readonly",e.readonly&&!e._isNativeSelect||null)("aria-invalid",e.errorState&&!e.empty)("aria-required",e.required),r.Cb("mat-input-server",e._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[r.zb([{provide:kx,useExisting:t}]),r.xb,r.yb]}),t})(),FI=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[zS],imports:[[AI,Vx,FS],AI,Vx]}),t})();const LI=["input"],VI=function(){return{enterDuration:150}},qI=["*"],UI=new r.q("mat-checkbox-default-options",{providedIn:"root",factory:BI});function BI(){return{color:"accent",clickAction:"check-indeterminate"}}let zI=0;const HI=BI(),KI={provide:zx,useExisting:Object(r.U)(()=>$I),multi:!0};class WI{}class GI{constructor(t){this._elementRef=t}}const QI=US(VS(qS(LS(GI))));let $I=(()=>{class t extends QI{constructor(t,e,n,i,o,s,a){super(t),this._changeDetectorRef=e,this._focusMonitor=n,this._ngZone=i,this._animationMode=s,this._options=a,this.ariaLabel="",this.ariaLabelledby=null,this._uniqueId="mat-checkbox-"+ ++zI,this.id=this._uniqueId,this.labelPosition="after",this.name=null,this.change=new r.n,this.indeterminateChange=new r.n,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||HI,this.color=this.defaultColor=this._options.color||HI.color,this.tabIndex=parseInt(o)||0}get inputId(){return(this.id||this._uniqueId)+"-input"}get required(){return this._required}set required(t){this._required=$_(t)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{t||Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}),this._syncIndeterminate(this._indeterminate)}ngAfterViewChecked(){}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}get checked(){return this._checked}set checked(t){t!=this.checked&&(this._checked=t,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){const e=$_(t);e!==this.disabled&&(this._disabled=e,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(t){const e=t!=this._indeterminate;this._indeterminate=$_(t),e&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(t){this.checked=!!t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(t){let e=this._currentCheckState,n=this._elementRef.nativeElement;if(e!==t&&(this._currentAnimationClass.length>0&&n.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(e,t),this._currentCheckState=t,this._currentAnimationClass.length>0)){n.classList.add(this._currentAnimationClass);const t=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{n.classList.remove(t)},1e3)})}}_emitChangeEvent(){const t=new WI;t.source=this,t.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(t),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked}_onInputClick(t){var e;const n=null===(e=this._options)||void 0===e?void 0:e.clickAction;t.stopPropagation(),this.disabled||"noop"===n?this.disabled||"noop"!==n||(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==n&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this.toggle(),this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}focus(t,e){t?this._focusMonitor.focusVia(this._inputElement,t,e):this._inputElement.nativeElement.focus(e)}_onInteractionEvent(t){t.stopPropagation()}_getAnimationClassForCheckStateTransition(t,e){if("NoopAnimations"===this._animationMode)return"";let n="";switch(t){case 0:if(1===e)n="unchecked-checked";else{if(3!=e)return"";n="unchecked-indeterminate"}break;case 2:n=1===e?"unchecked-checked":"unchecked-indeterminate";break;case 1:n=2===e?"checked-unchecked":"checked-indeterminate";break;case 3:n=1===e?"indeterminate-checked":"indeterminate-unchecked"}return"mat-checkbox-anim-"+n}_syncIndeterminate(t){const e=this._inputElement;e&&(e.nativeElement.indeterminate=t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(r.h),r.Kb(Mv),r.Kb(r.z),r.Ub("tabindex"),r.Kb(IS,8),r.Kb(UI,8))},t.\u0275cmp=r.Eb({type:t,selectors:[["mat-checkbox"]],viewQuery:function(t,e){if(1&t&&(r.yc(LI,!0),r.yc(XS,!0)),2&t){let t;r.ic(t=r.Xb())&&(e._inputElement=t.first),r.ic(t=r.Xb())&&(e.ripple=t.first)}},hostAttrs:[1,"mat-checkbox"],hostVars:12,hostBindings:function(t,e){2&t&&(r.Sb("id",e.id),r.Bb("tabindex",null),r.Cb("mat-checkbox-indeterminate",e.indeterminate)("mat-checkbox-checked",e.checked)("mat-checkbox-disabled",e.disabled)("mat-checkbox-label-before","before"==e.labelPosition)("_mat-animation-noopable","NoopAnimations"===e._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",labelPosition:"labelPosition",name:"name",required:"required",checked:"checked",disabled:"disabled",indeterminate:"indeterminate",ariaDescribedby:["aria-describedby","ariaDescribedby"],value:"value"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[r.zb([KI]),r.xb],ngContentSelectors:qI,decls:17,vars:20,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24",0,"xml","space","preserve",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(t,e){if(1&t&&(r.fc(),r.Pb(0,"label",0,1),r.Pb(2,"span",2),r.Pb(3,"input",3,4),r.Wb("change",function(t){return e._onInteractionEvent(t)})("click",function(t){return e._onInputClick(t)}),r.Ob(),r.Pb(5,"span",5),r.Lb(6,"span",6),r.Ob(),r.Lb(7,"span",7),r.Pb(8,"span",8),r.Zb(),r.Pb(9,"svg",9),r.Lb(10,"path",10),r.Ob(),r.Yb(),r.Lb(11,"span",11),r.Ob(),r.Ob(),r.Pb(12,"span",12,13),r.Wb("cdkObserveContent",function(){return e._onLabelTextChange()}),r.Pb(14,"span",14),r.vc(15,"\xa0"),r.Ob(),r.ec(16),r.Ob(),r.Ob()),2&t){const t=r.jc(1),n=r.jc(13);r.Bb("for",e.inputId),r.Ab(2),r.Cb("mat-checkbox-inner-container-no-side-margin",!n.textContent||!n.textContent.trim()),r.Ab(1),r.gc("id",e.inputId)("required",e.required)("checked",e.checked)("disabled",e.disabled)("tabIndex",e.tabIndex),r.Bb("value",e.value)("name",e.name)("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby)("aria-checked",e._getAriaChecked())("aria-describedby",e.ariaDescribedby),r.Ab(2),r.gc("matRippleTrigger",t)("matRippleDisabled",e._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",r.hc(19,VI))}},directives:[XS,dv],styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:transparent}._mat-animation-noopable.mat-checkbox{transition:none;animation:none}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox-layout{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-frame{border-style:dotted}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}\n"],encapsulation:2,changeDetection:0}),t})(),YI=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)}}),t})(),XI=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},imports:[[ZS,FS,fv,YI],FS,YI]}),t})();const ZI=["*",[["mat-card-footer"]]],JI=["*","mat-card-footer"];let tA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),t})(),eA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),t})(),nA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),t})(),rA=(()=>{class t{constructor(){this.align="start"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,e){2&t&&r.Cb("mat-card-actions-align-end","end"===e.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),t})(),iA=(()=>{class t{constructor(t){this._animationMode=t}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(IS,8))},t.\u0275cmp=r.Eb({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,e){2&t&&r.Cb("_mat-animation-noopable","NoopAnimations"===e._animationMode)},exportAs:["matCard"],ngContentSelectors:JI,decls:2,vars:0,template:function(t,e){1&t&&(r.fc(ZI),r.ec(0),r.ec(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),t})(),oA=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},imports:[[FS],FS]}),t})();function sA(t,e){if(1&t){const t=r.Qb();r.Pb(0,"div",4),r.Pb(1,"mat-form-field",5),r.Pb(2,"mat-label"),r.vc(3,"Enter Your Name to Proceed"),r.Ob(),r.Lb(4,"input",6,7),r.Ob(),r.Pb(6,"mat-checkbox",8),r.Wb("ngModelChange",function(e){return r.mc(t),r.ac().checked=e}),r.vc(7,"I will not vote"),r.Ob(),r.Pb(8,"button",9),r.Wb("click",function(){r.mc(t);const e=r.jc(5);return r.ac().addUser(e.value)}),r.vc(9,"Submit"),r.Ob(),r.Ob()}if(2&t){const t=r.ac();r.Ab(6),r.gc("ngModel",t.checked)}}function aA(t,e){if(1&t){const t=r.Qb();r.Pb(0,"mat-card",25),r.Pb(1,"mat-card-title",26),r.vc(2),r.Ob(),r.Pb(3,"mat-card-content",27),r.vc(4),r.Ob(),r.Pb(5,"mat-card-actions",28),r.Pb(6,"button",29),r.Wb("click",function(){r.mc(t);const e=r.ac().$implicit;return r.ac(2).makeManager(e.name)}),r.vc(7," Make Manager "),r.Ob(),r.Pb(8,"button",30),r.Wb("click",function(){r.mc(t);const e=r.ac().$implicit;return r.ac(2).removeUser(e.name)}),r.vc(9,"Remove"),r.Ob(),r.Ob(),r.Ob()}if(2&t){const t=r.ac().$implicit,e=r.ac(2);r.gc("ngClass",t.hasVoted?"voter-cards voter-card-green":"voter-cards voter-card-red"),r.Ab(2),r.wc(t.name),r.Ab(2),r.wc(e.displayPoints?t.point:"*"),r.Ab(2),r.gc("disabled",!e.isManager||t.isManager),r.Ab(2),r.gc("disabled",!e.isManager||t.isManager)}}function cA(t,e){if(1&t&&(r.Pb(0,"div",23),r.uc(1,aA,10,5,"mat-card",24),r.Ob()),2&t){const t=e.$implicit;r.Ab(1),r.gc("ngIf",!t.willNotVote)}}function uA(t,e){1&t&&(r.Pb(0,"div",31),r.vc(1,"Waiting for others to join.."),r.Ob())}function lA(t,e){if(1&t&&(r.Pb(0,"mat-card",32),r.Pb(1,"mat-card-subtitle"),r.vc(2,"Avg Points"),r.Ob(),r.Pb(3,"mat-card-content",33),r.vc(4),r.bc(5,"number"),r.Ob(),r.Ob()),2&t){const t=r.ac(2);r.gc("matTooltipShowDelay",t.tipDelay),r.Ab(4),r.wc(r.dc(5,2,t.avgVotes,"1.1-1"))}}function hA(t,e){if(1&t){const t=r.Qb();r.Pb(0,"mat-card",34),r.Wb("click",function(){r.mc(t);const n=e.$implicit;return r.ac(2).selectPoint(n)}),r.Pb(1,"mat-card-content",35),r.vc(2),r.Ob(),r.Ob()}if(2&t){const t=e.$implicit,n=r.ac(2);r.gc("matTooltipShowDelay",n.tipDelay)("ngClass",t==n.selectedPoint?"point-cards point-cards-selected":"point-cards"),r.Ab(2),r.wc(t)}}function dA(t,e){if(1&t){const t=r.Qb();r.Pb(0,"div",10),r.Pb(1,"div",11),r.Pb(2,"mat-form-field",12),r.Pb(3,"mat-label"),r.vc(4,"Story:"),r.Ob(),r.Pb(5,"textarea",13,14),r.Wb("change",function(){r.mc(t);const e=r.jc(6);return r.ac().updateStory(e.value)})("keypress",function(){r.mc(t);const e=r.jc(6);return r.ac().updateStory(e.value)}),r.Ob(),r.Ob(),r.Pb(7,"button",15),r.Wb("click",function(){return r.mc(t),r.ac().nextStory()}),r.vc(8," Next Story "),r.Ob(),r.Ob(),r.Pb(9,"div",16),r.Pb(10,"button",17),r.Wb("click",function(){return r.mc(t),r.ac().showPoints()}),r.vc(11," Show Votes "),r.Ob(),r.uc(12,cA,2,1,"div",18),r.uc(13,uA,2,0,"div",19),r.uc(14,lA,6,5,"mat-card",20),r.Ob(),r.Pb(15,"div",21),r.uc(16,hA,3,3,"mat-card",22),r.Ob(),r.Ob()}if(2&t){const t=r.ac();r.Ab(5),r.gc("readonly",!t.isManager)("disabled",!t.isManager)("value",t.storyText),r.Ab(2),r.gc("disabled",!t.isManager),r.Ab(3),r.gc("disabled",!t.isManager),r.Ab(2),r.gc("ngForOf",t.users),r.Ab(1),r.gc("ngIf",t.showWaitingMsg),r.Ab(1),r.gc("ngIf",t.displayPoints),r.Ab(2),r.gc("ngForOf",t.allowedPoints)}}let fA=(()=>{class t{constructor(t,e,n,r){this.firestore=t,this.cd=e,this.pokerService=n,this._bottomSheet=r,this.sessionId="",this.sessionDocument={},this.displayPoints=!1,this.users=[],this.defaultUser=[],this.allowedPoints=[0,1,2,3,5,8,13],this.userName="",this.isManager=!1,this.hasUserDetails=!1,this.selectedPoint=-1,this.storyText="",this.tipDelay=1e3,this.checked=!1,this.showWaitingMsg=!1,this.avgVotes=0}showRoomData(){this._bottomSheet.open(xI,{ariaLabel:"Room Info",panelClass:"bottomSheet"})}ngOnInit(){const t=localStorage.getItem("userName");t&&t.length>0&&(this.userName=t,this.hasUserDetails=!0);try{this.pokerService.pokerRoom.subscribe(t=>{if(t){this.storyText=t.story,this.users=t.users,this.displayPoints=t.showVotes;const e=this.users.find(t=>t.name===this.userName);this.showWaitingMsg=this.users.length===this.users.filter(t=>t.willNotVote).length,e&&(this.selectedPoint=e.point,this.isManager=1===this.users.length||e.isManager,this.pokerService.isManager=this.isManager,this.cd.detectChanges()),this.cd.detectChanges()}else alert("Room Closed"),this.exitToMainPage()},t=>{alert("Room Closed"),this.exitToMainPage()})}catch(e){alert("Room Closed"),this.exitToMainPage()}}updatePoints(t,e){const n=this.users.find(e=>e.name===t);n&&(n.point=e,n.hasVoted=!0,this.pokerService.updateUser(n))}makeManager(t){const e=this.users.find(e=>e.name===t);e&&(e.isManager=!0,this.pokerService.updateUser(e))}addUser(t){const e=t.trim();if(e.length<1)return void alert("Please Enter a Valid Name");if(this.users.find(t=>t.name===e))return void alert("Please Enter an Unique Name");const n={name:e,hasVoted:!1,point:0,isManager:this.pokerService.isManager,willNotVote:this.checked};this.users.push(n),this.pokerService.updateUser(n),this.userName=e,this.hasUserDetails=!0,this.isManager=this.pokerService.isManager,localStorage.setItem("userName",this.userName)}showPoints(){var t=0,e=0;this.users.forEach(n=>{n.hasVoted&&n.point>0&&(t+=n.point,e++)}),this.avgVotes=t>0&&e>0?t/e:0,this.displayPoints=!0,this.pokerService.updateRoom({story:this.storyText,users:this.users,showVotes:this.displayPoints})}selectPoint(t){this.displayPoints?alert("Cannot Change points after flipping cards"):(this.selectedPoint=t,this.updatePoints(this.userName,this.selectedPoint),this.cd.detectChanges())}isSelected(t){return this.hasUserDetails?t==this.selectedPoint?"card point isSelected":"card point":"card disabled"}exitToMainPage(){this.pokerService.deleteDocAndExit()}nextStory(){this.displayPoints=!1,this.users.forEach(t=>{t.hasVoted=!1,t.point=0}),this.selectedPoint=-1,this.storyText="",this.pokerService.updateRoom({story:this.storyText,users:this.users,showVotes:!1}),this.pokerService.resetUsers()}updateStory(t){this.storyText=t,this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.pokerService.updateRoom({story:this.storyText,users:this.users,showVotes:this.displayPoints})},1e3)}getCardClasses(t){return t.willNotVote?"observer-card":t.hasVoted?"voter-cards voter-card-green":"voter-cards voter-card-red"}removeUser(t){this.pokerService.removeUser(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(B_),r.Kb(r.h),r.Kb(z_),r.Kb(IE))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-poker-room"]],inputs:{sessionId:"sessionId"},decls:7,vars:2,consts:[["mat-raised-button","","matTooltip","Display Room Info",1,"room-options-btn",3,"click"],["mat-mini-fab","",1,"info-icon"],["class","user-details-div",4,"ngIf"],["class","poker-room",4,"ngIf"],[1,"user-details-div"],["appearance","fill"],["matInput","","placeholder","Enter Your name"],["name",""],["color","primary",1,"checkbox",3,"ngModel","ngModelChange"],["mat-raised-button","",3,"click"],[1,"poker-room"],[1,"story-section"],[1,"story-input"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5",3,"readonly","disabled","value","change","keypress"],["story",""],["mat-raised-button","",1,"next-story-btn",3,"disabled","click"],[1,"voters-section"],["mat-raised-button","",1,"show-votes-btn",3,"disabled","click"],["class","voter-div",4,"ngFor","ngForOf"],["class","waiting-txt",4,"ngIf"],["matTooltip","Avergae of all valid Votes","class","point-cards floating",3,"matTooltipShowDelay",4,"ngIf"],[1,"points-section"],["matTooltip","Click To Vote",3,"matTooltipShowDelay","ngClass","click",4,"ngFor","ngForOf"],[1,"voter-div"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"voter-name"],[1,"voter-points"],[1,"voter-card-actions"],["mat-raised-button","",3,"disabled","click"],["mat-raised-button","","color","warn",3,"disabled","click"],[1,"waiting-txt"],["matTooltip","Avergae of all valid Votes",1,"point-cards","floating",3,"matTooltipShowDelay"],[1,"avg-point"],["matTooltip","Click To Vote",3,"matTooltipShowDelay","ngClass","click"],[1,"point-value"]],template:function(t,e){1&t&&(r.Pb(0,"button",0),r.Wb("click",function(){return e.showRoomData()}),r.vc(1,"Room info\n"),r.Pb(2,"button",1),r.Pb(3,"mat-icon"),r.vc(4,"info"),r.Ob(),r.Ob(),r.Ob(),r.uc(5,sA,10,1,"div",2),r.uc(6,dA,17,9,"div",3)),2&t&&(r.Ab(5),r.gc("ngIf",!e.hasUserDetails),r.Ab(1),r.gc("ngIf",e.hasUserDetails))},directives:[NE,ox,_I,q,Lx,Ix,MI,$I,mk,tT,II,L,iA,M,eA,tA,rA,nA],pipes:[J],styles:[".user-details-div[_ngcontent-%COMP%]{top:25%;position:absolute;padding:10% 15%;background-color:rgba(170,185,190,.082);box-shadow:3px 6px 7px 3px #4b4646;display:flex;flex-direction:column;justify-content:center;align-content:center;height:50%;width:75%;max-height:300px;box-sizing:border-box}.user-details-div[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-bottom:16px}.room-options-btn[_ngcontent-%COMP%]{width:auto;padding:4px 8px;text-align:center;position:fixed;right:2%;bottom:2%;background-color:rgba(183,183,190,.315);box-shadow:3px 6px 7px -3px #615b5b}.room-options-btn[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{background-color:rgba(63,63,100,.315)}.poker-room[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:90%}.poker-room[_ngcontent-%COMP%]   .story-section[_ngcontent-%COMP%]{flex:20%;display:flex;box-shadow:3px 6px 7px 3px #ccc;padding:2%}.poker-room[_ngcontent-%COMP%]   .story-section[_ngcontent-%COMP%]   .story-input[_ngcontent-%COMP%]{align-self:center;flex:85%;font-size:24px;margin-right:2%}.poker-room[_ngcontent-%COMP%]   .story-section[_ngcontent-%COMP%]   .next-story-btn[_ngcontent-%COMP%]{height:35%;align-self:center;background-color:rgba(242,243,246,.281)}.poker-room[_ngcontent-%COMP%]   .story-section[_ngcontent-%COMP%]   .next-story-btn[_ngcontent-%COMP%]:hover{background-color:rgba(212,215,225,.281)}.poker-room[_ngcontent-%COMP%]   .voters-section[_ngcontent-%COMP%]{flex:60%;display:flex;flex-direction:row;flex-wrap:wrap;box-shadow:3px 6px 7px 3px #ccc;padding:2%;justify-content:center}.poker-room[_ngcontent-%COMP%]   .voters-section[_ngcontent-%COMP%]   .show-votes-btn[_ngcontent-%COMP%]{left:3%;top:50%}.poker-room[_ngcontent-%COMP%]   .voters-section[_ngcontent-%COMP%]   .floating[_ngcontent-%COMP%], .poker-room[_ngcontent-%COMP%]   .voters-section[_ngcontent-%COMP%]   .show-votes-btn[_ngcontent-%COMP%]{position:fixed;background-color:rgba(135,222,142,.349);box-shadow:3px 6px 7px -3px #615b5b}.poker-room[_ngcontent-%COMP%]   .voters-section[_ngcontent-%COMP%]   .floating[_ngcontent-%COMP%]{right:3%;top:40%;padding:16px 16px 32px;z-index:1;transition:all .5s}.poker-room[_ngcontent-%COMP%]   .voters-section[_ngcontent-%COMP%]   .floating[_ngcontent-%COMP%]   .avg-point[_ngcontent-%COMP%]{text-align:center;font-size:64px}.poker-room[_ngcontent-%COMP%]   .voters-section[_ngcontent-%COMP%]   .voter-div[_ngcontent-%COMP%]{display:flex;margin:16px}.poker-room[_ngcontent-%COMP%]   .voters-section[_ngcontent-%COMP%]   .voter-cards[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:.5%;max-height:100%;align-self:center}.poker-room[_ngcontent-%COMP%]   .voters-section[_ngcontent-%COMP%]   .voter-cards[_ngcontent-%COMP%]   .voter-name[_ngcontent-%COMP%]{flex:10%;align-self:center}.poker-room[_ngcontent-%COMP%]   .voters-section[_ngcontent-%COMP%]   .voter-cards[_ngcontent-%COMP%]   .voter-points[_ngcontent-%COMP%]{flex:80%;font-size:64px;align-self:center;margin-top:20%;margin-bottom:20%}.poker-room[_ngcontent-%COMP%]   .voters-section[_ngcontent-%COMP%]   .voter-cards[_ngcontent-%COMP%]   .voter-card-actions[_ngcontent-%COMP%]{display:flex;flex:10%;align-self:center}.poker-room[_ngcontent-%COMP%]   .points-section[_ngcontent-%COMP%]{flex:30%;display:flex;flex-direction:row;flex-wrap:wrap;padding:2%;box-shadow:3px 6px 7px 3px #ccc}.poker-room[_ngcontent-%COMP%]   .points-section[_ngcontent-%COMP%]   .point-cards[_ngcontent-%COMP%]{display:flex;margin:.5%;flex:1 1 auto;justify-content:center;min-height:80px;cursor:pointer;box-shadow:3px 6px 7px 3px #ccc;transition:all .5s}.poker-room[_ngcontent-%COMP%]   .points-section[_ngcontent-%COMP%]   .point-cards[_ngcontent-%COMP%]:hover{background-color:rgba(192,224,224,.335);box-shadow:3px 6px 7px 3px #615b5b}.poker-room[_ngcontent-%COMP%]   .points-section[_ngcontent-%COMP%]   .point-cards[_ngcontent-%COMP%]   .point-value[_ngcontent-%COMP%]{align-self:center;font-size:64px}.voter-card-green[_ngcontent-%COMP%]{background-color:rgba(156,233,160,.397)}.voter-card-red[_ngcontent-%COMP%]{background-color:rgba(233,174,156,.397)}.point-cards-selected[_ngcontent-%COMP%]{background-color:rgba(118,139,139,.335);box-shadow:3px 6px 7px 3px #4b4646!important}.waiting-txt[_ngcontent-%COMP%]{font-size:36px;padding:16px}"]}),t})();function pA(t,e){1&t&&r.Lb(0,"mat-progress-bar",12)}function mA(t,e){if(1&t){const t=r.Qb();r.Pb(0,"div",3),r.Pb(1,"div",4),r.vc(2," Already have a key? Join the room: "),r.Lb(3,"input",5,6),r.Pb(5,"button",7),r.Wb("click",function(){r.mc(t);const e=r.jc(4);return r.ac().joinRoom(e.value)}),r.vc(6,"Join"),r.Ob(),r.Ob(),r.Pb(7,"div",8),r.Pb(8,"p"),r.vc(9,"---Or---"),r.Ob(),r.Ob(),r.Pb(10,"div",9),r.Pb(11,"button",10),r.Wb("click",function(){return r.mc(t),r.ac().createSession()}),r.Pb(12,"span"),r.vc(13,"Create a new Room"),r.Ob(),r.Ob(),r.Ob(),r.uc(14,pA,1,0,"mat-progress-bar",11),r.Ob()}if(2&t){const t=r.ac();r.Ab(5),r.gc("disabled",t.loading),r.Ab(6),r.gc("disabled",t.loading),r.Ab(3),r.gc("ngIf",t.loading)}}function gA(t,e){if(1&t&&(r.Pb(0,"div",13),r.Lb(1,"app-poker-room",14),r.Ob()),2&t){const t=r.ac();r.Ab(1),r.gc("sessionId",t.sessionId)}}let yA=(()=>{class t{constructor(t,e){this.pokerStore=t,this.cd=e,this.sessionId="",this.isRoomReady=!1,this.users=[],this.loading=!1}ngOnInit(){const t=localStorage.getItem("pokerKey");t&&t.length>0&&this.joinRoom(t),this.loading=!1}joinRoom(t){t.trim().length>0&&(this.loading=!0,this.sessionId=t.trim(),this.pokerStore.joinRoom(this.sessionId).subscribe(t=>{t&&(localStorage.setItem("pokerKey",this.sessionId),this.isRoomReady=!0,this.cd.detectChanges())},t=>{console.log(t),alert(t)}))}createSession(){this.loading=!0,this.pokerStore.createSession({story:"",users:[],showVotes:!1}).subscribe(t=>{this.joinRoom(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(z_),r.Kb(r.h))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-poker"]],decls:3,vars:2,consts:[[1,"container"],["class","no-room",4,"ngIf"],["class","room",4,"ngIf"],[1,"no-room"],[1,"have-key"],["type","text"],["keyInput",""],["type","submit",3,"disabled","click"],[1,"or"],[1,"new-room"],["type","button",3,"disabled","click"],["mode","query",4,"ngIf"],["mode","query"],[1,"room"],[3,"sessionId"]],template:function(t,e){1&t&&(r.Pb(0,"div",0),r.uc(1,mA,15,3,"div",1),r.uc(2,gA,2,1,"div",2),r.Ob()),2&t&&(r.Ab(1),r.gc("ngIf",!e.isRoomReady),r.Ab(1),r.gc("ngIf",e.isRoomReady))},directives:[q,aO,fA],styles:['@charset "UTF-8";.container[_ngcontent-%COMP%]{font-size:16px;font-family:Nunito,"sans-serif";display:flex;min-height:720px;flex-direction:column;align-content:center}.container[_ngcontent-%COMP%]   .no-room[_ngcontent-%COMP%]{flex-direction:column;top:150px;border:1px double rgba(15,10,10,.26666666666666666);width:50%;padding:8% 0;background-color:rgba(162,158,167,.034);box-shadow:3px 6px 7px -3px #ccc}.container[_ngcontent-%COMP%]   .no-room[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .no-room[_ngcontent-%COMP%]   .new-room[_ngcontent-%COMP%]{position:relative;display:flex;align-self:center}.container[_ngcontent-%COMP%]   .no-room[_ngcontent-%COMP%]   .have-key[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .no-room[_ngcontent-%COMP%]   .or[_ngcontent-%COMP%]{align-self:center;position:relative}.container[_ngcontent-%COMP%]   .no-room[_ngcontent-%COMP%]   .have-key[_ngcontent-%COMP%]{display:flex}.container[_ngcontent-%COMP%]   .no-room[_ngcontent-%COMP%]   .have-key[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0 8px;height:20px}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;top:-2px;background-color:rgba(48,11,100,.2196078431372549);border-radius:4px;border:1px double rgba(209,46,46,.26666666666666666);color:rgba(91,61,134,.7725490196078432);text-align:center;font-size:14px;padding:4px 8px;transition:all .5s;cursor:pointer}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:rgba(82,43,136,.7725490196078432);color:#fff}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer;display:inline-block;position:relative;transition:.5s}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:"\xbb";position:absolute;opacity:0;top:0;right:-20px;transition:.5s}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{padding-right:25px}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]:after{opacity:1;right:0}']}),t})();const bA=[{path:"format",component:Mi},{path:"notes",component:Li},{path:"poker",component:yA},{path:"",component:yA}];let _A=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},imports:[[ki.forRoot(bA)],ki]}),t})(),vA=(()=>{class t{constructor(){this.title="inPlace"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-root"]],decls:17,vars:0,consts:[[1,"container"],["routerLink","/",1,"logo"],["href","#","routerLink","/notes"],["href","#","routerLink","/format"],["href","#","routerLink","/poker"]],template:function(t,e){1&t&&(r.Pb(0,"header"),r.Pb(1,"div",0),r.Pb(2,"a",1),r.vc(3,"In Place"),r.Ob(),r.Pb(4,"nav"),r.Pb(5,"ul"),r.Pb(6,"li"),r.Pb(7,"a",2),r.vc(8,"Notes"),r.Ob(),r.Ob(),r.Pb(9,"li"),r.Pb(10,"a",3),r.vc(11,"Json Formatter"),r.Ob(),r.Ob(),r.Pb(12,"li"),r.Pb(13,"a",4),r.vc(14,"Poker Room"),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Pb(15,"div",0),r.Lb(16,"router-outlet"),r.Ob())},directives:[mi,yi],styles:[".container[_ngcontent-%COMP%]{width:80%;margin:0 auto;height:100%}header[_ngcontent-%COMP%]{background:#e7e4eb;padding:1em 0;margin:4px 8px;box-shadow:3px 6px 7px -3px #ccc;-webkit-box-shadow:3px 6px 7px -3px #ccc}header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:rgba(27,25,25,.479);text-decoration:none}header[_ngcontent-%COMP%]   a.logo[_ngcontent-%COMP%]{font-weight:700}header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{float:right}header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;display:flex}header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:1em}header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transition:all .5s;color:#000;border-radius:4px;background:#cdc7d5}h1[_ngcontent-%COMP%]{margin-top:2em}"]}),t})();class wA{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new CA(t,this.observables,this.project))}}class CA extends Ht{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Qt(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class SA{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new OA(t,this.predicate))}}class OA extends zt.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function EA(t){return null==t}function xA(t){return"function"==typeof t.set}function kA(t,e){return xA(e)?e:t.ref(e)}function TA(t,e){if("string"==typeof t)return e.stringCase();if(xA(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function IA(t,e,n="on",r=Vi.b){return new Gt.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(oe.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(KT.a)())}function AA(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function PA(t,e){const{payload:n,prevKey:r,key:i}=e,o=AA(t,i),s=function(t,e){if(EA(e))return 0;{const n=AA(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function RA(t){return(EA(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function jA(t,e,n){return function(t,e,n){return IA(t,"value","once",n).pipe(ae(r=>{const i=[Object(Ft.a)(r)];return e.forEach(e=>i.push(IA(t,e,"on",n))),Object(d_.a)(...i).pipe(me(PA,[]))}),zi())}(t,e=RA(e),n)}function DA(t,e,n){const r=(e=RA(e)).map(e=>IA(t,e,"on",n));return Object(d_.a)(...r)}function NA(t,e){return function(n,r){return TA(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function MA(t,e){return function(){return IA(t,"value","on",e)}}n("6Uf2");const FA=new r.q("angularfire2.realtimeDatabaseURL"),LA=new r.q("angularfire2.database.use-emulator");let VA=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Gi.d(i),this.keepUnstableUntilFirst=Object(Gi.h)(this.schedulers);const a=o,c=Object(Gi.g)(t,i,e);!Qi.a.auth&&s&&Object(Gi.j)(),this.database=Object(Gi.f)(`${c.name}.database.${n}`,"AngularFireDatabase",c,()=>{const t=i.runOutsideAngular(()=>c.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>kA(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:NA(r,"update"),set:NA(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?TA(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>jA(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>DA(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return IA(t,"value","on",e).pipe(Object(oe.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new wA(t,n))}}(e),Object(oe.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new SA(r))),Object(oe.a)(t=>t.actions));var r}(t,DA(t,e).pipe(me((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>jA(t,r,n).pipe(Object(oe.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>kA(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>MA(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>MA(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(oe.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(Gi.c),r.Tb(Gi.b,8),r.Tb(FA,8),r.Tb(r.B),r.Tb(r.z),r.Tb(LA,8),r.Tb(v_,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Tb)(Gi.c),Object(r.Tb)(Gi.b,8),Object(r.Tb)(FA,8),Object(r.Tb)(r.B),Object(r.Tb)(r.z),Object(r.Tb)(LA,8),Object(r.Tb)(v_,8))},token:t,providedIn:"any"}),t})(),qA=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[VA]}),t})(),UA=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},imports:[[FS,tt],FS]}),t})(),BA=(()=>{class t{}return t.\u0275mod=r.Ib({type:t,bootstrap:[vA]}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[z_],imports:[[Nt,_A,iT,Gi.a.initializeApp(i),qA,PS,ME,Vx,FI,oA,zT,xE,vI,ax,XI,_T,UA,JE,WE,uO]]}),t})();Object(r.T)(),jt().bootstrapModule(BA).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return c});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function c(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);